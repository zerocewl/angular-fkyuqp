!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@ngx-translate/core"),require("moment-mini"),require("excel-builder-webpacker"),require("text-encoding-utf-8"),require("slickgrid/plugins/slick.cellrangedecorator"),require("slickgrid/plugins/slick.cellrangeselector"),require("slickgrid/plugins/slick.cellselectionmodel"),require("lodash.isequal"),require("flatpickr"),require("dompurify"),require("jquery-ui-dist/jquery-ui"),require("slickgrid/lib/jquery.event.drag-2.3.0"),require("slickgrid/slick.core"),require("slickgrid/slick.grid"),require("slickgrid/slick.dataview"),require("@angular/common")):"function"==typeof define&&define.amd?define("angular-slickgrid",["exports","@angular/core","rxjs","rxjs/operators","@ngx-translate/core","moment-mini","excel-builder-webpacker","text-encoding-utf-8","slickgrid/plugins/slick.cellrangedecorator","slickgrid/plugins/slick.cellrangeselector","slickgrid/plugins/slick.cellselectionmodel","lodash.isequal","flatpickr","dompurify","jquery-ui-dist/jquery-ui","slickgrid/lib/jquery.event.drag-2.3.0","slickgrid/slick.core","slickgrid/slick.grid","slickgrid/slick.dataview","@angular/common"],t):t((e=e||self)["angular-slickgrid"]={},e.ng.core,e.rxjs,e.rxjs.operators,e["ngx-translate-core"],e.moment,e.excelBuilderWebpacker,e.textEncodingUtf8,null,null,null,e.lodash.isequal,e.flatpickr,e.dompurify,null,null,null,null,null,e.ng.common)}(this,(function(e,t,i,r,n,o,s,a,l,d,c,u,h,p,m,f,g,y,v,b){"use strict";h=h&&h.hasOwnProperty("default")?h["default"]:h;
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
var S=function(e,t){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function _(e,t){function i(){this.constructor=e}S(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var O,T,E,C,w,x,P,A,D,I,F,k,M=function(){return(M=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function N(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s}function R(e,t){return function(i,r){t(i,r,e)}}function V(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function G(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r["throw"](e))}catch(t){o(t)}}function l(e){e.done?n(e.value):new i((function(t){t(e.value)})).then(s,a)}l((r=r.apply(e,t||[])).next())}))}function L(e,t){var i,r,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),"throw":a(1),"return":a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(n=2&o[0]?r["return"]:o[0]?r["throw"]||((n=r["return"])&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function j(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}function H(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){n={error:a}}finally{try{r&&!r.done&&(i=o["return"])&&i.call(o)}finally{if(n)throw n.error}}return s}function B(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(H(arguments[t]));return e}(O=e.CaseType||(e.CaseType={}))[O.camelCase=0]="camelCase",O[O.pascalCase=1]="pascalCase",O[O.snakeCase=2]="snakeCase",O[O.kebabCase=3]="kebabCase",(T=e.DelimiterType||(e.DelimiterType={})).colon=":",T.comma=",",T.equalSign="=",T.pipe="|",T.semicolon=";",T.space=" ",T.tab="\t",T.doubleColon="::",T.doublePipe="||",T.doubleSemicolon=";;",(E=e.EmitterType||(e.EmitterType={})).local="local",E.remote="remote",(C=e.ExtensionName||(e.ExtensionName={})).autoTooltip="autoTooltip",C.cellExternalCopyManager="cellExternalCopyManager",C.cellMenu="cellMenu",C.checkboxSelector="checkboxSelector",C.columnPicker="columnPicker",C.contextMenu="contextMenu",C.draggableGrouping="draggableGrouping",C.groupItemMetaProvider="groupItemMetaProvider",C.gridMenu="gridMenu",C.headerButton="headerButton",C.headerMenu="headerMenu",C.noname="noname",C.rowDetailView="rowDetailView",C.rowMoveManager="rowMoveManager",C.rowSelection="rowSelection",(w=e.FieldType||(e.FieldType={}))[w.unknown=0]="unknown",w[w.string=1]="string",w[w.boolean=2]="boolean",w[w.integer=3]="integer",w[w.float=4]="float",w[w.number=5]="number",w[w.date=6]="date",w[w.dateIso=7]="dateIso",w[w.dateUtc=8]="dateUtc",w[w.dateTime=9]="dateTime",w[w.dateTimeIso=10]="dateTimeIso",w[w.dateTimeIsoAmPm=11]="dateTimeIsoAmPm",w[w.dateTimeIsoAM_PM=12]="dateTimeIsoAM_PM",w[w.dateTimeShortIso=13]="dateTimeShortIso",w[w.dateEuro=14]="dateEuro",w[w.dateEuroShort=15]="dateEuroShort",w[w.dateTimeShortEuro=16]="dateTimeShortEuro",w[w.dateTimeEuro=17]="dateTimeEuro",w[w.dateTimeEuroAmPm=18]="dateTimeEuroAmPm",w[w.dateTimeEuroAM_PM=19]="dateTimeEuroAM_PM",w[w.dateTimeEuroShort=20]="dateTimeEuroShort",w[w.dateTimeEuroShortAmPm=21]="dateTimeEuroShortAmPm",w[w.dateTimeEuroShortAM_PM=22]="dateTimeEuroShortAM_PM",w[w.dateUs=23]="dateUs",w[w.dateUsShort=24]="dateUsShort",w[w.dateTimeShortUs=25]="dateTimeShortUs",w[w.dateTimeUs=26]="dateTimeUs",w[w.dateTimeUsAmPm=27]="dateTimeUsAmPm",w[w.dateTimeUsAM_PM=28]="dateTimeUsAM_PM",w[w.dateTimeUsShort=29]="dateTimeUsShort",w[w.dateTimeUsShortAmPm=30]="dateTimeUsShortAmPm",w[w.dateTimeUsShortAM_PM=31]="dateTimeUsShortAM_PM",w[w.object=32]="object",(x=e.FileType||(e.FileType={})).csv="csv",x.doc="doc",x.docx="docx",x.pdf="pdf",x.txt="txt",x.xls="xls",x.xlsx="xlsx",(P=e.FilterMultiplePassType||(e.FilterMultiplePassType={})).merge="merge",P.chain="chain",(A=e.GridStateType||(e.GridStateType={})).columns="columns",A.filter="filter",A.pagination="pagination",A.sorter="sorter",A.rowSelection="rowSelection",(D=e.KeyCode||(e.KeyCode={}))[D.BACKSPACE=8]="BACKSPACE",D[D.DELETE=46]="DELETE",D[D.DOWN=40]="DOWN",D[D.END=35]="END",D[D.ENTER=13]="ENTER",D[D.ESCAPE=27]="ESCAPE",D[D.HOME=36]="HOME",D[D.INSERT=45]="INSERT",D[D.LEFT=37]="LEFT",D[D.PAGE_DOWN=34]="PAGE_DOWN",D[D.PAGE_UP=33]="PAGE_UP",D[D.RIGHT=39]="RIGHT",D[D.TAB=9]="TAB",D[D.UP=38]="UP",D[D.SPACE=32]="SPACE",(I=e.OperatorType||(e.OperatorType={})).empty="",I.contains="Contains",I.notContains="Not_Contains",I.lessThan="LT",I.lessThanOrEqual="LE",I.greaterThan="GT",I.greaterThanOrEqual="GE",I.notEqual="NE",I.equal="EQ",I.endsWith="EndsWith",I.rangeInclusive="RangeInclusive",I.rangeExclusive="RangeExclusive",I.startsWith="StartsWith",I["in"]="IN",I.notIn="NOT_IN",I.inContains="IN_CONTAINS",I.notInContains="NOT_IN_CONTAINS",(F=e.SortDirection||(e.SortDirection={})).asc="asc",F.ASC="ASC",F.desc="desc",F.DESC="DESC",(k=e.SortDirectionNumber||(e.SortDirectionNumber={}))[k.asc=1]="asc",k[k.desc=-1]="desc",k[k.neutral=0]="neutral";var U=function(){function e(e,t,i){this.compFactoryResolver=e,this.appRef=t,this.injector=i}return e.prototype.createAngularComponent=function(e){var t,i=this.compFactoryResolver.resolveComponentFactory(e).create(this.injector);this.appRef.attachView(i.hostView);var r=i.hostView;return r&&Array.isArray(r.rootNodes)&&r.rootNodes[0]&&(t=r.rootNodes[0]),{componentRef:i,domElement:t}},e.prototype.createAngularComponentAppendToDom=function(e,t,i){void 0===i&&(i=!1);var r=this.createAngularComponent(e);return t&&t.appendChild?(i&&t.innerHTML&&(t.innerHTML=""),t.appendChild(r.domElement)):document.body.appendChild(r.domElement),r},e=N([t.Injectable(),V("design:paramtypes",[t.ComponentFactoryResolver,t.ApplicationRef,t.Injector])],e)}(),z={executeBackendProcessesCallback:function(e,t,i,r){var n=new Date;t&&i&&i.internalPostProcess&&i.internalPostProcess(t),i.postProcess&&(t instanceof Object&&(t.metrics={startTime:e,endTime:n,executionTime:n.valueOf()-e.valueOf(),itemCount:r,totalItemCount:r},t.statistics=t.metrics),i.postProcess(t))},onBackendError:function(e,t){if(!t||!t.onError)throw e;t.onError(e)},executeBackendCallback:function(t,n,o,s,a,l,d){if(t){!o||o.clearFilterTriggered||o.clearSortTriggered||l(e.EmitterType.remote);var c=t.process(n);c instanceof Promise&&c.then?c.then((function(e){return z.executeBackendProcessesCallback(s,e,t,a)}))["catch"]((function(e){return z.onBackendError(e,t)})):i.isObservable(c)&&(i.isObservable(d)&&d.next(),c.pipe(r.takeUntil(i.iif((function(){return i.isObservable(d)}),d,i.EMPTY))).subscribe((function(e){return z.executeBackendProcessesCallback(s,e,t,a)}),(function(e){return z.onBackendError(e,t)})))}},refreshBackendDataset:function(e){var t="",i=e&&e.backendServiceApi;if(!i||!i.service||!i.process)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');if(i.service&&(t=i.service.buildQuery()),t&&""!==t){var r=new Date;i.preProcess&&i.preProcess();var n=e&&e.pagination&&e.pagination.totalItems;z.executeBackendCallback(i,t,null,r,n)}}},W=z.executeBackendProcessesCallback,q=z.onBackendError,Q=z.executeBackendCallback,X=z.refreshBackendDataset,K=function(){function e(e){this.angularUtilService=e}return Object.defineProperty(e.prototype,"domElement",{get:function(){return this._domElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"domContainerElement",{get:function(){return this._domContainerElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gridViewport",{get:function(){return $(".slick-viewport")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._domElement&&this._domElement.remove&&this._domElement.remove()},e.prototype.dropContainerShow=function(){this._domContainerElement&&this._domContainerElement.show&&this._domContainerElement.show()},e.prototype.render=function(e){var t=this;return new Promise((function(i){var r=e.component,n=e.args,o=e.parent,s=e.offsetTop,a=e.offsetLeft,l=e.offsetDropupBottom,d=n.cell,c=n.row;if(t._domContainerElement=$("#myDrop-r"+c+"-c"+d),t._domContainerElement){var u=t._domContainerElement.offset(),h=t.angularUtilService.createAngularComponent(r),p=h&&h.componentRef&&h.componentRef.instance;if(p){var m=p.dropdownId||"myDrop",f=p.dropDownToggleId||"dropdownMenu1";t._domElement=$("#"+m),t._domElement&&(t.dispose(),Object.assign(p,{parent:o,row:n.row,dataContext:n.grid.getDataItem(n.row)}),setTimeout((function(){t._domElement=$(h.domElement);var e=(u&&u.top||0)+30+(s||0),r=(u&&u.left||0)+(a||0);t._domElement.appendTo("body"),t._domElement.css("position","absolute"),t._domElement.css("top",e),t._domElement.css("left",r),$("#"+m).addClass("open"),$("#"+f).hide();var n=$(".dropdown-menu"),o=n.parent(),d=o.offset()||{},c=d.top||o&&o.length>0&&o[0].offsetTop,p=n.height(),g="0px";window.innerHeight-p-35<c&&(g="-".concat(""+(p+35+(l||0)+5),"px"));t._domElement.css({"margin-top":g});var y=d.left-$(document).width();t._domElement.css({"margin-left":t._domElement.width()+y+60+"px"});try{t._domElement.dropdown("show")}catch(v){}t._domElement.on("hidden.bs.dropdown",(function(){return t.dropContainerShow()})),t.gridViewport.on("scroll",(function(){return t.dispose()})),t._domElement.on("click",(function(){return t.dispose()})),i(!0)})))}}}))},e=N([t.Injectable(),V("design:paramtypes",[U])],e)}(),Y=function(e,t,i){var r=isNaN(e)||""===e||null===e?-99e10:parseFloat(e),n=isNaN(t)||""===t||null===t?-99e10:parseFloat(t);return i*(r===n?0:r>n?1:-1)},Z=function(t,i,r,n){if(!n||!n.dataKey)throw new Error('Sorting a "FieldType.object" requires you to provide the "dataKey" (object property name) of the object so that we can use it to sort correctly');var o=t.hasOwnProperty(n.dataKey)?t[n.dataKey]:t,s=i.hasOwnProperty(n.dataKey)?i[n.dataKey]:i;r!==undefined&&null!==r||(r=e.SortDirectionNumber.neutral);return r*("object"!=typeof t?-99e10:"object"!=typeof i?99e10:o?s?o===s?0:r?o<s?-1:1:o<s?1:-1:1:-1)},J=function(t,i,r){r!==undefined&&null!==r||(r=e.SortDirectionNumber.neutral);return r*(null===t?-1:null===i?1:t===i?0:r?t<i?-1:1:t<i?1:-1)},ee=o;function te(e,t){("object"==typeof t&&t.hasOwnProperty("id")?e.findIndex((function(e){return e.id===t.id})):e.findIndex((function(e){return e===t})))<0&&e.push(t)}function ie(e){for(var t="",i=0;i<e;i++)t+=" ";return t}function re(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return(e||"").toString().replace(/[&<>"']/g,(function(e){return t[e]}))}function ne(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(t)}))}function oe(e,t,i){if(void 0===i&&(i=!1),!(e&&t&&Array.isArray(e)&&Array.isArray(e)))return!1;if(e.length!==t.length)return!1;i||(e.sort(),t.sort());for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}function se(e,t){void 0===t&&(t="");var n=e;if(e instanceof Promise)return e;if(e instanceof i.Observable&&(n=e.pipe(r.first()).toPromise()),!(n instanceof Promise))throw new Error("Something went wrong, Angular-Slickgrid "+t+" is not able to convert the Observable into a Promise.\n      If you are using Angular HttpClient, you could try converting your http call to a Promise with \".toPromise()\"\n      for example::  this.http.post('graphql', { query: graphqlQuery }).toPromise()\n      ");return n}function ae(e,t,i){return void 0===i&&(i={}),e.find(t)||i}function le(e,t,i,r,n){if(void 0===r&&(r="."),void 0===n&&(n=""),isNaN(+e))return e;var o=t===undefined?2:t,s=i===undefined?2:i,a=String(Math.round(+e*Math.pow(10,s))/Math.pow(10,s));for(a.indexOf(".")<0&&o>0&&(a+=".");a.length-a.indexOf(".")<=o;)a+="0";return n&&(a=_e(a,n)),"."!==r&&(a=a.replace(".",r)),a}function de(e,t,i,r,n,o,s,a){if(void 0===n&&(n=""),void 0===o&&(o=""),void 0===s&&(s="."),void 0===a&&(a=""),isNaN(+e))return e;var l=Math.round(1e6*parseFloat(e))/1e6;if(l<0){var d=Math.abs(l);return r?isNaN(t)&&isNaN(i)?"("+n+_e(""+d,a)+o+")":"("+n+le(d,t,i,s,a)+o+")":isNaN(t)&&isNaN(i)?"-"+n+_e(""+d,a)+o:"-"+n+le(d,t,i,s,a)+o}return isNaN(t)&&isNaN(i)?""+n+_e(""+e,a)+o:""+n+le(e,t,i,s,a)+o}function ce(e,t){return t.split(".").reduce((function(e,t){return e&&e[t]}),e)}function ue(){var e=$("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),t=$("<div>").css({width:"100%"}).appendTo(e).outerWidth();return e.remove(),Math.ceil(100-t)}function he(t){var i;switch(t){case e.FieldType.dateTime:case e.FieldType.dateTimeIso:i="YYYY-MM-DD HH:mm:ss";break;case e.FieldType.dateTimeShortIso:i="YYYY-MM-DD HH:mm";break;case e.FieldType.dateTimeIsoAmPm:i="YYYY-MM-DD hh:mm:ss a";break;case e.FieldType.dateTimeIsoAM_PM:i="YYYY-MM-DD hh:mm:ss A";break;case e.FieldType.dateEuro:i="DD/MM/YYYY";break;case e.FieldType.dateEuroShort:i="D/M/YY";break;case e.FieldType.dateTimeEuro:i="DD/MM/YYYY HH:mm:ss";break;case e.FieldType.dateTimeShortEuro:i="DD/MM/YYYY HH:mm";break;case e.FieldType.dateTimeEuroAmPm:i="DD/MM/YYYY hh:mm:ss a";break;case e.FieldType.dateTimeEuroAM_PM:i="DD/MM/YYYY hh:mm:ss A";break;case e.FieldType.dateTimeEuroShort:i="D/M/YY H:m:s";break;case e.FieldType.dateTimeEuroShortAmPm:i="D/M/YY h:m:s a";break;case e.FieldType.dateUs:i="MM/DD/YYYY";break;case e.FieldType.dateUsShort:i="M/D/YY";break;case e.FieldType.dateTimeUs:i="MM/DD/YYYY HH:mm:ss";break;case e.FieldType.dateTimeShortUs:i="MM/DD/YYYY HH:mm";break;case e.FieldType.dateTimeUsAmPm:i="MM/DD/YYYY hh:mm:ss a";break;case e.FieldType.dateTimeUsAM_PM:i="MM/DD/YYYY hh:mm:ss A";break;case e.FieldType.dateTimeUsShort:i="M/D/YY H:m:s";break;case e.FieldType.dateTimeUsShortAmPm:i="M/D/YY h:m:s a";break;case e.FieldType.dateUtc:i="YYYY-MM-DDTHH:mm:ss.SSSZ";break;case e.FieldType.date:case e.FieldType.dateIso:default:i="YYYY-MM-DD"}return i}function pe(t){var i;switch(t){case e.FieldType.dateTime:case e.FieldType.dateTimeIso:i="Y-m-d H:i:S";break;case e.FieldType.dateTimeShortIso:i="Y-m-d H:i";break;case e.FieldType.dateTimeIsoAmPm:case e.FieldType.dateTimeIsoAM_PM:i="Y-m-d h:i:S K";break;case e.FieldType.dateEuro:i="d/m/Y";break;case e.FieldType.dateEuroShort:i="d/m/y";break;case e.FieldType.dateTimeEuro:i="d/m/Y H:i:S";break;case e.FieldType.dateTimeShortEuro:i="d/m/y H:i";break;case e.FieldType.dateTimeEuroAmPm:i="d/m/Y h:i:S K";break;case e.FieldType.dateTimeEuroAM_PM:i="d/m/Y h:i:s K";break;case e.FieldType.dateTimeEuroShort:i="d/m/y H:i:s";break;case e.FieldType.dateTimeEuroShortAmPm:i="d/m/y h:i:s K";break;case e.FieldType.dateUs:i="m/d/Y";break;case e.FieldType.dateUsShort:i="m/d/y";break;case e.FieldType.dateTimeUs:i="m/d/Y H:i:S";break;case e.FieldType.dateTimeShortUs:i="m/d/y H:i";break;case e.FieldType.dateTimeUsAmPm:i="m/d/Y h:i:S K";break;case e.FieldType.dateTimeUsAM_PM:i="m/d/Y h:i:s K";break;case e.FieldType.dateTimeUsShort:i="m/d/y H:i:s";break;case e.FieldType.dateTimeUsShortAmPm:i="m/d/y h:i:s K";break;case e.FieldType.dateUtc:i="Z";break;case e.FieldType.date:case e.FieldType.dateIso:default:i="Y-m-d"}return i}function me(t){var i;switch(t){case"<":case"LT":i=e.OperatorType.lessThan;break;case"<=":case"LE":i=e.OperatorType.lessThanOrEqual;break;case">":case"GT":i=e.OperatorType.greaterThan;break;case">=":case"GE":i=e.OperatorType.greaterThanOrEqual;break;case"<>":case"!=":case"NE":i=e.OperatorType.notEqual;break;case"*":case"a*":case"StartsWith":i=e.OperatorType.startsWith;break;case"*z":case"EndsWith":i=e.OperatorType.endsWith;break;case"=":case"==":case"EQ":i=e.OperatorType.equal;break;case"IN":i=e.OperatorType["in"];break;case"NIN":case"NOT_IN":i=e.OperatorType.notIn;break;case"Not_Contains":case"NOT_CONTAINS":i=e.OperatorType.notContains;break;case"Contains":case"CONTAINS":default:i=e.OperatorType.contains}return i}function fe(t){var i="";switch(t){case e.OperatorType.greaterThan:case">":i=">";break;case e.OperatorType.greaterThanOrEqual:case">=":i=">=";break;case e.OperatorType.lessThan:case"<":i="<";break;case e.OperatorType.lessThanOrEqual:case"<=":i="<=";break;case e.OperatorType.notEqual:case"<>":i="<>";break;case e.OperatorType.equal:case"=":case"==":case"EQ":i="=";break;case e.OperatorType.startsWith:case"a*":case"*":i="a*";break;case e.OperatorType.endsWith:case"*z":i="*z";break;default:i=t}return i}function ge(t){var i;switch(t){case e.FieldType.string:case e.FieldType.unknown:i=e.OperatorType.contains;break;case e.FieldType.float:case e.FieldType.number:case e.FieldType.date:case e.FieldType.dateIso:case e.FieldType.dateUtc:case e.FieldType.dateTime:case e.FieldType.dateTimeIso:case e.FieldType.dateTimeIsoAmPm:case e.FieldType.dateTimeIsoAM_PM:case e.FieldType.dateEuro:case e.FieldType.dateEuroShort:case e.FieldType.dateTimeEuro:case e.FieldType.dateTimeEuroAmPm:case e.FieldType.dateTimeEuroAM_PM:case e.FieldType.dateTimeEuroShort:case e.FieldType.dateTimeEuroShortAmPm:case e.FieldType.dateTimeEuroShortAM_PM:case e.FieldType.dateUs:case e.FieldType.dateUsShort:case e.FieldType.dateTimeUs:case e.FieldType.dateTimeUsAmPm:case e.FieldType.dateTimeUsAM_PM:case e.FieldType.dateTimeUsShort:case e.FieldType.dateTimeUsShortAmPm:case e.FieldType.dateTimeUsShortAM_PM:default:i=e.OperatorType.equal}return i}function ye(e){return/(true|1)/i.test(e+"")}function ve(e,t){var i=null;if(/^[0-9\-\/]*$/.test(e)){var r=decodeURIComponent(e),n=ee(new Date(r));n.isValid()&&4===n.year().toString().length&&(i=t?n.utc().format():n.format())}return i}function be(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}function Se(e,t,i){if("string"==typeof t&&(t=t.split(".")),t.length>1){var r=t.shift();Se(e[r]="[object Object]"===Object.prototype.toString.call(e[r])?e[r]:{},t,i)}else e[t[0]]=i}function _e(e,t){if(void 0===t&&(t=","),null!==e&&e!==undefined){var i=""+e,r=i.split(".");return 2===r.length?r[0].replace(/\B(?=(\d{3})+(?!\d))/g,t)+"."+r[1]:i.replace(/\B(?=(\d{3})+(?!\d))/g,t)}return e}function Oe(e,t){return void 0===t&&(t=!1),"string"==typeof e?t?e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})):e.charAt(0).toUpperCase()+e.slice(1):e}function Te(e){return"string"==typeof e?e.replace(/(?:^\w|[A-Z]|\b\w|[\s+\-_\/])/g,(function(e,t){return/[\s+\-_\/]/.test(e)?"":0===t?e.toLowerCase():e.toUpperCase()})):e}function Ee(e){return Array.isArray(e)&&e.length>0?e.filter((function(t,i){return e.indexOf(t)>=i})):e}function Ce(e){return Array.isArray(e)&&(e.forEach((function(e){e&&e.unsubscribe&&e.unsubscribe()})),e=[]),e}var we=o;function xe(e,t,i,r,n){var o=0;if(null!==e&&""!==e&&we(e,r,n).isValid())if(null!==t&&""!==t&&we(t,r,n).isValid()){var s=we(e,r,n),a=we(t,r,n);o=parseInt(s.format("X"),10)-parseInt(a.format("X"),10)}else o=1;else o=-1;return i*(0===o?0:o>0?1:-1)}function Pe(t){var i=t===e.FieldType.date?we.ISO_8601:he(t);return function(e,t,r){return i===we.ISO_8601?xe(e,t,r,i,!1):xe(e,t,r,i,!0)}}var Ae={date:Pe(e.FieldType.date),dateIso:Pe(e.FieldType.dateIso),dateUtc:Pe(e.FieldType.dateUtc),dateTime:Pe(e.FieldType.dateTime),dateTimeIso:Pe(e.FieldType.dateTimeIso),dateTimeIsoAmPm:Pe(e.FieldType.dateTimeIsoAmPm),dateTimeIsoAM_PM:Pe(e.FieldType.dateTimeIsoAM_PM),dateTimeShortIso:Pe(e.FieldType.dateTimeShortIso),dateEuro:Pe(e.FieldType.dateEuro),dateEuroShort:Pe(e.FieldType.dateEuroShort),dateTimeShortEuro:Pe(e.FieldType.dateTimeShortEuro),dateTimeEuro:Pe(e.FieldType.dateTimeEuro),dateTimeEuroAmPm:Pe(e.FieldType.dateTimeEuroAmPm),dateTimeEuroAM_PM:Pe(e.FieldType.dateTimeEuroAM_PM),dateTimeEuroShort:Pe(e.FieldType.dateTimeEuroShort),dateTimeEuroShortAmPm:Pe(e.FieldType.dateTimeEuroShortAmPm),dateTimeEuroShortAM_PM:Pe(e.FieldType.dateTimeEuroShortAM_PM),dateUs:Pe(e.FieldType.dateUs),dateUsShort:Pe(e.FieldType.dateUsShort),dateTimeShortUs:Pe(e.FieldType.dateTimeShortUs),dateTimeUs:Pe(e.FieldType.dateTimeUs),dateTimeUsAmPm:Pe(e.FieldType.dateTimeUsAmPm),dateTimeUsAM_PM:Pe(e.FieldType.dateTimeUsAM_PM),dateTimeUsShort:Pe(e.FieldType.dateTimeUsShort),dateTimeUsShortAmPm:Pe(e.FieldType.dateTimeUsShortAmPm),dateTimeUsShortAM_PM:Pe(e.FieldType.dateTimeUsShortAM_PM),numeric:Y,objectString:Z,string:J};function De(t,i,r,n,o){var s=0;switch(t){case e.FieldType.float:case e.FieldType.integer:case e.FieldType.number:s=Ae.numeric(i,r,n);break;case e.FieldType.date:case e.FieldType.dateIso:case e.FieldType.dateUtc:case e.FieldType.dateTime:case e.FieldType.dateTimeIso:case e.FieldType.dateTimeIsoAmPm:case e.FieldType.dateTimeIsoAM_PM:case e.FieldType.dateTimeShortIso:case e.FieldType.dateEuro:case e.FieldType.dateEuroShort:case e.FieldType.dateTimeShortEuro:case e.FieldType.dateTimeEuro:case e.FieldType.dateTimeEuroAmPm:case e.FieldType.dateTimeEuroAM_PM:case e.FieldType.dateTimeEuroShort:case e.FieldType.dateTimeEuroShortAmPm:case e.FieldType.dateTimeEuroShortAM_PM:case e.FieldType.dateUs:case e.FieldType.dateUsShort:case e.FieldType.dateTimeShortUs:case e.FieldType.dateTimeUs:case e.FieldType.dateTimeUsAmPm:case e.FieldType.dateTimeUsAM_PM:case e.FieldType.dateTimeUsShort:case e.FieldType.dateTimeUsShortAmPm:case e.FieldType.dateTimeUsShortAM_PM:s=Pe(t).call(this,i,r,n);break;case e.FieldType.object:s=Ae.objectString(i,r,n,o);break;default:s=Ae.string(i,r,n)}return s}var Ie=function(){function i(e){this.translate=e}return i.prototype.filterCollection=function(t,i,r){var n,o;void 0===r&&(r=e.FilterMultiplePassType.chain);var s=[];if(Array.isArray(i)){s=r===e.FilterMultiplePassType.merge?[]:t;try{for(var a=j(i),l=a.next();!l.done;l=a.next()){var d=l.value;if(r===e.FilterMultiplePassType.merge)s=Ee(B(s,this.singleFilterCollection(t,d)));else s=this.singleFilterCollection(s,d)}}catch(c){n={error:c}}finally{try{l&&!l.done&&(o=a["return"])&&o.call(a)}finally{if(n)throw n.error}}}else s=this.singleFilterCollection(t,i);return s},i.prototype.singleFilterCollection=function(t,i){var r=[];if(i){var n=i.property,o=i.operator||e.OperatorType.equal,s="undefined"==typeof i.value?"":i.value;switch(o){case e.OperatorType.equal:r=n?t.filter((function(e){return e[n]===s})):t.filter((function(e){return e===s}));break;case e.OperatorType.contains:r=n?t.filter((function(e){return-1!==e[n].toString().indexOf(s.toString())})):t.filter((function(e){return null!==e&&e!==undefined&&-1!==e.toString().indexOf(s.toString())}));break;case e.OperatorType.notContains:r=n?t.filter((function(e){return-1===e[n].toString().indexOf(s.toString())})):t.filter((function(e){return null!==e&&e!==undefined&&-1===e.toString().indexOf(s.toString())}));break;case e.OperatorType.notEqual:default:r=n?t.filter((function(e){return e[n]!==s})):t.filter((function(e){return e!==s}))}}return r},i.prototype.sortCollection=function(t,i,r,n){var o=this;if(n&&(!this.translate||!this.translate.instant))throw new Error('[Angular-Slickgrid] requires "ngx-translate" to be installed and configured when the grid option "enableTranslate" is enabled.');var s=[];if(r)if(Array.isArray(r))s=i.sort((function(i,s){for(var a=0,l=r.length;a<l;a++){var d=r[a];if(d&&d.property){var c=d.sortDesc?e.SortDirectionNumber.desc:e.SortDirectionNumber.asc,u=d.property,h=De(d.fieldType||e.FieldType.string,n?o.translate&&o.translate.currentLang&&o.translate.instant(i[u]||" "):i[u],n?o.translate&&o.translate.currentLang&&o.translate.instant(s[u]||" "):s[u],c,t);if(h!==e.SortDirectionNumber.neutral)return h}}return e.SortDirectionNumber.neutral}));else if(r&&r.property){var a=r.property,l=r.sortDesc?e.SortDirectionNumber.desc:e.SortDirectionNumber.asc,d=r.fieldType||e.FieldType.string;a&&(s=i.sort((function(i,r){var s=n?o.translate&&o.translate.currentLang&&o.translate.instant(i[a]||" "):i[a],c=n?o.translate&&o.translate.currentLang&&o.translate.instant(r[a]||" "):r[a],u=De(d,s,c,l,t);return u!==e.SortDirectionNumber.neutral?u:e.SortDirectionNumber.neutral})))}else if(r&&!r.property){var c=r.sortDesc?e.SortDirectionNumber.desc:e.SortDirectionNumber.asc,u=r.fieldType||e.FieldType.string;s=i.sort((function(i,r){var s=n?o.translate&&o.translate.currentLang&&o.translate.instant(i||" "):i,a=n?o.translate&&o.translate.currentLang&&o.translate.instant(r||" "):r,l=De(u,s,a,c,t);return l!==e.SortDirectionNumber.neutral?l:e.SortDirectionNumber.neutral}))}return s},i=N([t.Injectable(),R(0,t.Optional()),V("design:paramtypes",[n.TranslateService])],i)}(),Fe=function(){function e(){}return e.locales={TEXT_ALL_SELECTED:"All Selected",TEXT_CANCEL:"Cancel",TEXT_CLEAR_ALL_FILTERS:"Clear all Filters",TEXT_CLEAR_ALL_GROUPING:"Clear all Grouping",TEXT_CLEAR_ALL_SORTING:"Clear all Sorting",TEXT_COLLAPSE_ALL_GROUPS:"Collapse all Groups",TEXT_CONTAINS:"Contains",TEXT_COLUMNS:"Columns",TEXT_COMMANDS:"Commands",TEXT_COPY:"Copy",TEXT_EQUALS:"Equals",TEXT_ENDS_WITH:"Ends With",TEXT_EXPAND_ALL_GROUPS:"Expand all Groups",TEXT_EXPORT_TO_CSV:"Export in CSV format",TEXT_EXPORT_TO_TEXT_FORMAT:"Export in Text format (Tab delimited)",TEXT_EXPORT_TO_EXCEL:"Export to Excel",TEXT_FORCE_FIT_COLUMNS:"Force fit columns",TEXT_GROUP_BY:"Group By",TEXT_HIDE_COLUMN:"Hide Column",TEXT_ITEMS:"items",TEXT_ITEMS_PER_PAGE:"items per page",TEXT_OF:"of",TEXT_OK:"OK",TEXT_LAST_UPDATE:"Last Update",TEXT_PAGE:"Page",TEXT_REFRESH_DATASET:"Refresh Dataset",TEXT_REMOVE_FILTER:"Remove Filter",TEXT_REMOVE_SORT:"Remove Sort",TEXT_SAVE:"Save",TEXT_SELECT_ALL:"Select All",TEXT_SYNCHRONOUS_RESIZE:"Synchronous resize",TEXT_SORT_ASCENDING:"Sort Ascending",TEXT_SORT_DESCENDING:"Sort Descending",TEXT_STARTS_WITH:"Starts With",TEXT_TOGGLE_FILTER_ROW:"Toggle Filter Row",TEXT_TOGGLE_PRE_HEADER_ROW:"Toggle Pre-Header Row",TEXT_X_OF_Y_SELECTED:"# of % selected"},e.VALIDATION_REQUIRED_FIELD="Field is required",e.VALIDATION_EDITOR_VALID_NUMBER="Please enter a valid number",e.VALIDATION_EDITOR_VALID_INTEGER="Please enter a valid integer number",e.VALIDATION_EDITOR_INTEGER_BETWEEN="Please enter a valid integer number between {{minValue}} and {{maxValue}}",e.VALIDATION_EDITOR_INTEGER_MAX="Please enter a valid integer number that is lower than {{maxValue}}",e.VALIDATION_EDITOR_INTEGER_MIN="Please enter a valid integer number that is greater than {{minValue}}",e.VALIDATION_EDITOR_NUMBER_BETWEEN="Please enter a valid number between {{minValue}} and {{maxValue}}",e.VALIDATION_EDITOR_NUMBER_MAX="Please enter a valid number that is lower than {{maxValue}}",e.VALIDATION_EDITOR_NUMBER_MIN="Please enter a valid number that is greater than {{minValue}}",e.VALIDATION_EDITOR_DECIMAL_BETWEEN="Please enter a valid number with a maximum of {{maxDecimal}} decimals",e}();function ke(e,t,i,r,n,o){var s="",a=!1;o&&o.hasOwnProperty("exportWithFormatter")&&(a=!!o.exportWithFormatter),r&&r.hasOwnProperty("exportWithFormatter")&&(a=!!r.exportWithFormatter);var l=r.exportCustomFormatter!==undefined?r.exportCustomFormatter:undefined,d=r.field||r.id||"";if("string"==typeof r.field&&r.field.indexOf(".")>0){var c=r.field.split(".");d=c.length>0?c[0]:r.field}if(i&&i.hasOwnProperty(d)&&l!==undefined)s=u=l(e,t,i[d],r,i,n),u&&"object"==typeof u&&u.hasOwnProperty("text")&&(s=u.text),null!==s&&s!==undefined||(s="");else if(a&&i.hasOwnProperty(d)&&r.formatter){var u;s=u=r.formatter(e,t,i[d],r,i,n),u&&"object"==typeof u&&u.hasOwnProperty("text")&&(s=u.text),null!==s&&s!==undefined||(s="")}else null!==(s=i.hasOwnProperty(d)?i[d]:"")&&s!==undefined||(s="");return s}var Me=o,Ne=function(){function r(t){this.translate=t,this._fileFormat=e.FileType.xlsx,this._hasGroupedItems=!1,this.onGridBeforeExportToExcel=new i.Subject,this.onGridAfterExportToExcel=new i.Subject}return Object.defineProperty(r.prototype,"datasetIdName",{get:function(){return this._gridOptions&&this._gridOptions.datasetIdPropertyName||"id"},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"_gridOptions",{get:function(){return this._grid&&this._grid.getOptions?this._grid.getOptions():{}},enumerable:!0,configurable:!0}),r.prototype.init=function(e,t){if(this._grid=e,this._dataView=t,this._locales=this._gridOptions&&this._gridOptions.locales||Fe.locales,this._gridOptions.enableTranslate&&(!this.translate||!this.translate.instant))throw new Error('[Angular-Slickgrid] requires "ngx-translate" to be installed and configured when the grid option "enableTranslate" is enabled.')},r.prototype.exportToExcel=function(t){var i=this;if(!this._grid||!this._dataView)throw new Error('[Angular-Slickgrid] it seems that the SlickGrid & DataView objects are not initialized did you forget to enable the grid option flag "enableExcelExport"?');return new Promise((function(r,n){i.onGridBeforeExportToExcel.next(!0),i._excelExportOptions=$.extend(!0,{},i._gridOptions.excelExportOptions,t),i._fileFormat=i._excelExportOptions.format||e.FileType.xlsx,i._workbook=new s.Workbook,i._sheet=new s.Worksheet({name:i._excelExportOptions.sheetName||"Sheet1"}),i._stylesheet=i._workbook.getStyleSheet();var o=i._stylesheet.createFormat({font:{bold:!0}}),a=i._stylesheet.createFormat({format:"@"}),l=i._stylesheet.createFormat({format:"0"}),d=i._stylesheet.createFormat({format:"$#,##0.00"});i._stylesheetFormats={boldFormatter:o,dollarFormatter:d,numberFormatter:l,stringFormatter:a};var c=i.getDataOutput();setTimeout((function(){return G(i,void 0,void 0,(function(){var e,t,i,o,a;return L(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),this._gridOptions&&this._gridOptions.excelExportOptions&&this._gridOptions.excelExportOptions.customExcelHeader&&this._gridOptions.excelExportOptions.customExcelHeader(this._workbook,this._sheet),e=this._sheet.data,t=e,Array.isArray(e)&&Array.isArray(c)&&(t=this._sheet.data.concat(c)),this._sheet.setData(t),this._workbook.addWorksheet(this._sheet),[4,s.Builder.createFile(this._workbook,{type:"blob"})];case 1:return i=l.sent(),o={filename:this._excelExportOptions.filename+"."+this._fileFormat,format:this._fileFormat},this.startDownloadFile(M({},o,{blob:i,data:this._sheet.data})),this.onGridAfterExportToExcel.next(o),r(!0),[3,3];case 2:return a=l.sent(),n(a),[3,3];case 3:return[2]}}))}))}))}))},r.prototype.startDownloadFile=function(e){if("Microsoft Internet Explorer"===navigator.appName)throw new Error("Microsoft Internet Explorer 6 to 10 do not support javascript export to Excel. Please upgrade your browser.");if("function"==typeof navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(e.blob,e.filename);else{var t=document&&document.createElement("a"),i=URL.createObjectURL(e.blob);t&&document&&(t.textContent="download",t.href=i,t.setAttribute("download",e.filename),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t))}},r.prototype.useCellFormatByFieldType=function(t,i){var r=t;switch(i){case e.FieldType.dateTime:case e.FieldType.dateTimeIso:case e.FieldType.dateTimeShortIso:case e.FieldType.dateTimeIsoAmPm:case e.FieldType.dateTimeIsoAM_PM:case e.FieldType.dateEuro:case e.FieldType.dateEuroShort:case e.FieldType.dateTimeEuro:case e.FieldType.dateTimeShortEuro:case e.FieldType.dateTimeEuroAmPm:case e.FieldType.dateTimeEuroAM_PM:case e.FieldType.dateTimeEuroShort:case e.FieldType.dateTimeEuroShortAmPm:case e.FieldType.dateUs:case e.FieldType.dateUsShort:case e.FieldType.dateTimeUs:case e.FieldType.dateTimeShortUs:case e.FieldType.dateTimeUsAmPm:case e.FieldType.dateTimeUsAM_PM:case e.FieldType.dateTimeUsShort:case e.FieldType.dateTimeUsShortAmPm:case e.FieldType.dateUtc:case e.FieldType.date:case e.FieldType.dateIso:if(r=t,t){var n=he(i),o=Me(t,n,!1).isValid();r={value:t&&o?Me(t).format(n):t,metadata:{style:this._stylesheet.createFormat({format:n}).id}}}break;case e.FieldType.number:r={value:isNaN(+t)?null:t,metadata:{style:this._stylesheetFormats.numberFormatter.id}};break;default:r=t}return r},r.prototype.getDataOutput=function(){var e=this._grid&&this._grid.getColumns&&this._grid.getColumns()||[],t=[];return t.push(this.getColumnHeaderData(e,{style:this._stylesheetFormats.boldFormatter.id})),this.pushAllGridRowDataToArray(t,e),t},r.prototype.getColumnHeaderData=function(e,t){var i=[];this._columnHeaders=this.getColumnHeaders(e)||[],this._columnHeaders&&Array.isArray(this._columnHeaders)&&this._columnHeaders.length>0&&(i=this._columnHeaders.map((function(e){return{value:e.title,metadata:t}})));var r=this.getGroupColumnTitle();return r&&i.unshift({value:r,metadata:t}),i},r.prototype.getGroupColumnTitle=function(){var e=this._excelExportOptions.groupingColumnHeaderTitle;!e&&this._gridOptions.enableTranslate&&this.translate&&this.translate.currentLang&&this.translate.instant?e=this.translate.instant("GROUP_BY"):e||(e=this._locales&&this._locales.TEXT_GROUP_BY);var t=this._dataView&&this._dataView.getGrouping&&this._dataView.getGrouping();return t&&Array.isArray(t)&&t.length>0?(this._hasGroupedItems=!0,e):(this._hasGroupedItems=!1,null)},r.prototype.getColumnHeaders=function(e){var t=this;if(!e||!Array.isArray(e)||0===e.length)return null;var i=[];return e.forEach((function(e){var r="";r=(e.headerKey||e.nameKey)&&t._gridOptions.enableTranslate&&t.translate&&t.translate.currentLang&&t.translate.instant?t.translate.instant(e.headerKey||e.nameKey):e.name||Oe(e.field);var n=e.excludeFromExport||!1;(e.width===undefined||e.width>0)&&!n&&i.push({key:e.field||e.id,title:r})})),i},r.prototype.pushAllGridRowDataToArray=function(e,t){for(var i=this._dataView&&this._dataView.getLength&&this._dataView.getLength(),r=0;r<i;r++){var n=this._dataView.getItem(r);null!=n&&(null!=n[this.datasetIdName]?e.push(this.readRegularRowData(t,r,n)):this._hasGroupedItems&&n.__groupTotals===undefined?e.push([this.readGroupedTitleRow(n)]):n.__groupTotals&&e.push(this.readGroupedTotalRow(t,n)))}return e},r.prototype.readRegularRowData=function(t,i,r){for(var n=0,o=[],s=0,a=t.length;s<a;s++){var l=t[s],d=l.outputType||l.type||e.FieldType.string;if(!l.excludeFromExport){this._hasGroupedItems&&0===n&&o.push("");var c=ke(i,s,r,l,this._grid,this._excelExportOptions);(l.sanitizeDataExport||this._excelExportOptions.sanitizeDataExport)&&(c=be(c)),l.exportWithFormatter||(c=this.useCellFormatByFieldType(c,d)),o.push(c),n++}}return o},r.prototype.readGroupedTitleRow=function(e){var t=be(e.title);if(this._excelExportOptions&&this._excelExportOptions.addGroupIndentation){var i=this._excelExportOptions&&this._excelExportOptions.groupCollapsedSymbol||"▹",r=this._excelExportOptions&&this._excelExportOptions.groupExpandedSymbol||"▿";return(e.collapsed?i:r)+" "+ie(5*e.level)+t}return t},r.prototype.readGroupedTotalRow=function(e,t){var i=this,r=[this._excelExportOptions.groupingAggregatorRowText||""];return e.forEach((function(e){var n="",o=e.excludeFromExport||!1;e.groupTotalsFormatter&&(n=e.groupTotalsFormatter(t,e)),(e.sanitizeDataExport||i._excelExportOptions.sanitizeDataExport)&&(n=be(n)),(e.width===undefined||e.width>0)&&!o&&r.push(n)})),r},r=N([t.Injectable(),R(0,t.Optional()),V("design:paramtypes",[n.TranslateService])],r)}(),Re=function(){function r(t){this.translate=t,this._delimiter=",",this._fileFormat=e.FileType.csv,this._lineCarriageReturn="\n",this._exportQuoteWrapper="",this._hasGroupedItems=!1,this.onGridBeforeExportToFile=new i.Subject,this.onGridAfterExportToFile=new i.Subject}return Object.defineProperty(r.prototype,"datasetIdName",{get:function(){return this._gridOptions&&this._gridOptions.datasetIdPropertyName||"id"},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"_gridOptions",{get:function(){return this._grid&&this._grid.getOptions?this._grid.getOptions():{}},enumerable:!0,configurable:!0}),r.prototype.init=function(e,t){if(this._grid=e,this._dataView=t,this._locales=this._gridOptions&&this._gridOptions.locales||Fe.locales,this._gridOptions.enableTranslate&&(!this.translate||!this.translate.instant))throw new Error('[Angular-Slickgrid] requires "ngx-translate" to be installed and configured when the grid option "enableTranslate" is enabled.')},r.prototype.exportToFile=function(t){var i=this;if(!this._grid||!this._dataView)throw new Error('[Angular-Slickgrid] it seems that the SlickGrid & DataView objects are not initialized did you forget to enable the grid option flag "enableExcelExport"?');return new Promise((function(r,n){i.onGridBeforeExportToFile.next(!0),i._exportOptions=$.extend(!0,{},i._gridOptions.exportOptions,t),i._delimiter=i._exportOptions.delimiterOverride||i._exportOptions.delimiter||"",i._fileFormat=i._exportOptions.format||e.FileType.csv;var o=i.getDataOutput();setTimeout((function(){try{var e={filename:i._exportOptions.filename+"."+i._fileFormat,format:i._fileFormat,useUtf8WithBom:!i._exportOptions.hasOwnProperty("useUtf8WithBom")||i._exportOptions.useUtf8WithBom};i.startDownloadFile(M({},e,{content:o})),i.onGridAfterExportToFile.next(e),r(!0)}catch(t){n(t)}}),0)}))},r.prototype.startDownloadFile=function(t){if("Microsoft Internet Explorer"===navigator.appName)throw new Error("Microsoft Internet Explorer 6 to 10 do not support javascript export to CSV. Please upgrade your browser.");var i,r=t.format===e.FileType.csv?"text/csv":"text/plain",n=ne(t.content);i=t.format===e.FileType.csv?new a.TextEncoder("utf-8").encode(n):n;var o=new Blob([t.useUtf8WithBom?"\ufeff":"",i],{type:r+";charset=utf-8;"});if("function"==typeof navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(o,t.filename);else{var s=document.createElement("a"),l=URL.createObjectURL(o);s.textContent="download",s.href=l,s.setAttribute("download",t.filename),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)}},r.prototype.getDataOutput=function(){var t=this,i=this._grid.getColumns()||[],r=this._exportOptions.groupingColumnHeaderTitle;!r&&this._gridOptions.enableTranslate&&this.translate&&this.translate.currentLang&&this.translate.instant?r=this.translate.instant("GROUP_BY"):r||(r=this._locales&&this._locales.TEXT_GROUP_BY),this._exportQuoteWrapper=this._fileFormat===e.FileType.csv?'"':"";var n="",o=this._dataView.getGrouping();(o&&Array.isArray(o)&&o.length>0?(this._hasGroupedItems=!0,n+=this._fileFormat===e.FileType.csv?'"'+r+'"'+this._delimiter:""+r+this._delimiter):this._hasGroupedItems=!1,this._columnHeaders=this.getColumnHeaders(i)||[],this._columnHeaders&&Array.isArray(this._columnHeaders)&&this._columnHeaders.length>0)&&(n+=this._columnHeaders.map((function(e){return t._exportQuoteWrapper+e.title+t._exportQuoteWrapper})).join(this._delimiter)+this._lineCarriageReturn);return n+=this.getAllGridRowData(i,this._lineCarriageReturn)},r.prototype.getAllGridRowData=function(e,t){for(var i=[],r=this._dataView.getLength(),n=0;n<r;n++){var o=this._dataView.getItem(n);null!=o&&(null!=o[this.datasetIdName]?i.push(this.readRegularRowData(e,n,o)):this._hasGroupedItems&&o.__groupTotals===undefined?i.push(this.readGroupedTitleRow(o)):o.__groupTotals&&i.push(this.readGroupedTotalRow(e,o)))}return i.join(t)},r.prototype.getColumnHeaders=function(e){var t=this;if(!e||!Array.isArray(e)||0===e.length)return null;var i=[];return e.forEach((function(e){var r="";r=(e.headerKey||e.nameKey)&&t._gridOptions.enableTranslate&&t.translate&&t.translate.currentLang&&t.translate.instant?t.translate.instant(e.headerKey||e.nameKey):e.name||Oe(e.field);var n=e.excludeFromExport||!1;(e.width===undefined||e.width>0)&&!n&&i.push({key:e.field||e.id,title:r})})),i},r.prototype.readRegularRowData=function(t,i,r){for(var n=0,o=[],s=this._exportQuoteWrapper,a=0,l=t.length;a<l;a++){var d=t[a];if(!d.excludeFromExport){if(this._hasGroupedItems&&0===n){var c=this._fileFormat===e.FileType.csv?'""':"";o.push(c)}var u=ke(i,a,r,d,this._grid,this._exportOptions);(d.sanitizeDataExport||this._exportOptions.sanitizeDataExport)&&(u=be(u)),this._fileFormat===e.FileType.csv&&u&&(u=u.toString().replace(/"/gi,'""'));var h=d&&d.exportCsvForceToKeepAsString?"=":"";o.push(h+s+u+s),n++}}return o.join(this._delimiter)},r.prototype.readGroupedTitleRow=function(t){var i=be(t.title),r=this._exportQuoteWrapper;return i=ie(5*t.level)+i,this._fileFormat===e.FileType.csv&&(i=i.toString().replace(/"/gi,'""')),r+i+r},r.prototype.readGroupedTotalRow=function(t,i){var r=this,n=this._exportOptions.delimiter,o=this._exportOptions.format,s=this._exportOptions.groupingAggregatorRowText||"",a=this._exportQuoteWrapper,l=[""+a+s+a];return t.forEach((function(t){var n="",s=t.excludeFromExport||!1;t.groupTotalsFormatter&&(n=t.groupTotalsFormatter(i,t)),(t.sanitizeDataExport||r._exportOptions.sanitizeDataExport)&&(n=be(n)),o===e.FileType.csv&&(n=n.toString().replace(/"/gi,'""')),(t.width===undefined||t.width>0)&&!s&&l.push(a+n+a)})),l.join(n)},r=N([t.Injectable(),R(0,t.Optional()),V("design:paramtypes",[n.TranslateService])],r)}(),Ve=function(){function e(){this.onColumnsChanged=new i.Subject}return Object.defineProperty(e.prototype,"allColumns",{get:function(){return this._allColumns},set:function(e){this._allColumns=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnDefinitions",{get:function(){return this._grid&&this._grid.getColumns?this._grid.getColumns():[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentPagination",{get:function(){return this._currentPagination},set:function(e){this._currentPagination=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataView",{get:function(){return this._dataView},set:function(e){this._dataView=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},set:function(e){this._grid=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gridOptions",{get:function(){return this._gridOptions||this._grid&&this._grid.getOptions&&this._grid.getOptions()||{}},set:function(e){this._gridOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupItemMetadataProvider",{get:function(){return this._groupItemMetadataProvider},set:function(e){this._groupItemMetadataProvider=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleColumns",{get:function(){return this._visibleColumns},set:function(e){this._visibleColumns=e},enumerable:!0,configurable:!0}),e}(),Ge=function(){function i(e,t){this.sharedService=e,this.translate=t}return i.prototype.arrayRemoveItemByIndex=function(e,t){return e.filter((function(e,i){return t!==i}))},i.prototype.loadExtensionDynamically=function(t){try{switch(t){case e.ExtensionName.autoTooltip:require("slickgrid/plugins/slick.autotooltips");break;case e.ExtensionName.cellExternalCopyManager:require("slickgrid/plugins/slick.cellexternalcopymanager");break;case e.ExtensionName.checkboxSelector:require("slickgrid/plugins/slick.checkboxselectcolumn");break;case e.ExtensionName.cellMenu:require("slickgrid/plugins/slick.cellmenu");break;case e.ExtensionName.columnPicker:require("slickgrid/controls/slick.columnpicker");break;case e.ExtensionName.contextMenu:require("slickgrid/plugins/slick.contextmenu");break;case e.ExtensionName.draggableGrouping:require("slickgrid/plugins/slick.draggablegrouping");break;case e.ExtensionName.gridMenu:require("slickgrid/controls/slick.gridmenu");break;case e.ExtensionName.groupItemMetaProvider:require("slickgrid/slick.groupitemmetadataprovider");break;case e.ExtensionName.headerButton:require("slickgrid/plugins/slick.headerbuttons");break;case e.ExtensionName.headerMenu:require("slickgrid/plugins/slick.headermenu");break;case e.ExtensionName.rowSelection:require("slickgrid/plugins/slick.rowselectionmodel");break;case e.ExtensionName.rowDetailView:require("slickgrid/plugins/slick.rowdetailview");break;case e.ExtensionName.rowMoveManager:require("slickgrid/plugins/slick.rowmovemanager")}}catch(i){}},i.prototype.getPickerTitleOutputString=function(e,t){if(this.sharedService.gridOptions&&this.sharedService.gridOptions.enableTranslate&&(!this.translate||!this.translate.instant))throw new Error('[Angular-Slickgrid] requires "ngx-translate" to be installed and configured when the grid option "enableTranslate" is enabled.');var i="",r=this.sharedService.gridOptions&&this.sharedService.gridOptions[t]||{},n=this.sharedService.gridOptions&&this.sharedService.gridOptions.enableTranslate||!1,o=this.sharedService&&this.sharedService.gridOptions&&this.sharedService.gridOptions.locales||Fe.locales,s=r&&r[e],a=r&&r[e+"Key"];if(a&&this.translate&&this.translate.currentLang&&this.translate.instant)i=this.translate.instant(a||" ");else switch(e){case"customTitle":i=s||n&&this.translate&&this.translate.currentLang&&this.translate.instant&&this.translate.instant("COMMANDS")||o&&o.TEXT_COMMANDS;break;case"columnTitle":i=s||n&&this.translate&&this.translate.currentLang&&this.translate.instant&&this.translate.instant("COLUMNS")||o&&o.TEXT_COLUMNS;break;case"forceFitTitle":i=s||n&&this.translate&&this.translate.currentLang&&this.translate.instant&&this.translate.instant("FORCE_FIT_COLUMNS")||o&&o.TEXT_FORCE_FIT_COLUMNS;break;case"syncResizeTitle":i=s||n&&this.translate&&this.translate.currentLang&&this.translate.instant&&this.translate.instant("SYNCHRONOUS_RESIZE")||o&&o.TEXT_SYNCHRONOUS_RESIZE;break;default:i=s}return i},i.prototype.sortItems=function(e,t){Array.isArray(e)&&e.sort((function(e,i){return e&&i&&e.hasOwnProperty(t)&&i.hasOwnProperty(t)?e[t]-i[t]:0}))},i.prototype.translateItems=function(e,t,i){var r,n;if(Array.isArray(e))try{for(var o=j(e),s=o.next();!s.done;s=o.next()){var a=s.value;a[t]&&(a[i]=this.translate&&this.translate&&this.translate.currentLang&&this.translate.instant&&this.translate.instant(a[t]))}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=o["return"])&&n.call(o)}finally{if(r)throw r.error}}},i.prototype.translateWhenEnabledAndServiceExist=function(e,t){var i=this.sharedService&&this.sharedService.gridOptions,r=i&&i.locales||Fe.locales;return i.enableTranslate&&this.translate&&this.translate.currentLang&&this.translate.instant?this.translate.instant(e||" "):r&&r.hasOwnProperty(t)?r[t]:t},i=N([t.Injectable(),R(1,t.Optional()),V("design:paramtypes",[Ve,n.TranslateService])],i)}(),$e=function(){function i(e,t){this.extensionUtility=e,this.sharedService=t}return i.prototype.dispose=function(){this._addon&&this._addon.destroy&&this._addon.destroy()},i.prototype.getAddonInstance=function(){return this._addon},i.prototype.register=function(){return this.sharedService&&this.sharedService.grid&&this.sharedService.gridOptions?(this.extensionUtility.loadExtensionDynamically(e.ExtensionName.autoTooltip),this._addon=new Slick.AutoTooltips(this.sharedService.gridOptions.autoTooltipOptions||{}),this.sharedService.grid.registerPlugin(this._addon),this._addon):null},i=N([t.Injectable(),V("design:paramtypes",[Ge,Ve])],i)}(),Le=function(){function i(e,t){this.extensionUtility=e,this.sharedService=t,this._eventHandler=new Slick.EventHandler}return Object.defineProperty(i.prototype,"addonOptions",{get:function(){return this._addonOptions},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"eventHandler",{get:function(){return this._eventHandler},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"commandQueue",{get:function(){return this._commandQueue},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"undoRedoBuffer",{get:function(){return this._undoRedoBuffer},enumerable:!0,configurable:!0}),i.prototype.dispose=function(){this._eventHandler.unsubscribeAll(),this._addon&&this._addon.destroy&&this._addon.destroy()},i.prototype.getAddonInstance=function(){return this._addon},i.prototype.register=function(){var t=this;return this.sharedService&&this.sharedService.grid&&this.sharedService.gridOptions?(this.extensionUtility.loadExtensionDynamically(e.ExtensionName.cellExternalCopyManager),this.createUndoRedoBuffer(),this.hookUndoShortcutKey(),this._addonOptions=M({},this.getDefaultOptions(),this.sharedService.gridOptions.excelCopyBufferOptions),this.sharedService.grid.setSelectionModel(new Slick.CellSelectionModel),this._addon=new Slick.CellExternalCopyManager(this._addonOptions),this.sharedService.grid.registerPlugin(this._addon),this.sharedService.grid&&this.sharedService.gridOptions.excelCopyBufferOptions&&(this.sharedService.gridOptions.excelCopyBufferOptions.onExtensionRegistered&&this.sharedService.gridOptions.excelCopyBufferOptions.onExtensionRegistered(this._addon),this._eventHandler.subscribe(this._addon.onCopyCells,(function(e,i){t.sharedService.gridOptions.excelCopyBufferOptions&&"function"==typeof t.sharedService.gridOptions.excelCopyBufferOptions.onCopyCells&&t.sharedService.gridOptions.excelCopyBufferOptions.onCopyCells(e,i)})),this._eventHandler.subscribe(this._addon.onCopyCancelled,(function(e,i){t.sharedService.gridOptions.excelCopyBufferOptions&&"function"==typeof t.sharedService.gridOptions.excelCopyBufferOptions.onCopyCancelled&&t.sharedService.gridOptions.excelCopyBufferOptions.onCopyCancelled(e,i)})),this._eventHandler.subscribe(this._addon.onPasteCells,(function(e,i){t.sharedService.gridOptions.excelCopyBufferOptions&&"function"==typeof t.sharedService.gridOptions.excelCopyBufferOptions.onPasteCells&&t.sharedService.gridOptions.excelCopyBufferOptions.onPasteCells(e,i)}))),this._addon):null},i.prototype.createUndoRedoBuffer=function(){var e=this,t=0;this._commandQueue=[],this._undoRedoBuffer={queueAndExecuteCommand:function(i){e._commandQueue[t]=i,t++,i.execute()},undo:function(){if(0!==t){t--;var i=e._commandQueue[t];i&&Slick.GlobalEditorLock.cancelCurrentEdit()&&i.undo()}},redo:function(){if(!(t>=e._commandQueue.length)){var i=e._commandQueue[t];t++,i&&Slick.GlobalEditorLock.cancelCurrentEdit()&&i.execute()}}}},i.prototype.getDefaultOptions=function(){var e=this,t=0;return{clipboardCommandHandler:function(t){e._undoRedoBuffer.queueAndExecuteCommand.call(e._undoRedoBuffer,t)},dataItemColumnValueExtractor:function(t,i){if(!e.sharedService.gridOptions.editable||!i.editor){var r=i.exportWithFormatter!==undefined?i.exportWithFormatter:e.sharedService.gridOptions.exportOptions&&e.sharedService.gridOptions.exportOptions.exportWithFormatter;if(i.formatter&&r){var n=i.formatter(0,0,t[i.field],i,t,e.sharedService.grid);if(i.sanitizeDataExport||e.sharedService.gridOptions.exportOptions&&e.sharedService.gridOptions.exportOptions.sanitizeDataExport){var o=n;return n&&"object"==typeof n&&n.hasOwnProperty("text")&&(o=n.text),null===o&&(o=""),be(o)}return n}}return null},readOnlyMode:!1,includeHeaderWhenCopying:!1,newRowCreator:function(i){for(var r=0;r<i;r++){var n={id:"newRow_"+t++};e.sharedService.grid.getData().addItem(n)}}}},i.prototype.hookUndoShortcutKey=function(){var e=this;document.addEventListener("keydown",(function(t){90===(t.keyCode||t.code)&&(t.ctrlKey||t.metaKey)&&(t.shiftKey?e._undoRedoBuffer.redo():e._undoRedoBuffer.undo())}))},i=N([t.Injectable(),V("design:paramtypes",[Ge,Ve])],i)}(),je=function(){function i(e,t,i){this.extensionUtility=e,this.sharedService=t,this.translate=i,this._eventHandler=new Slick.EventHandler}return Object.defineProperty(i.prototype,"eventHandler",{get:function(){return this._eventHandler},enumerable:!0,configurable:!0}),i.prototype.dispose=function(){this._eventHandler.unsubscribeAll(),this._addon&&this._addon.destroy&&this._addon.destroy()},i.prototype.getAddonInstance=function(){return this._addon},i.prototype.register=function(){var t=this;if(this.sharedService.gridOptions&&this.sharedService.gridOptions.enableTranslate&&(!this.translate||!this.translate.instant))throw new Error('[Angular-Slickgrid] requires "ngx-translate" to be installed and configured when the grid option "enableTranslate" is enabled.');return this.sharedService&&this.sharedService.grid&&this.sharedService.gridOptions?(this._locales=this.sharedService.gridOptions&&this.sharedService.gridOptions.locales||Fe.locales,this.extensionUtility.loadExtensionDynamically(e.ExtensionName.cellMenu),this.sharedService.gridOptions.cellMenu=M({},this.getDefaultCellMenuOptions(),this.sharedService.gridOptions.cellMenu),this.sharedService.gridOptions.enableTranslate&&this.translateCellMenu(),this.sortMenuItems(this.sharedService.allColumns),this._addon=new Slick.Plugins.CellMenu(this.sharedService.gridOptions.cellMenu),this.sharedService.grid.registerPlugin(this._addon),this.sharedService.grid&&this.sharedService.gridOptions.cellMenu&&(this.sharedService.gridOptions.cellMenu.onExtensionRegistered&&this.sharedService.gridOptions.cellMenu.onExtensionRegistered(this._addon),this.sharedService.gridOptions.cellMenu&&"function"==typeof this.sharedService.gridOptions.cellMenu.onCommand&&this._eventHandler.subscribe(this._addon.onCommand,(function(e,i){t.sharedService.gridOptions.cellMenu.onCommand(e,i)})),this.sharedService.gridOptions.cellMenu&&"function"==typeof this.sharedService.gridOptions.cellMenu.onOptionSelected&&this._eventHandler.subscribe(this._addon.onOptionSelected,(function(e,i){t.sharedService.gridOptions.cellMenu.onOptionSelected(e,i)})),this.sharedService.gridOptions.cellMenu&&"function"==typeof this.sharedService.gridOptions.cellMenu.onAfterMenuShow&&this._eventHandler.subscribe(this._addon.onAfterMenuShow,(function(e,i){t.sharedService.gridOptions.cellMenu.onAfterMenuShow(e,i)})),this.sharedService.gridOptions.cellMenu&&"function"==typeof this.sharedService.gridOptions.cellMenu.onBeforeMenuShow&&this._eventHandler.subscribe(this._addon.onBeforeMenuShow,(function(e,i){t.sharedService.gridOptions.cellMenu.onBeforeMenuShow(e,i)})),this.sharedService.gridOptions.cellMenu&&"function"==typeof this.sharedService.gridOptions.cellMenu.onBeforeMenuClose&&this._eventHandler.subscribe(this._addon.onBeforeMenuClose,(function(e,i){t.sharedService.gridOptions.cellMenu.onBeforeMenuClose(e,i)}))),this._addon):null},i.prototype.translateCellMenu=function(){this.sharedService.gridOptions&&this.sharedService.gridOptions.cellMenu&&this.resetMenuTranslations(this.sharedService.allColumns)},i.prototype.getDefaultCellMenuOptions=function(){return{width:180}},i.prototype.resetMenuTranslations=function(e){var t=this,i=this.sharedService&&this.sharedService.gridOptions;i&&i.enableTranslate&&e.forEach((function(e){if(e&&e.cellMenu&&(Array.isArray(e.cellMenu.commandItems)||Array.isArray(e.cellMenu.optionItems))){var i=e.cellMenu.commandItems||[],r=e.cellMenu.optionItems||[];e.cellMenu.commandTitleKey&&(e.cellMenu.commandTitle=t.translate&&t.translate.currentLang&&t.translate.instant&&t.translate.instant(e.cellMenu.commandTitleKey)||t._locales&&t._locales.TEXT_COMMANDS||e.cellMenu.commandTitle),e.cellMenu.optionTitleKey&&(e.cellMenu.optionTitle=t.translate&&t.translate.currentLang&&t.translate.instant&&t.translate.instant(e.cellMenu.optionTitleKey)||e.cellMenu.optionTitle),t.extensionUtility.translateItems(i,"titleKey","title"),t.extensionUtility.translateItems(r,"titleKey","title")}}))},i.prototype.sortMenuItems=function(e){var t=this;e.forEach((function(e){if(e&&e.cellMenu&&e.cellMenu.commandItems){var i=e.cellMenu.commandItems||[],r=e.cellMenu.optionItems||[];t.extensionUtility.sortItems(i,"positionOrder"),t.extensionUtility.sortItems(r,"positionOrder")}}))},i=N([t.Injectable(),R(2,t.Optional()),V("design:paramtypes",[Ge,Ve,n.TranslateService])],i)}(),He=function(){function i(e,t){this.extensionUtility=e,this.sharedService=t}return i.prototype.dispose=function(){this._addon&&this._addon.destroy&&this._addon.destroy()},i.prototype.create=function(t,i){if(Array.isArray(t)&&i){this.extensionUtility.loadExtensionDynamically(e.ExtensionName.checkboxSelector),this._addon||(this._addon=new Slick.CheckboxSelectColumn(i.checkboxSelector||{}));var r=this._addon.getColumnDefinition();return"object"==typeof r&&(r.excludeFromExport=!0,r.excludeFromColumnPicker=!0,r.excludeFromGridMenu=!0,r.excludeFromQuery=!0,r.excludeFromHeaderMenu=!0,t.unshift(r)),this._addon}return null},i.prototype.getAddonInstance=function(){return this._addon},i.prototype.register=function(t){var i=this;return this.sharedService&&this.sharedService.grid&&this.sharedService.gridOptions?(this.sharedService.grid.registerPlugin(this._addon),t&&this.sharedService.grid.getSelectionModel()||(this.extensionUtility.loadExtensionDynamically(e.ExtensionName.rowSelection),t=new Slick.RowSelectionModel(this.sharedService.gridOptions.rowSelectionOptions||{}),this.sharedService.grid.setSelectionModel(t)),this.sharedService.gridOptions.preselectedRows&&t&&this.sharedService.grid.getSelectionModel()&&setTimeout((function(){return i._addon.selectRows(i.sharedService.gridOptions.preselectedRows)})),t):null},i=N([t.Injectable(),V("design:paramtypes",[Ge,Ve])],i)}(),Be=function(){function i(e,t){this.extensionUtility=e,this.sharedService=t,this._eventHandler=new Slick.EventHandler}return Object.defineProperty(i.prototype,"eventHandler",{get:function(){return this._eventHandler},enumerable:!0,configurable:!0}),i.prototype.dispose=function(){this._eventHandler.unsubscribeAll(),this._addon&&this._addon.destroy&&this._addon.destroy()},i.prototype.getAddonInstance=function(){return this._addon},i.prototype.register=function(){var t=this;if(this.sharedService&&this.sharedService.grid&&this.sharedService.gridOptions){this.extensionUtility.loadExtensionDynamically(e.ExtensionName.columnPicker);var i=this.extensionUtility.getPickerTitleOutputString("columnTitle","columnPicker"),r=this.extensionUtility.getPickerTitleOutputString("forceFitTitle","columnPicker"),n=this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","columnPicker");return this.sharedService.gridOptions.columnPicker=this.sharedService.gridOptions.columnPicker||{},this.sharedService.gridOptions.columnPicker.columnTitle=this.sharedService.gridOptions.columnPicker.columnTitle||i,this.sharedService.gridOptions.columnPicker.forceFitTitle=this.sharedService.gridOptions.columnPicker.forceFitTitle||r,this.sharedService.gridOptions.columnPicker.syncResizeTitle=this.sharedService.gridOptions.columnPicker.syncResizeTitle||n,this._addon=new Slick.Controls.ColumnPicker(this.sharedService.allColumns,this.sharedService.grid,this.sharedService.gridOptions),this.sharedService.grid&&this.sharedService.gridOptions.enableColumnPicker&&(this.sharedService.gridOptions.columnPicker.onExtensionRegistered&&this.sharedService.gridOptions.columnPicker.onExtensionRegistered(this._addon),this._eventHandler.subscribe(this._addon.onColumnsChanged,(function(e,i){t.sharedService.gridOptions.columnPicker&&"function"==typeof t.sharedService.gridOptions.columnPicker.onColumnsChanged&&t.sharedService.gridOptions.columnPicker.onColumnsChanged(e,i),i&&Array.isArray(i.columns)&&i.columns.length>t.sharedService.visibleColumns.length&&(t.sharedService.visibleColumns=i.columns)}))),this._addon}return null},i.prototype.translateColumnPicker=function(){this.sharedService&&this.sharedService.grid&&this.sharedService.gridOptions&&(this.sharedService.gridOptions.columnPicker&&(this.emptyColumnPickerTitles(),this.sharedService.gridOptions.columnPicker.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","columnPicker"),this.sharedService.gridOptions.columnPicker.forceFitTitle=this.extensionUtility.getPickerTitleOutputString("forceFitTitle","columnPicker"),this.sharedService.gridOptions.columnPicker.syncResizeTitle=this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","columnPicker")),this.extensionUtility.translateItems(this.sharedService.allColumns,"headerKey","name"),this.extensionUtility.translateItems(this.sharedService.allColumns,"nameKey","name"),this._addon&&this._addon.updateAllTitles&&this._addon.updateAllTitles(this.sharedService.gridOptions.columnPicker))},i.prototype.emptyColumnPickerTitles=function(){this.sharedService&&this.sharedService.gridOptions&&this.sharedService.gridOptions.columnPicker&&(this.sharedService.gridOptions.columnPicker.columnTitle="",this.sharedService.gridOptions.columnPicker.forceFitTitle="",this.sharedService.gridOptions.columnPicker.syncResizeTitle="")},i=N([t.Injectable(),V("design:paramtypes",[Ge,Ve])],i)}(),Ue=function(){function i(e,t,i,r,n){this.excelExportService=e,this.exportService=t,this.extensionUtility=i,this.sharedService=r,this.translate=n,this._eventHandler=new Slick.EventHandler}return Object.defineProperty(i.prototype,"eventHandler",{get:function(){return this._eventHandler},enumerable:!0,configurable:!0}),i.prototype.dispose=function(){this._eventHandler.unsubscribeAll(),this._addon&&this._addon.destroy&&this._addon.destroy(),this.sharedService.gridOptions&&this.sharedService.gridOptions.contextMenu&&this.sharedService.gridOptions.contextMenu.commandItems&&(this.sharedService.gridOptions.contextMenu=this._userOriginalContextMenu)},i.prototype.getAddonInstance=function(){return this._addon},i.prototype.register=function(){if(this.sharedService.gridOptions&&this.sharedService.gridOptions.enableTranslate&&(!this.translate||!this.translate.instant))throw new Error('[Angular-Slickgrid] requires "ngx-translate" to be installed and configured when the grid option "enableTranslate" is enabled.');if(this.sharedService&&this.sharedService.grid&&this.sharedService.gridOptions&&this.sharedService.gridOptions.contextMenu){var t=this.sharedService.gridOptions.contextMenu;return this._userOriginalContextMenu=M({},t),this.extensionUtility.loadExtensionDynamically(e.ExtensionName.contextMenu),this.sharedService.gridOptions.contextMenu=M({},t),t.commandItems=this.addMenuCustomCommands([]),this.extensionUtility.sortItems(t.commandItems||[],"positionOrder"),this.extensionUtility.sortItems(t.optionItems||[],"positionOrder"),this._addon=new Slick.Plugins.ContextMenu(t),this.sharedService.grid.registerPlugin(this._addon),this.sharedService.gridOptions.enableTranslate&&this.translateContextMenu(),this.sharedService.grid&&t&&(t.onExtensionRegistered&&t.onExtensionRegistered(this._addon),t&&"function"==typeof t.onCommand&&this._eventHandler.subscribe(this._addon.onCommand,(function(e,i){t.onCommand(e,i)})),t&&"function"==typeof t.onOptionSelected&&this._eventHandler.subscribe(this._addon.onOptionSelected,(function(e,i){t.onOptionSelected(e,i)})),t&&"function"==typeof t.onBeforeMenuShow&&this._eventHandler.subscribe(this._addon.onBeforeMenuShow,(function(e,i){t.onBeforeMenuShow(e,i)})),t&&"function"==typeof t.onBeforeMenuClose&&this._eventHandler.subscribe(this._addon.onBeforeMenuClose,(function(e,i){t.onBeforeMenuClose(e,i)})),t&&"function"==typeof t.onAfterMenuShow&&this._eventHandler.subscribe(this._addon.onAfterMenuShow,(function(e,i){t.onAfterMenuShow(e,i)}))),this._addon}return null},i.prototype.translateContextMenu=function(){if(this.sharedService&&this.sharedService.gridOptions&&this.sharedService.gridOptions.contextMenu){var e=this.sharedService.gridOptions.contextMenu,t={};e.commandTitleKey&&(e.commandTitle=this.translate&&this.translate.currentLang&&this.translate.instant&&this.translate.instant(e.commandTitleKey)||e.commandTitle,t.commandTitle=e.commandTitle),e.optionTitleKey&&(e.optionTitle=this.translate&&this.translate.currentLang&&this.translate.instant&&this.translate.instant(e.optionTitleKey)||e.optionTitle,t.optionTitle=e.optionTitle);var i=this._userOriginalContextMenu&&Array.isArray(this._userOriginalContextMenu.commandItems)?this._userOriginalContextMenu.commandItems:[];e.commandItems=B(i,this.addMenuCustomCommands(i)),t.commandItems=e.commandItems,this.extensionUtility.translateItems(e.commandItems||[],"titleKey","title"),this.extensionUtility.translateItems(e.optionItems||[],"titleKey","title"),this.extensionUtility.sortItems(e.commandItems||[],"positionOrder"),this.extensionUtility.sortItems(e.optionItems||[],"positionOrder"),this._addon&&this._addon.setOptions&&this._addon.setOptions(t)}},i.prototype.addMenuCustomCommands=function(t){var i=this,r=[],n=this.sharedService&&this.sharedService.gridOptions||{},o=n&&n.contextMenu,s=this.sharedService&&this.sharedService.dataView;if(o&&!o.hideCopyCellValueCommand){t.find((function(e){return e.hasOwnProperty("command")&&"copy"===e.command}))||r.push({iconCssClass:o.iconCopyCellValueCommand||"fa fa-clone",title:this.extensionUtility.translateWhenEnabledAndServiceExist("COPY","TEXT_COPY"),disabled:!1,command:"copy",positionOrder:50,action:function(e,t){i.copyToClipboard(t)},itemUsabilityOverride:function(e){var t=e&&e.column,i=e&&e.dataContext;return!(!t||!i.hasOwnProperty(t.field))&&(""!==i[t.field]&&null!==i[t.field]&&i[t.field]!==undefined)}})}if(n&&n.enableExport&&o&&!o.hideExportCsvCommand){t.find((function(e){return e.hasOwnProperty("command")&&"export-csv"===e.command}))||r.push({iconCssClass:o.iconExportCsvCommand||"fa fa-download",title:this.extensionUtility.translateWhenEnabledAndServiceExist("EXPORT_TO_CSV","TEXT_EXPORT_TO_CSV"),disabled:!1,command:"export-csv",positionOrder:51,action:function(){return i.exportService.exportToFile({delimiter:e.DelimiterType.comma,filename:"export",format:e.FileType.csv,useUtf8WithBom:!0})}})}if(n&&n.enableExcelExport&&o&&!o.hideExportExcelCommand){t.find((function(e){return e.hasOwnProperty("command")&&"export-excel"===e.command}))||r.push({iconCssClass:o.iconExportExcelCommand||"fa fa-file-excel-o text-success",title:this.extensionUtility.translateWhenEnabledAndServiceExist("EXPORT_TO_EXCEL","TEXT_EXPORT_TO_EXCEL"),disabled:!1,command:"export-excel",positionOrder:52,action:function(){return i.excelExportService.exportToExcel({filename:"export",format:e.FileType.xlsx})}})}if(n&&n.enableExport&&o&&!o.hideExportTextDelimitedCommand){t.find((function(e){return e.hasOwnProperty("command")&&"export-text-delimited"===e.command}))||r.push({iconCssClass:o.iconExportTextDelimitedCommand||"fa fa-download",title:this.extensionUtility.translateWhenEnabledAndServiceExist("EXPORT_TO_TAB_DELIMITED","TEXT_EXPORT_TO_TAB_DELIMITED"),disabled:!1,command:"export-text-delimited",positionOrder:53,action:function(){return i.exportService.exportToFile({delimiter:e.DelimiterType.tab,filename:"export",format:e.FileType.txt,useUtf8WithBom:!0})}})}if(n&&(n.enableGrouping||n.enableDraggableGrouping)){if(r.push({divider:!0,command:"",positionOrder:54}),n&&o&&!o.hideClearAllGrouping){t.find((function(e){return e.hasOwnProperty("command")&&"clear-grouping"===e.command}))||r.push({iconCssClass:o.iconClearGroupingCommand||"fa fa-times",title:this.extensionUtility.translateWhenEnabledAndServiceExist("CLEAR_ALL_GROUPING","TEXT_CLEAR_ALL_GROUPING"),disabled:!1,command:"clear-grouping",positionOrder:55,action:function(){return s.setGrouping([])},itemUsabilityOverride:function(){var e=s&&s.getGrouping&&s.getGrouping();return Array.isArray(e)&&e.length>0}})}if(n&&o&&!o.hideCollapseAllGroups){t.find((function(e){return e.hasOwnProperty("command")&&"collapse-all-groups"===e.command}))||r.push({iconCssClass:o.iconCollapseAllGroupsCommand||"fa fa-compress",title:this.extensionUtility.translateWhenEnabledAndServiceExist("COLLAPSE_ALL_GROUPS","TEXT_COLLAPSE_ALL_GROUPS"),disabled:!1,command:"collapse-all-groups",positionOrder:56,action:function(){return s.collapseAllGroups()},itemUsabilityOverride:function(){var e=s&&s.getGrouping&&s.getGrouping();return Array.isArray(e)&&e.length>0}})}if(n&&o&&!o.hideExpandAllGroups){t.find((function(e){return e.hasOwnProperty("command")&&"expand-all-groups"===e.command}))||r.push({iconCssClass:o.iconExpandAllGroupsCommand||"fa fa-expand",title:this.extensionUtility.translateWhenEnabledAndServiceExist("EXPAND_ALL_GROUPS","TEXT_EXPAND_ALL_GROUPS"),disabled:!1,command:"expand-all-groups",positionOrder:57,action:function(){return s.expandAllGroups()},itemUsabilityOverride:function(){var e=s&&s.getGrouping&&s.getGrouping();return Array.isArray(e)&&e.length>0}})}}return r},i.prototype.copyToClipboard=function(e){try{if(e&&e.grid&&e.command){var t=this.sharedService&&this.sharedService.gridOptions||{},i=e&&e.cell||0,r=e&&e.row||0,n=e&&e.column,o=ke(r,i,e&&e.dataContext,n,this.sharedService&&this.sharedService.grid,t&&(t.excelExportOptions||t.exportOptions)),s=document.createRange(),a=$("<div>").css({position:"absolute",left:"-1000px",top:"-1000px"}).text(o);$("body").append(a),s.selectNodeContents(a.get(0));var l=window.getSelection();if(l&&l.addRange&&l.removeAllRanges)l.removeAllRanges(),l.addRange(s),document.execCommand("copy",!1,o)&&a.remove()}}catch(d){}},i=N([t.Injectable(),R(4,t.Optional()),V("design:paramtypes",[Ne,Re,Ge,Ve,n.TranslateService])],i)}(),ze=function(){function i(e,t){this.extensionUtility=e,this.sharedService=t,this._eventHandler=new Slick.EventHandler}return Object.defineProperty(i.prototype,"eventHandler",{get:function(){return this._eventHandler},enumerable:!0,configurable:!0}),i.prototype.dispose=function(){this._eventHandler.unsubscribeAll(),this._addon&&this._addon.destroy&&this._addon.destroy()},i.prototype.create=function(t){return t?(this.extensionUtility.loadExtensionDynamically(e.ExtensionName.draggableGrouping),this._addon||(this._addon=new Slick.DraggableGrouping(t.draggableGrouping||{})),this._addon):null},i.prototype.getAddonInstance=function(){return this._addon},i.prototype.register=function(){var e=this;return this.sharedService&&this.sharedService.grid&&this.sharedService.gridOptions?(this.sharedService.grid.registerPlugin(this._addon),this.sharedService.grid&&this.sharedService.gridOptions.draggableGrouping&&(this.sharedService.gridOptions.draggableGrouping.onExtensionRegistered&&this.sharedService.gridOptions.draggableGrouping.onExtensionRegistered(this._addon),this._eventHandler.subscribe(this._addon.onGroupChanged,(function(t,i){e.sharedService.gridOptions.draggableGrouping&&"function"==typeof e.sharedService.gridOptions.draggableGrouping.onGroupChanged&&e.sharedService.gridOptions.draggableGrouping.onGroupChanged(t,i)}))),this._addon):null},i=N([t.Injectable(),V("design:paramtypes",[Ge,Ve])],i)}(),We=function(e){var t=Array.isArray(e.searchTerms)&&e.searchTerms[0]||"";return ye(e.cellValue)===ye(t)};function qe(e,t,i){if(i&&(e.hasOwnProperty(i)||t.hasOwnProperty(i)))return e[i]===t||e===t[i]||e[i]===t[i];for(var r in e)if(e.hasOwnProperty(r)&&e[r]!==t[r])return!1;return!0}var Qe=function(e,t,i){switch(e){case"<":case"LT":return t<i;case"<=":case"LE":return t<=i;case">":case"GT":return t>i;case">=":case"GE":return t>=i;case"!=":case"<>":case"NE":return t!==i;case"=":case"==":case"EQ":return t===i;case"IN":return!(!i||!i.indexOf)&&i.indexOf(t)>-1;case"NIN":case"NOT_IN":return!(!i||!i.includes)&&!i.includes(t);case"IN_CONTAINS":return!!(i&&Array.isArray(i)&&i.findIndex)&&i.findIndex((function(e){return t.indexOf(e)>-1}))>-1;case"NIN_CONTAINS":case"NOT_IN_CONTAINS":return!!(i&&Array.isArray(i)&&i.findIndex)&&!(i.findIndex((function(e){return t.indexOf(e)>-1}))>-1)}return!0},Xe=function(e){var t=e.cellValue+"";return Qe(e.operator||"IN",t,e.searchTerms||[])},Ke=function(t){var i,r,n=parseFloat(t.cellValue),o=Array.isArray(t.searchTerms)&&t.searchTerms||[0],s=!1;if(2===o.length||"string"==typeof o[0]&&o[0].indexOf("..")>0){s=!0;var a=2===o.length?o:o[0].split("..");i=parseFloat(Array.isArray(a)&&a[0]+""),r=parseFloat(Array.isArray(a)&&a[1]+"")}else i=parseFloat(o[0]+"");if(!i&&!t.operator)return!0;if(s){var l=t.operator&&t.operator===e.OperatorType.rangeInclusive,d=Qe(l?">=":">",n,i),c=Qe(l?"<=":"<",n,r);return d&&c}return Qe(t.operator||"==",n,i)},Ye=function(e){e.cellValue=e.cellValue===undefined||null===e.cellValue?"":e.cellValue.toString();var t=e.cellValue.toLowerCase(),i=Array.isArray(e.searchTerms)&&e.searchTerms[0]||"";return"string"==typeof i&&(i=i.toLowerCase()),"*"===e.operator||"EndsWith"===e.operator?t.endsWith(i):""===e.operator&&"*"===e.cellValueLastChar||"StartsWith"===e.operator?t.startsWith(i):""===e.operator?t.indexOf(i)>-1:Qe(e.operator||"==",t,i)},Ze=o,Je=function(t){var i=t&&t.operator&&t.operator.toUpperCase();if("IN"===i||"NIN"===i||"IN_CONTAINS"===i||"NIN_CONTAINS"===i)return Xe(t);switch(t.fieldType){case e.FieldType.boolean:return We(t);case e.FieldType.date:case e.FieldType.dateIso:case e.FieldType.dateUtc:case e.FieldType.dateTime:case e.FieldType.dateTimeIso:case e.FieldType.dateTimeIsoAmPm:case e.FieldType.dateTimeIsoAM_PM:case e.FieldType.dateTimeShortIso:case e.FieldType.dateEuro:case e.FieldType.dateEuroShort:case e.FieldType.dateTimeShortEuro:case e.FieldType.dateTimeEuro:case e.FieldType.dateTimeEuroAmPm:case e.FieldType.dateTimeEuroAM_PM:case e.FieldType.dateTimeEuroShort:case e.FieldType.dateTimeEuroShortAmPm:case e.FieldType.dateTimeEuroShortAM_PM:case e.FieldType.dateUs:case e.FieldType.dateUsShort:case e.FieldType.dateTimeShortUs:case e.FieldType.dateTimeUs:case e.FieldType.dateTimeUsAmPm:case e.FieldType.dateTimeUsAM_PM:case e.FieldType.dateTimeUsShort:case e.FieldType.dateTimeUsShortAmPm:case e.FieldType.dateTimeUsShortAM_PM:return function(t){var i,r,n=he(t&&(t.filterSearchType||t.fieldType)||e.FieldType.dateIso),o=Array.isArray(t.searchTerms)&&t.searchTerms||[],s=!1;if(0===o.length||""===o[0]||null===o[0]||!Ze(t.cellValue,n,!0).isValid())return!1;var a=Ze(t.cellValue,n,!0);if(2===o.length||o[0].indexOf("..")>0){s=!0;var l=2===o.length?o:o[0].split(".."),d=Array.isArray(l)&&l[0]||"",c=Array.isArray(l)&&l[1]||"",u=Ze(d,n,!0),h=Ze(c,n,!0);if(!Ze(u,n,!0).isValid()||!Ze(h,n,!0).isValid())return!1;i=Ze(u,n,!0),r=Ze(h,n,!0)}else{if(!Ze(o[0],n,!0).isValid())return!1;i=Ze(o[0],n,!0)}if(s){var p=t.operator&&t.operator===e.OperatorType.rangeInclusive,m=Qe(p?">=":">",parseInt(a.format("X"),10),parseInt(i.format("X"),10)),f=Qe(p?"<=":"<",parseInt(a.format("X"),10),parseInt(r.format("X"),10));return m&&f}return Qe(t.operator||"==",parseInt(a.format("X"),10),parseInt(i.format("X"),10))}(t);case e.FieldType.integer:case e.FieldType.float:case e.FieldType.number:return Ke(t);case e.FieldType.object:return function(e){var t=Array.isArray(e.searchTerms)&&e.searchTerms[0]||"";if(!t&&!e.operator)return!0;switch(e.operator){case"!=":case"<>":case"NE":return!qe(e.cellValue,t,e.dataKey);case"=":case"==":case"EQ":default:return qe(e.cellValue,t,e.dataKey)}}(t);case e.FieldType.string:default:return Ye(t)}};var et={executeMappedCondition:Je,booleanFilter:We,collectionSearchFilter:Xe,numberFilter:Ke,stringFilter:Ye,testFilter:Qe},tt=function(){function r(e,t){this.translate=e,this.collectionService=t,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this.isFilled=!1,this.valueName="label",this.enableTranslateLabel=!1,this.subscriptions=[]}return Object.defineProperty(r.prototype,"autoCompleteOptions",{get:function(){return this._autoCompleteOptions||{}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"collectionOptions",{get:function(){return this.columnDef&&this.columnDef.filter&&this.columnDef.filter.collectionOptions||{}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"collection",{get:function(){return this._collection},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"columnFilter",{get:function(){return this.columnDef&&this.columnDef.filter||{}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"customStructure",{get:function(){return this.columnDef&&this.columnDef.filter&&this.columnDef.filter.customStructure},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"defaultOperator",{get:function(){return e.OperatorType.equal},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"gridOptions",{get:function(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"operator",{get:function(){return this.columnFilter&&this.columnFilter.operator||this.defaultOperator},set:function(e){this.columnFilter&&(this.columnFilter.operator=e)},enumerable:!0,configurable:!0}),r.prototype.init=function(e){if(!e)throw new Error('[Angular-SlickGrid] A filter must always have an "init()" with valid arguments.');if(this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],!(this.grid&&this.columnDef&&this.columnFilter&&(this.columnFilter.collection||this.columnFilter.collectionAsync||this.columnFilter.filterOptions)))throw new Error("[Angular-SlickGrid] You need to pass a \"collection\" (or \"collectionAsync\") for the AutoComplete Filter to work correctly. Also each option should include a value/label pair (or value/labelKey when using Locale). For example:: { filter: model: Filters.autoComplete, collection: [{ value: true, label: 'True' }, { value: false, label: 'False'}] }");this.enableTranslateLabel=this.columnFilter&&this.columnFilter.enableTranslateLabel||!1,this.labelName=this.customStructure&&this.customStructure.label||"label",this.valueName=this.customStructure&&this.customStructure.value||"value";var t=this.columnFilter.collection||[];this._collection=t,this.renderDomElement(t);var i=this.columnFilter&&this.columnFilter.collectionAsync;return i?this.renderOptionsAsync(i):new Promise((function(e){return e(!0)}))},r.prototype.clear=function(e){void 0===e&&(e=!0),this.$filterElm&&(this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[],this.$filterElm.val(""),this.$filterElm.trigger("keyup"))},r.prototype.destroy=function(){this.$filterElm&&this.$filterElm.off("keyup").remove()},r.prototype.setValues=function(e,t){e&&this.$filterElm.val(e),this.operator=t||this.defaultOperator},r.prototype.filterCollection=function(e){var t=e;if(this.columnFilter&&this.columnFilter.collectionFilterBy){var i=this.columnFilter.collectionFilterBy,r=this.columnFilter.collectionOptions&&this.columnFilter.collectionOptions.filterResultAfterEachPass||null;t=this.collectionService.filterCollection(t,i,r)}return t},r.prototype.sortCollection=function(e){var t=e;if(this.columnFilter&&this.columnFilter.collectionSortBy){var i=this.columnFilter.collectionSortBy;t=this.collectionService.sortCollection(this.columnDef,t,i,this.enableTranslateLabel)}return t},r.prototype.renderOptionsAsync=function(e){return G(this,void 0,void 0,(function(){var t;return L(this,(function(i){switch(i.label){case 0:return t=[],e?[4,se(e)]:[3,2];case 1:t=i.sent(),this.renderDomElementFromCollectionAsync(t),this.createCollectionAsyncSubject(),i.label=2;case 2:return[2,!0]}}))}))},r.prototype.createCollectionAsyncSubject=function(){var e=this,t=new i.Subject;this.columnFilter.collectionAsync=t,this.subscriptions.push(t.subscribe((function(t){return e.renderDomElementFromCollectionAsync(t)})))},r.prototype.renderDomElementFromCollectionAsync=function(e){(this._collection=e,this.collectionOptions&&(this.collectionOptions.collectionInsideObjectProperty||this.collectionOptions.collectionInObjectProperty))&&(e=ce(e,this.collectionOptions.collectionInsideObjectProperty||this.collectionOptions.collectionInObjectProperty));if(!Array.isArray(e))throw new Error('Something went wrong while trying to pull the collection from the "collectionAsync" call in the AutoComplete Filter, the collection is not a valid array.');this.columnFilter.collection=e,this.renderDomElement(e)},r.prototype.renderDomElement=function(e){var t=this;!Array.isArray(e)&&this.collectionOptions&&(this.collectionOptions.collectionInsideObjectProperty||this.collectionOptions.collectionInObjectProperty)&&(e=ce(e,this.collectionOptions.collectionInsideObjectProperty||this.collectionOptions.collectionInObjectProperty));if(!Array.isArray(e))throw new Error('The "collection" passed to the Autocomplete Filter is not a valid array.');var i=e;i=this.filterCollection(i),i=this.sortCollection(i);var r=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"",n=this.buildTemplateHtmlString();this._collection=i,this.$filterElm=this.createDomElement(n,i,r),this.$filterElm.on("keyup",(function(e){var i=e&&e.target&&e.target.value||"",r=t.gridOptions.enableFilterTrimWhiteSpace||t.columnFilter.enableTrimWhiteSpace;"string"==typeof i&&r&&(i=i.trim()),t._clearFilterTriggered?(t.callback(e,{columnDef:t.columnDef,clearFilterTriggered:t._clearFilterTriggered,shouldTriggerQuery:t._shouldTriggerQuery}),t.$filterElm.removeClass("filled")):(""===i?t.$filterElm.removeClass("filled"):t.$filterElm.addClass("filled"),t.callback(e,{columnDef:t.columnDef,operator:t.operator,searchTerms:[i],shouldTriggerQuery:t._shouldTriggerQuery})),t._clearFilterTriggered=!1,t._shouldTriggerQuery=!0}))},r.prototype.buildTemplateHtmlString=function(){var e=this.columnDef&&this.columnDef.id,t=this.gridOptions&&this.gridOptions.defaultFilterPlaceholder||"";return this.columnFilter&&this.columnFilter.placeholder&&(t=this.columnFilter.placeholder),'<input type="text" role="presentation" autocomplete="off" class="form-control autocomplete search-filter filter-'+e+'" placeholder="'+t+'">'},r.prototype.createDomElement=function(e,t,i){var r=this,n=this.columnDef&&this.columnDef.id,o=this.grid.getHeaderRowColumn(n);$(o).empty();var s=$(e),a=i;Array.isArray(t)&&this.customStructure&&(t=t.map((function(e){return{label:e[r.labelName],value:e[r.valueName]}})));var l=this.columnFilter.filterOptions;if(l)l.select=function(e,t){return r.onSelect(e,t)},this._autoCompleteOptions=M({},l),s.autocomplete(l);else{var d={minLength:0,source:t,select:function(e,t){return r.onSelect(e,t)}};this._autoCompleteOptions=M({},d,this.columnFilter.filterOptions),s.autocomplete(this._autoCompleteOptions)}return s.val(a),s.data("columnId",n),i&&s.addClass("filled"),s&&"function"==typeof s.appendTo&&s.appendTo(o),s},r.prototype.onSelect=function(e,t){if(t&&t.item){var i="string"==typeof t.item?t.item:t.item.label,r="string"==typeof t.item?t.item:t.item.value;this.setValues(i),""===r?this.$filterElm.removeClass("filled"):this.$filterElm.addClass("filled"),this.callback(e,{columnDef:this.columnDef,operator:this.operator,searchTerms:[r],shouldTriggerQuery:this._shouldTriggerQuery}),this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}return!1},r=N([t.Injectable(),V("design:paramtypes",[n.TranslateService,Ie])],r)}();require("flatpickr");var it=function(){function i(e){this.translate=e,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}return Object.defineProperty(i.prototype,"gridOptions",{get:function(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"columnFilter",{get:function(){return this.columnDef&&this.columnDef.filter||{}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentDate",{get:function(){return this._currentDate},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"defaultOperator",{get:function(){return e.OperatorType.empty},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"flatpickrOptions",{get:function(){return this._flatpickrOptions||{}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"operator",{get:function(){return this._operator||this.columnFilter.operator||this.defaultOperator},set:function(e){this._operator=e},enumerable:!0,configurable:!0}),i.prototype.init=function(e){var t=this;if(!e)throw new Error('[Angular-SlickGrid] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.operator=e.operator||"",this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[];var i=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this.$filterElm=this.createDomElement(i),this.$filterInputElm.keyup((function(e){t.onTriggerEvent(e)})),this.$selectOperatorElm.change((function(e){t.onTriggerEvent(e)}))},i.prototype.clear=function(e){void 0===e&&(e=!0),this.flatInstance&&this.$selectOperatorElm&&(this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[],this.$selectOperatorElm.val(0),this.flatInstance.clear())},i.prototype.destroy=function(){this.$filterElm&&this.$filterElm.off("keyup").remove(),this.flatInstance&&"function"==typeof this.flatInstance.destroy&&this.flatInstance.destroy()},i.prototype.hide=function(){this.flatInstance&&"function"==typeof this.flatInstance.close&&this.flatInstance.close()},i.prototype.show=function(){this.flatInstance&&"function"==typeof this.flatInstance.open&&this.flatInstance.open()},i.prototype.setValues=function(e,t){if(this.flatInstance&&e){var i=Array.isArray(e)?e[0]:e;this._currentDate=i,this.flatInstance.setDate(i)}if(this.operator=t||this.defaultOperator,t&&this.$selectOperatorElm){var r=fe(this.operator);this.$selectOperatorElm.val(r)}},i.prototype.buildDatePickerInput=function(t){var i=this,r=pe(this.columnDef.type||e.FieldType.dateIso),n=pe(this.columnDef.outputType||this.columnDef.type||e.FieldType.dateUtc),o=this.columnFilter&&this.columnFilter.filterOptions||{},s=o&&o.locale||this.translate&&this.translate.currentLang||this.gridOptions.locale||"en";s&&s.length>2&&(s=s.substring(0,2)),t&&(this._currentDate=t);var a={defaultDate:t||"",altInput:!0,altFormat:n,dateFormat:r,wrap:!0,closeOnSelect:!0,locale:"en"!==s?this.loadFlatpickrLocale(s):"en",onChange:function(e,t,r){i._currentValue=t,i._currentDate=Array.isArray(e)&&e[0],a.enableTime?i.onTriggerEvent(new CustomEvent("keyup")):i.onTriggerEvent(undefined)}};n&&("Z"===n||n.toLowerCase().includes("h"))&&(a.enableTime=!0),this._flatpickrOptions=M({},a,o);var l=this.gridOptions&&this.gridOptions.defaultFilterPlaceholder||"";this.columnFilter&&this.columnFilter.placeholder&&(l=this.columnFilter.placeholder);var d=$('<div class="flatpickr"><input type="text" class="form-control" data-input placeholder="'+l+'"></div>');return this.flatInstance=d[0]&&"function"==typeof d[0].flatpickr?d[0].flatpickr(this._flatpickrOptions):h(d,this._flatpickrOptions),d},i.prototype.buildSelectOperatorHtmlString=function(){var e=this.getOptionValues(),t="";return e.forEach((function(e){t+='<option value="'+e.operator+'" title="'+e.description+'">'+e.operator+"</option>"})),'<select class="form-control">'+t+"</select>"},i.prototype.getOptionValues=function(){return[{operator:"",description:""},{operator:"=",description:"="},{operator:"<",description:"<"},{operator:"<=",description:"<="},{operator:">",description:">"},{operator:">=",description:">="},{operator:"<>",description:"<>"}]},i.prototype.createDomElement=function(e){var t=this.columnDef&&this.columnDef.id,i=this.grid.getHeaderRowColumn(t);$(i).empty(),this.$selectOperatorElm=$(this.buildSelectOperatorHtmlString()),this.$filterInputElm=this.buildDatePickerInput(e);var r=$('<div class="form-group search-filter filter-'+t+'"></div>'),n=$('<div class="input-group flatpickr"></div>'),o=$('<div class="input-group-addon input-group-prepend operator"></div>');return o.append(this.$selectOperatorElm),n.append(o),n.append(this.$filterInputElm),r.append(n),this.$filterInputElm.data("columnId",t),this.operator&&this.$selectOperatorElm.val(this.operator),e&&""!==e&&(this.$filterInputElm.addClass("filled"),this._currentDate=e,this._currentValue=e),r&&"function"==typeof r.appendTo&&r.appendTo(i),r},i.prototype.loadFlatpickrLocale=function(e){var t="en";try{if("en"!==e){var i=require("flatpickr/dist/l10n/"+e+".js")["default"];t=i&&i[e]?i[e]:"en"}}catch(r){return console.warn('[Angular-Slickgrid - CompoundDate Filter] It seems that "'+e+'" is not a locale supported by Flatpickr, we will use "en" instead. To avoid seeing this message, you can specifically set "filter: { filterOptions: { locale: \'en\' } }" in your column definition.'),"en"}return t},i.prototype.onTriggerEvent=function(e){if(this._clearFilterTriggered)this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,shouldTriggerQuery:this._shouldTriggerQuery}),this.$filterElm.removeClass("filled");else{var t=this.$selectOperatorElm.find("option:selected").text();this._currentValue?this.$filterElm.addClass("filled"):this.$filterElm.removeClass("filled"),this.callback(e,{columnDef:this.columnDef,searchTerms:this._currentValue?[this._currentValue]:null,operator:t||"",shouldTriggerQuery:this._shouldTriggerQuery})}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0},i=N([R(0,t.Optional()),V("design:paramtypes",[n.TranslateService])],i)}(),rt=function(){function t(e){this.translate=e,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this._inputType="text"}return Object.defineProperty(t.prototype,"gridOptions",{get:function(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnFilter",{get:function(){return this.columnDef&&this.columnDef.filter||{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultOperator",{get:function(){return e.OperatorType.empty},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputType",{get:function(){return this._inputType},set:function(e){this._inputType=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"operator",{get:function(){return this._operator||this.defaultOperator},set:function(e){this._operator=e},enumerable:!0,configurable:!0}),t.prototype.init=function(e){var t=this;if(!e)throw new Error('[Angular-SlickGrid] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.operator=e.operator,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this._locales=this.gridOptions&&this.gridOptions.locales||Fe.locales;var i=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this.$filterElm=this.createDomElement(i),this.$filterInputElm.on("keyup input change",(function(e){t.onTriggerEvent(e)})),this.$selectOperatorElm.on("change",(function(e){t.onTriggerEvent(e)}))},t.prototype.clear=function(e){void 0===e&&(e=!0),this.$filterElm&&this.$selectOperatorElm&&(this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[],this.$selectOperatorElm.val(0),this.$filterInputElm.val(""),this.onTriggerEvent(null))},t.prototype.destroy=function(){this.$filterElm&&this.$selectOperatorElm&&(this.$filterElm.off("keyup input change").remove(),this.$selectOperatorElm.off("change"))},t.prototype.setValues=function(e,t){if(e){var i=Array.isArray(e)?e[0]:e;this.$filterInputElm.val(i)}if(this.operator=t||this.defaultOperator,t&&this.$selectOperatorElm){var r=fe(this.operator);this.$selectOperatorElm.val(r)}},t.prototype.buildInputHtmlString=function(){var e=this.gridOptions&&this.gridOptions.defaultFilterPlaceholder||"";return this.columnFilter&&this.columnFilter.placeholder&&(e=this.columnFilter.placeholder),'<input type="'+(this._inputType||"text")+'" role="presentation"  autocomplete="off" class="form-control compound-input" placeholder="'+e+'" /><span></span>'},t.prototype.buildSelectOperatorHtmlString=function(){var e=this.getOptionValues(),t="";return e.forEach((function(e){t+='<option value="'+e.operator+'" title="'+e.description+'">'+e.operator+"</option>"})),'<select class="form-control">'+t+"</select>"},t.prototype.getOptionValues=function(){var t=[];switch(this.columnDef.type&&this.columnDef.type?this.columnDef.type:e.FieldType.string){case e.FieldType.string:t=[{operator:"",description:this.translate&&this.translate.currentLang&&this.translate.instant&&this.translate.instant("CONTAINS")||this._locales&&this._locales.TEXT_CONTAINS},{operator:"=",description:this.translate&&this.translate.currentLang&&this.translate.instant&&this.translate.instant("EQUALS")||this._locales&&this._locales.TEXT_EQUALS},{operator:"a*",description:this.translate&&this.translate.currentLang&&this.translate.instant&&this.translate.instant("STARTS_WITH")||this._locales&&this._locales.TEXT_STARTS_WITH},{operator:"*z",description:this.translate&&this.translate.currentLang&&this.translate.instant&&this.translate.instant("ENDS_WITH")||this._locales&&this._locales.TEXT_CONTAINS}];break;default:t=[{operator:"",description:""},{operator:"=",description:"="},{operator:"<",description:"<"},{operator:"<=",description:"<="},{operator:">",description:">"},{operator:">=",description:">="},{operator:"<>",description:"<>"}]}return t},t.prototype.createDomElement=function(e){var t=this.columnDef&&this.columnDef.id,i=this.grid.getHeaderRowColumn(t);$(i).empty(),this.$selectOperatorElm=$(this.buildSelectOperatorHtmlString()),this.$filterInputElm=$(this.buildInputHtmlString());var r=$('<div class="form-group search-filter filter-'+t+'"></div>'),n=$('<div class="input-group"></div>'),o=$('<div class="input-group-addon input-group-prepend operator"></div>');return o.append(this.$selectOperatorElm),n.append(o),n.append(this.$filterInputElm),r.append(n),this.$filterInputElm.val(e),this.$filterInputElm.data("columnId",t),this.operator&&this.$selectOperatorElm.val(this.operator),e&&r.addClass("filled"),r&&"function"==typeof r.appendTo&&r.appendTo(i),r},t.prototype.onTriggerEvent=function(e){if(this._clearFilterTriggered)this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,shouldTriggerQuery:this._shouldTriggerQuery}),this.$filterElm.removeClass("filled");else{var t=this.$selectOperatorElm.find("option:selected").text(),i=this.$filterInputElm.val(),r=this.gridOptions.enableFilterTrimWhiteSpace||this.columnFilter.enableTrimWhiteSpace;"string"==typeof i&&r&&(i=i.trim()),null!==i&&i!==undefined&&""!==i?this.$filterElm.addClass("filled"):this.$filterElm.removeClass("filled"),this.callback(e,{columnDef:this.columnDef,searchTerms:i?[i]:null,operator:t||"",shouldTriggerQuery:this._shouldTriggerQuery})}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0},t}(),nt=function(e){function t(t){var i=e.call(this,t)||this;return i.translate=t,i.inputType="number",i}return _(t,e),t}(rt),ot=function(e){function t(t){var i=e.call(this,t)||this;return i.translate=t,i.inputType="password",i}return _(t,e),t}(rt),st=function(){function t(){this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}return Object.defineProperty(t.prototype,"defaultOperator",{get:function(){return e.OperatorType.empty},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filterParams",{get:function(){return this.columnDef&&this.columnDef.filter&&this.columnDef.filter.params||{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filterProperties",{get:function(){return this.columnDef&&this.columnDef.filter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"operator",{get:function(){return this._operator||this.defaultOperator},set:function(e){this._operator=e},enumerable:!0,configurable:!0}),t.prototype.init=function(e){var t=this;if(!e)throw new Error('[Angular-SlickGrid] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.operator=e.operator||"",this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this._elementRangeInputId="rangeInput_"+this.columnDef.field,this._elementRangeOutputId="rangeOutput_"+this.columnDef.field;var i=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this.$filterElm=this.createDomElement(i),this.$filterInputElm.change((function(e){t.onTriggerEvent(e)})),this.$selectOperatorElm.change((function(e){t.onTriggerEvent(e)})),this.filterParams.hideSliderNumber||this.$filterInputElm.on("input change",(function(e){var i=e&&e.target&&e.target.value||"";if(i){var r=document.getElementsByClassName(t._elementRangeOutputId);r.length&&(r[0].innerHTML=i)}}))},t.prototype.clear=function(e){if(void 0===e&&(e=!0),this.$filterElm&&this.$selectOperatorElm){this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[];var t=this.filterParams.hasOwnProperty("sliderStartValue")?this.filterParams.sliderStartValue:0;this._currentValue=+t,this.$selectOperatorElm.val(0),this.$filterInputElm.val(t),this.filterParams.hideSliderNumber||this.$containerInputGroupElm.children("div.input-group-addon.input-group-append").children().last().html(t),this.onTriggerEvent(undefined),this.$filterElm.removeClass("filled")}},t.prototype.destroy=function(){this.$filterElm&&this.$filterElm.off("input change").remove()},t.prototype.getValues=function(){return this._currentValue},t.prototype.setValues=function(e,t){var i=Array.isArray(e)?e[0]:e;if(this._currentValue=+i,this.$filterInputElm.val(i),this.$containerInputGroupElm.children("div.input-group-addon.input-group-append").children().last().html(i),this.operator=t||this.defaultOperator,t&&this.$selectOperatorElm){var r=fe(this.operator);this.$selectOperatorElm.val(r)}},t.prototype.buildTemplateHtmlString=function(){var e=this.filterProperties.hasOwnProperty("minValue")?this.filterProperties.minValue:0,t=this.filterProperties.hasOwnProperty("maxValue")?this.filterProperties.maxValue:100,i=this.filterParams.hasOwnProperty("sliderStartValue")?this.filterParams.sliderStartValue:e,r=this.filterProperties.hasOwnProperty("valueStep")?this.filterProperties.valueStep:1;return'<input type="range" name="'+this._elementRangeInputId+'"\n              defaultValue="'+i+'" min="'+e+'" max="'+t+'" step="'+r+'"\n              class="form-control slider-filter-input range compound-slider '+this._elementRangeInputId+'" />'},t.prototype.buildTemplateSliderTextHtmlString=function(){var e=this.filterProperties.hasOwnProperty("minValue")?this.filterProperties.minValue:0,t=this.filterParams.hasOwnProperty("sliderStartValue")?this.filterParams.sliderStartValue:e;return'<div class="input-group-addon input-group-append slider-value"><span class="input-group-text '+this._elementRangeOutputId+'">'+t+"</span></div>"},t.prototype.buildSelectOperatorHtmlString=function(){var e=this.getOptionValues(),t="";return e.forEach((function(e){t+='<option value="'+e.operator+'" title="'+e.description+'">'+e.operator+"</option>"})),'<select class="form-control">'+t+"</select>"},t.prototype.getOptionValues=function(){return[{operator:"",description:""},{operator:"=",description:"="},{operator:"<",description:"<"},{operator:"<=",description:"<="},{operator:">",description:">"},{operator:">=",description:">="},{operator:"<>",description:"<>"}]},t.prototype.createDomElement=function(e){var t=this.columnDef&&this.columnDef.id,i=this.filterProperties.hasOwnProperty("minValue")?this.filterProperties.minValue:0,r=this.filterParams.hasOwnProperty("sliderStartValue")?this.filterParams.sliderStartValue:i,n=this.grid.getHeaderRowColumn(this.columnDef.id);$(n).empty();var o=e||"0";+o<i&&(o=""+i),+o<r&&(o=""+r),this._currentValue=+o,this.$selectOperatorElm=$(this.buildSelectOperatorHtmlString()),this.$filterInputElm=$(this.buildTemplateHtmlString());var s=$('<div class="form-group slider-container search-filter filter-'+t+'"></div>');this.$containerInputGroupElm=$('<div class="input-group search-filter filter-'+t+'"></div>');var a=$('<span class="input-group-addon input-group-prepend operator"></span>');if(a.append(this.$selectOperatorElm),this.$containerInputGroupElm.append(a),this.$containerInputGroupElm.append(this.$filterInputElm),!this.filterParams.hideSliderNumber){var l=$(this.buildTemplateSliderTextHtmlString());l.children().html(o),this.$containerInputGroupElm.append(l)}return s.append(this.$containerInputGroupElm),this.$filterInputElm.val(o),this.$filterInputElm.data("columnId",t),this.operator&&this.$selectOperatorElm.val(this.operator),""!==e&&s.addClass("filled"),s&&"function"==typeof s.appendTo&&s.appendTo(n),s},t.prototype.onTriggerEvent=function(e){var t=this.$filterInputElm.val();if(this._currentValue=+t,this._clearFilterTriggered)this.$filterElm.removeClass("filled"),this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,shouldTriggerQuery:this._shouldTriggerQuery});else{this.$filterElm.addClass("filled");var i=this.$selectOperatorElm.find("option:selected").text();this.callback(e,{columnDef:this.columnDef,searchTerms:t?[t||"0"]:null,operator:i||"",shouldTriggerQuery:this._shouldTriggerQuery})}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0},t}(),at=function(){function t(){this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this._inputType="text"}return Object.defineProperty(t.prototype,"columnFilter",{get:function(){return this.columnDef&&this.columnDef.filter||{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultOperator",{get:function(){return e.OperatorType.empty},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputType",{get:function(){return this._inputType},set:function(e){this._inputType=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"operator",{get:function(){return this.columnFilter&&this.columnFilter.operator||this.defaultOperator},set:function(e){this.columnFilter&&(this.columnFilter.operator=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gridOptions",{get:function(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}},enumerable:!0,configurable:!0}),t.prototype.init=function(e){var t=this;if(!e)throw new Error('[Angular-SlickGrid] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[];var i=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"",r=this.buildTemplateHtmlString();this.$filterElm=this.createDomElement(r,i),this.$filterElm.on("keyup input change",(function(e){var i=e&&e.target&&e.target.value||"",r=t.gridOptions.enableFilterTrimWhiteSpace||t.columnFilter.enableTrimWhiteSpace;"string"==typeof i&&r&&(i=i.trim()),t._clearFilterTriggered?(t.callback(e,{columnDef:t.columnDef,clearFilterTriggered:t._clearFilterTriggered,shouldTriggerQuery:t._shouldTriggerQuery}),t.$filterElm.removeClass("filled")):(""===i?t.$filterElm.removeClass("filled"):t.$filterElm.addClass("filled"),t.callback(e,{columnDef:t.columnDef,operator:t.operator,searchTerms:[i],shouldTriggerQuery:t._shouldTriggerQuery})),t._clearFilterTriggered=!1,t._shouldTriggerQuery=!0}))},t.prototype.clear=function(e){void 0===e&&(e=!0),this.$filterElm&&(this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[],this.$filterElm.val(""),this.$filterElm.trigger("keyup"))},t.prototype.destroy=function(){this.$filterElm&&this.$filterElm.off("keyup input change").remove()},t.prototype.setValues=function(e,t){e&&this.$filterElm.val(e),this.operator=t||this.defaultOperator},t.prototype.buildTemplateHtmlString=function(){var e=this.columnDef&&this.columnDef.id,t=this.gridOptions&&this.gridOptions.defaultFilterPlaceholder||"";return this.columnFilter&&this.columnFilter.placeholder&&(t=this.columnFilter.placeholder),'<input type="'+(this._inputType||"text")+'" role="presentation" autocomplete="off" class="form-control search-filter filter-'+e+'" placeholder="'+t+'"><span></span>'},t.prototype.createDomElement=function(e,t){var i=this.columnDef&&this.columnDef.id,r=this.grid.getHeaderRowColumn(i);$(r).empty();var n=$(e);return n.val(t),n.data("columnId",i),t&&n.addClass("filled"),n&&"function"==typeof n.appendTo&&n.appendTo(r),n},t}(),lt=function(e){function t(){var t=e.call(this)||this;return t.inputType="text",t}return _(t,e),Object.defineProperty(t.prototype,"inputMask",{get:function(){return this._inputMask},enumerable:!0,configurable:!0}),t.prototype.init=function(e){var t=this;if(!e)throw new Error('[Angular-SlickGrid] A filter must always have an "init()" with valid arguments.');if(this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this.columnDef&&this.columnDef.params&&this.columnDef.params.mask?this._inputMask=this.columnDef.params.mask:this.columnFilter&&this.columnFilter.params&&this.columnFilter.params.mask&&(this._inputMask=this.columnFilter.params.mask),!this._inputMask)throw new Error("[Angular-Slickgrid] The Filters.inputMask requires the mask to be passed in the filter params or the column definition params\n        for example:: this.columnDefinitions: [{ id: 'phone', field: 'phone', filter: { model: Filters.inputMask, params: { mask: '000-000-0000' }}}]");var i=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"",r=this.buildTemplateHtmlString();this.$filterElm=this.createDomElement(r,i),this.$filterElm.on("keyup input change",(function(e){var i="";if(e&&e.target&&e.target.value){var r=e.target.value,n=t.gridOptions.enableFilterTrimWhiteSpace||t.columnFilter.enableTrimWhiteSpace;"string"==typeof r&&n&&(r=r.trim());var o=t.unmaskValue(r),s=t.maskValue(o);i=o,e.keyCode>=48&&(t.$filterElm.val(s),e.preventDefault())}t._clearFilterTriggered?(t.callback(e,{columnDef:t.columnDef,clearFilterTriggered:t._clearFilterTriggered,shouldTriggerQuery:t._shouldTriggerQuery}),t.$filterElm.removeClass("filled")):(t.$filterElm.addClass("filled"),t.callback(e,{columnDef:t.columnDef,operator:t.operator,searchTerms:[i],shouldTriggerQuery:t._shouldTriggerQuery})),t._clearFilterTriggered=!1,t._shouldTriggerQuery=!0}))},t.prototype.maskValue=function(e){var t=0,i="";return this._inputMask&&(i=this._inputMask.replace(/[09A]/gi,(function(i){return(("0"===i||"9"===i)&&/\d+/g.test(e[t])||"A"===i.toUpperCase()&&/[^\d]+/gi.test(e[t]))&&e[t++]||""}))),i},t.prototype.unmaskValue=function(e){for(var t=e.replace(/[^0-9a-z]*/gi,""),i=this._inputMask.replace(/[^0-9a-z]*/gi,""),r="",n=0;n<i.length;n++)t[n]&&(("0"===i[n]||"9"===i[n])&&/\d+/g.test(t[n])||"A"===i[n].toUpperCase()&&/[^\d]+/gi.test(t[n]))&&(r+=t[n]);return r},t}(at),dt=function(e){function t(){var t=e.call(this)||this;return t.inputType="number",t}return _(t,e),t}(at),ct=function(e){function t(){var t=e.call(this)||this;return t.inputType="password",t}return _(t,e),t}(at),ut=p,ht=function(){function r(e,t,i){void 0===i&&(i=!0),this.translate=e,this.collectionService=t,this._isMultipleSelect=!0,this._shouldTriggerQuery=!0,this.isFilled=!1,this.enableTranslateLabel=!1,this.subscriptions=[],this._isMultipleSelect=i}return Object.defineProperty(r.prototype,"columnFilter",{get:function(){return this.columnDef&&this.columnDef.filter},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"collectionOptions",{get:function(){return this.columnDef&&this.columnDef.filter&&this.columnDef.filter.collectionOptions},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"customStructure",{get:function(){return this.columnDef&&this.columnDef.filter&&this.columnDef.filter.customStructure},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"gridOptions",{get:function(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"defaultOperator",{get:function(){return this.isMultipleSelect?e.OperatorType["in"]:e.OperatorType.equal},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isMultipleSelect",{get:function(){return this._isMultipleSelect},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"operator",{get:function(){return this.columnFilter&&this.columnFilter.operator||this.defaultOperator},set:function(e){this.columnFilter&&(this.columnFilter.operator=e)},enumerable:!0,configurable:!0}),r.prototype.init=function(e,t){if(!e)throw new Error('[Angular-SlickGrid] A filter must always have an "init()" with valid arguments.');if(this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],!this.grid||!this.columnDef||!this.columnFilter||!this.columnFilter.collection&&!this.columnFilter.collectionAsync)throw new Error("[Angular-SlickGrid] You need to pass a \"collection\" (or \"collectionAsync\") for the MultipleSelect/SingleSelect Filter to work correctly. Also each option should include a value/label pair (or value/labelKey when using Locale). For example:: { filter: model: Filters.multipleSelect, collection: [{ value: true, label: 'True' }, { value: false, label: 'False'}] }");if(this.enableTranslateLabel=this.columnFilter.enableTranslateLabel,this.labelName=this.customStructure&&this.customStructure.label||"label",this.labelPrefixName=this.customStructure&&this.customStructure.labelPrefix||"labelPrefix",this.labelSuffixName=this.customStructure&&this.customStructure.labelSuffix||"labelSuffix",this.optionLabel=this.customStructure&&this.customStructure.optionLabel||"value",this.valueName=this.customStructure&&this.customStructure.value||"value",this.enableTranslateLabel&&!this.gridOptions.enableTranslate&&(!this.translate||"function"!=typeof this.translate.instant))throw new Error('[select-filter] The ngx-translate TranslateService is required for the Select Filter to work correctly when "enableTranslateLabel" is set.');this._locales=this.gridOptions&&this.gridOptions.locales||Fe.locales,this.initMultipleSelect();var i=this.gridOptions&&this.gridOptions.defaultFilterPlaceholder||"";this.columnFilter&&this.columnFilter.placeholder&&(i=this.columnFilter.placeholder),this.defaultOptions.placeholder=i||"";var r=this.columnFilter.collection||[];this.renderDomElement(r);var n=this.columnFilter&&this.columnFilter.collectionAsync;return n?this.renderOptionsAsync(n):new Promise((function(e){return e(!0)}))},r.prototype.clear=function(e){void 0===e&&(e=!0),this.$filterElm&&this.$filterElm.multipleSelect&&(this.$filterElm.multipleSelect("setSelects",[]),this.$filterElm.removeClass("filled"),this.$filterElm.siblings("div .search-filter").removeClass("filled"),this.searchTerms=[],this._shouldTriggerQuery=e,this.callback(undefined,{columnDef:this.columnDef,clearFilterTriggered:!0,shouldTriggerQuery:this._shouldTriggerQuery}),this._shouldTriggerQuery=!0)},r.prototype.destroy=function(){if(this.$filterElm){this.$filterElm.off().remove();var e=this.elementName.toString().replace(".","\\.");$("[name="+e+"].ms-drop").remove()}this.subscriptions=Ce(this.subscriptions)},r.prototype.getValues=function(){return this.$filterElm&&"function"==typeof this.$filterElm.multipleSelect?this.$filterElm.multipleSelect("getSelects"):[]},r.prototype.setValues=function(e,t){e&&this.$filterElm&&"function"==typeof this.$filterElm.multipleSelect&&(e=Array.isArray(e)?e:[e],this.$filterElm.multipleSelect("setSelects",e)),this.operator=t||this.defaultOperator},r.prototype.filterCollection=function(e){var t=e;if(this.columnDef&&this.columnFilter&&this.columnFilter.collectionFilterBy){var i=this.columnFilter.collectionFilterBy,r=this.columnFilter.collectionOptions&&this.columnFilter.collectionOptions.filterResultAfterEachPass||null;t=this.collectionService.filterCollection(t,i,r)}return t},r.prototype.sortCollection=function(e){var t=e;if(this.columnDef&&this.columnFilter&&this.columnFilter.collectionSortBy){var i=this.columnFilter.collectionSortBy;t=this.collectionService.sortCollection(this.columnDef,t,i,this.enableTranslateLabel)}return t},r.prototype.renderOptionsAsync=function(e){return G(this,void 0,void 0,(function(){var t;return L(this,(function(i){switch(i.label){case 0:return t=[],e?[4,se(e)]:[3,2];case 1:t=i.sent(),this.renderDomElementFromCollectionAsync(t),this.createCollectionAsyncSubject(),i.label=2;case 2:return[2,!0]}}))}))},r.prototype.createCollectionAsyncSubject=function(){var e=this,t=new i.Subject;this.columnFilter.collectionAsync=t,this.subscriptions.push(t.subscribe((function(t){return e.renderDomElementFromCollectionAsync(t)})))},r.prototype.renderDomElementFromCollectionAsync=function(e){this.collectionOptions&&(this.collectionOptions.collectionInsideObjectProperty||this.collectionOptions.collectionInObjectProperty)&&(e=ce(e,this.collectionOptions.collectionInsideObjectProperty||this.collectionOptions.collectionInObjectProperty));if(!Array.isArray(e))throw new Error('Something went wrong while trying to pull the collection from the "collectionAsync" call in the Select Filter, the collection is not a valid array.');this.columnFilter.collection=e,this.renderDomElement(e)},r.prototype.renderDomElement=function(e){!Array.isArray(e)&&this.collectionOptions&&(this.collectionOptions.collectionInsideObjectProperty||this.collectionOptions.collectionInObjectProperty)&&(e=ce(e,this.collectionOptions.collectionInsideObjectProperty||this.collectionOptions.collectionInObjectProperty));if(!Array.isArray(e))throw new Error('The "collection" passed to the Select Filter is not a valid array.');this.collectionOptions&&this.collectionOptions.addBlankEntry&&Array.isArray(e)&&e.length>0&&""!==e[0][this.labelName]&&e.unshift(this.createBlankEntry());var t=e;t=this.filterCollection(t),t=this.sortCollection(t);var i=this.buildTemplateHtmlString(t,this.searchTerms);this.createDomElement(i)},r.prototype.buildTemplateHtmlString=function(e,t){var i=this,r="",n=this.columnDef&&this.columnDef.id,o=this.collectionOptions&&this.collectionOptions.separatorBetweenTextLabels||"",s=this.gridOptions&&this.gridOptions.enableTranslate,a=this.columnFilter&&this.columnFilter.enableRenderHtml||!1,l=this.gridOptions&&this.gridOptions.sanitizeHtmlOptions||{};return Array.isArray(e)&&(e.every((function(e){return"string"==typeof e}))?e.forEach((function(e){var n=t.findIndex((function(t){return t===e}))>=0?"selected":"";r+='<option value="'+e+'" label="'+e+'" '+n+">"+e+"</option>",(n&&i.isMultipleSelect||n&&!i.isMultipleSelect&&""!==e)&&(i.isFilled=!0)})):e.forEach((function(e){if(!e||e[i.labelName]===undefined&&e.labelKey===undefined)throw new Error("[select-filter] A collection with value/label (or value/labelKey when using Locale) is required to populate the Select list, for example:: { filter: model: Filters.multipleSelect, collection: [ { value: '1', label: 'One' } ]')");var n=e.labelKey||e[i.labelName],d=t.findIndex((function(t){return t===e[i.valueName]}))>=0?"selected":"",c=(e.labelKey||i.enableTranslateLabel)&&n&&s?i.translate&&i.translate.currentLang&&i.translate.instant(n||" "):n,u=e[i.labelPrefixName]||"",h=e[i.labelSuffixName]||"",p=e.hasOwnProperty(i.optionLabel)?e[i.optionLabel]:"";p=p.toString().replace(/\"/g,"'"),u=i.enableTranslateLabel&&s&&u&&"string"==typeof u?i.translate&&i.translate.currentLang&&i.translate.instant(u||" "):u,h=i.enableTranslateLabel&&s&&h&&"string"==typeof h?i.translate&&i.translate.currentLang&&i.translate.instant(h||" "):h,p=i.enableTranslateLabel&&s&&p&&"string"==typeof p?i.translate&&i.translate.currentLang&&i.translate.instant(p||" "):p;var m=[u,"string"==typeof c||"number"==typeof c?c.toString():c,h].filter((function(e){return e})).join(o);a&&(m=re((ut.sanitize(m,l)||"").toString()));r+='<option value="'+e[i.valueName]+'" label="'+p+'" '+d+">"+m+"</option>",(d&&i.isMultipleSelect||d&&!i.isMultipleSelect&&""!==e[i.valueName])&&(i.isFilled=!0)}))),'<select class="ms-filter search-filter filter-'+n+'" '+(this.isMultipleSelect?'multiple="multiple"':"")+">"+r+"</select>"},r.prototype.createBlankEntry=function(){var e,t=((e={})[this.labelName]="",e[this.valueName]="",e);return this.labelPrefixName&&(t[this.labelPrefixName]=""),this.labelSuffixName&&(t[this.labelSuffixName]=""),t},r.prototype.createDomElement=function(e){var t=this.columnDef&&this.columnDef.id;this.elementName="filter-"+t,this.defaultOptions.name=this.elementName;var i=this.grid.getHeaderRowColumn(t);if($(i).empty(),this.$filterElm=$(e),"function"!=typeof this.$filterElm.multipleSelect)throw new Error('multiple-select.js was not found, make sure to modify your "angular-cli.json" file and include "../node_modules/angular-slickgrid/lib/multiple-select/multiple-select.js" and it\'s css or SASS file');this.$filterElm.attr("name",this.elementName),this.$filterElm.data("columnId",t),this.isFilled&&this.$filterElm.addClass("filled"),this.$filterElm&&"function"==typeof this.$filterElm.appendTo&&this.$filterElm.appendTo(i);var r=M({},this.defaultOptions,this.columnFilter.filterOptions);this.filterElmOptions=M({},this.defaultOptions,r),this.$filterElm=this.$filterElm.multipleSelect(this.filterElmOptions)},r.prototype.initMultipleSelect=function(){var e=this,t={autoAdjustDropHeight:!0,autoAdjustDropPosition:!0,autoAdjustDropWidthByTextSize:!0,container:"body",filter:!1,maxHeight:275,single:!0,textTemplate:function(t){return e.columnDef&&e.columnDef.filter&&e.columnDef.filter.enableRenderHtml||!1?t.text():t.html()},onClose:function(){e.onTriggerEvent(undefined)}};this.isMultipleSelect&&(t.single=!1,t.okButton=!0,t.addTitle=!0,t.countSelected=this.translate&&this.translate.currentLang&&this.translate.instant&&this.translate.instant("X_OF_Y_SELECTED")||this._locales&&this._locales.TEXT_X_OF_Y_SELECTED,t.allSelected=this.translate&&this.translate.currentLang&&this.translate.instant&&this.translate.instant("ALL_SELECTED")||this._locales&&this._locales.TEXT_ALL_SELECTED,t.okButtonText=this.translate&&this.translate.currentLang&&this.translate.instant&&this.translate.instant("OK")||this._locales&&this._locales.TEXT_OK,t.selectAllText=this.translate&&this.translate.currentLang&&this.translate.instant&&this.translate.instant("SELECT_ALL")||this._locales&&this._locales.TEXT_SELECT_ALL,t.selectAllDelimiter=["",""]),this.defaultOptions=t},r.prototype.onTriggerEvent=function(e){var t=this.getValues();Array.isArray(t)&&t.length>1||1===t.length&&""!==t[0]?(this.isFilled=!0,this.$filterElm.addClass("filled").siblings("div .search-filter").addClass("filled")):(this.isFilled=!1,this.$filterElm.removeClass("filled"),this.$filterElm.siblings("div .search-filter").removeClass("filled")),this.searchTerms=t,this.callback(undefined,{columnDef:this.columnDef,operator:this.operator,searchTerms:t,shouldTriggerQuery:this._shouldTriggerQuery}),this._shouldTriggerQuery=!0},r=N([R(0,t.Optional()),V("design:paramtypes",[n.TranslateService,Ie,Object])],r)}(),pt=function(e){function t(t,i){var r=e.call(this,t,i,!0)||this;return r.translate=t,r.collectionService=i,r}return _(t,e),t}(ht),mt=function(){function i(e){this.translate=e,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this._currentValues=[]}return Object.defineProperty(i.prototype,"columnFilter",{get:function(){return this.columnDef&&this.columnDef.filter},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"defaultOperator",{get:function(){return e.OperatorType.equal},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gridOptions",{get:function(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"operator",{get:function(){return this.columnFilter&&this.columnFilter.operator||this.defaultOperator},set:function(e){this.columnFilter&&(this.columnFilter.operator=e)},enumerable:!0,configurable:!0}),i.prototype.init=function(e){var t=this;if(!e)throw new Error('[Angular-SlickGrid] A filter must always have an "init()" with valid arguments.');if(this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],!(this.grid&&this.columnDef&&this.columnFilter&&this.columnFilter.collection))throw new Error('[Angular-SlickGrid] You need to pass a "collection" for the Native Select Filter to work correctly.');if(this.columnFilter.enableTranslateLabel&&!this.gridOptions.enableTranslate&&(!this.translate||"function"!=typeof this.translate.instant))throw new Error('The ngx-translate TranslateService is required for the Native Select Filter to work correctly when "enableTranslateLabel" is set.');var i=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";"boolean"!=typeof i&&"number"!=typeof i||(i=""+i);var r=this.buildTemplateHtmlString();this.$filterElm=this.createDomElement(r,i),this.$filterElm.change((function(e){var i=e&&e.target&&e.target.value||"";t._currentValues=[i],t._clearFilterTriggered?(t.callback(e,{columnDef:t.columnDef,clearFilterTriggered:t._clearFilterTriggered,shouldTriggerQuery:t._shouldTriggerQuery}),t.$filterElm.removeClass("filled")):(""===i?t.$filterElm.removeClass("filled"):t.$filterElm.addClass("filled"),t.callback(e,{columnDef:t.columnDef,operator:t.operator,searchTerms:[i],shouldTriggerQuery:t._shouldTriggerQuery})),t._clearFilterTriggered=!1,t._shouldTriggerQuery=!0}))},i.prototype.clear=function(e){void 0===e&&(e=!0),this.$filterElm&&(this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[],this._currentValues=[],this.$filterElm.val(""),this.$filterElm.trigger("change"))},i.prototype.destroy=function(){this.$filterElm&&this.$filterElm.off("change").remove()},i.prototype.getValues=function(){return this._currentValues},i.prototype.setValues=function(e,t){Array.isArray(e)?(this.$filterElm.val(e[0]),this._currentValues=e):e&&(this.$filterElm.val(e),this._currentValues=[e]),this.operator=t||this.defaultOperator},i.prototype.buildTemplateHtmlString=function(){var e=this,t=this.columnFilter&&this.columnFilter.collection||[];if(!Array.isArray(t))throw new Error('The "collection" passed to the Native Select Filter is not a valid array.');var i=this.columnDef&&this.columnDef.id,r=this.columnDef.filter.customStructure?this.columnDef.filter.customStructure.label:"label",n=this.columnDef.filter.customStructure?this.columnDef.filter.customStructure.value:"value",o="";return t.every((function(e){return"string"==typeof e}))?t.forEach((function(e){o+='<option value="'+e+'" label="'+e+'">'+e+"</option>"})):t.forEach((function(t){if(!t||t[r]===undefined&&t.labelKey===undefined)throw new Error("A collection with value/label (or value/labelKey when using Locale) is required to populate the Native Select Filter list, for example:: { filter: model: Filters.select, collection: [ { value: '1', label: 'One' } ]')");var i=t.labelKey||t[r],s=(t.labelKey||e.columnDef.filter.enableTranslateLabel)&&e.translate&&e.translate.currentLang&&e.translate.instant?e.translate.instant(i||" "):i;o+='<option value="'+t[n]+'">'+s+"</option>"})),'<select class="form-control search-filter filter-'+i+'">'+o+"</select>"},i.prototype.createDomElement=function(e,t){var i=this.columnDef&&this.columnDef.id,r=this.grid.getHeaderRowColumn(i);$(r).empty();var n=$(e),o=t||"";return n.val(o),n.data("columnId",i),o&&(this._currentValues=[o]),n&&"function"==typeof n.appendTo&&n.appendTo(r),n},i=N([R(0,t.Optional()),V("design:paramtypes",[n.TranslateService])],i)}(),ft=o;require("flatpickr");var gt,yt,vt=function(){function i(e){this.translate=e,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}return Object.defineProperty(i.prototype,"gridOptions",{get:function(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"columnFilter",{get:function(){return this.columnDef&&this.columnDef.filter||{}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentDates",{get:function(){return this._currentDates},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"defaultOperator",{get:function(){return this.gridOptions.defaultFilterRangeOperator||e.OperatorType.rangeExclusive},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"flatpickrOptions",{get:function(){return this._flatpickrOptions||{}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"operator",{get:function(){return this.columnFilter&&this.columnFilter.operator||this.defaultOperator},set:function(e){this.columnFilter&&(this.columnFilter.operator=e)},enumerable:!0,configurable:!0}),i.prototype.init=function(e){var t=this;if(!e)throw new Error('[Angular-SlickGrid] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this.$filterElm=this.createDomElement(this.searchTerms),this.$filterInputElm.keyup((function(e){t.onTriggerEvent(e)}))},i.prototype.clear=function(e){void 0===e&&(e=!0),this.flatInstance&&(this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[],this.flatInstance.clear())},i.prototype.destroy=function(){this.$filterElm&&this.$filterElm.off("keyup").remove(),this.flatInstance&&"function"==typeof this.flatInstance.destroy&&this.flatInstance.destroy()},i.prototype.hide=function(){this.flatInstance&&"function"==typeof this.flatInstance.close&&this.flatInstance.close()},i.prototype.show=function(){this.flatInstance&&"function"==typeof this.flatInstance.open&&this.flatInstance.open()},i.prototype.setValues=function(e,t){var i=[];"string"==typeof e||Array.isArray(e)&&"string"==typeof e[0]&&e[0].indexOf("..")>0?i="string"==typeof e?[e]:e[0].split(".."):Array.isArray(e)&&(i=e),this.flatInstance&&e&&(this._currentDates=i,this.flatInstance.setDate(i)),this.operator=t||this.defaultOperator},i.prototype.buildDatePickerInput=function(t){var i=this,r=this.columnDef&&this.columnDef.id,n=pe(this.columnDef.type||e.FieldType.dateIso),o=pe(this.columnDef.outputType||this.columnDef.type||e.FieldType.dateUtc),s=this.columnFilter&&this.columnFilter.filterOptions||{},a=s&&s.locale||this.translate&&this.translate.currentLang||this.gridOptions.locale||"en";a.length>2&&(a=a.substring(0,2));var l=[];if("string"==typeof t||Array.isArray(t)&&"string"==typeof t[0]&&t[0].indexOf("..")>0?l="string"==typeof t?[t]:t[0].split(".."):Array.isArray(t)&&(l=t),l){this._currentDates=l;var d=he(this.columnDef.type||e.FieldType.dateIso);this._currentDateStrings=l.map((function(e){return ft(e).format(d)}))}var c={defaultDate:l||"",altInput:!0,altFormat:o,dateFormat:n,mode:"range",wrap:!0,closeOnSelect:!0,locale:"en"!==a?this.loadFlatpickrLocale(a):"en",onChange:function(t,r,n){if(Array.isArray(t)){i._currentDates=t;var o=he(i.columnDef.outputType||i.columnDef.type||e.FieldType.dateIso);i._currentDateStrings=t.map((function(e){return ft(e).format(o)})),i._currentValue=i._currentDateStrings.join("..")}var s=c.enableTime?new CustomEvent("keyup"):undefined;i.onTriggerEvent(s)}};o&&("Z"===o||o.toLowerCase().includes("h"))&&(c.enableTime=!0),this._flatpickrOptions=M({},c,s);var u=this.gridOptions&&this.gridOptions.defaultFilterPlaceholder||"";this.columnFilter&&this.columnFilter.placeholder&&(u=this.columnFilter.placeholder);var p=$('<div class="flatpickr search-filter filter-'+r+'"><input type="text" class="form-control" data-input placeholder="'+u+'"></div>');return this.flatInstance=p[0]&&"function"==typeof p[0].flatpickr?p[0].flatpickr(this._flatpickrOptions):h(p,this._flatpickrOptions),p},i.prototype.createDomElement=function(e){var t=this.columnDef&&this.columnDef.id,i=this.grid.getHeaderRowColumn(t);return $(i).empty(),this.$filterInputElm=this.buildDatePickerInput(e),this.$filterInputElm.data("columnId",t),Array.isArray(e)&&e.length>0&&""!==e[0]&&(this.$filterInputElm.addClass("filled"),this._currentDates=e,this._currentValue=e[0]),this.$filterInputElm&&"function"==typeof this.$filterInputElm.appendTo&&this.$filterInputElm.appendTo(i),this.$filterInputElm},i.prototype.loadFlatpickrLocale=function(e){var t="en";try{if("en"!==e){var i=require("flatpickr/dist/l10n/"+e+".js")["default"];t=i&&i[e]?i[e]:"en"}}catch(r){return console.warn('[Angular-Slickgrid - DateRange Filter] It seems that "'+e+'" is not a locale supported by Flatpickr, we will use "en" instead. To avoid seeing this message, you can specifically set "filter: { filterOptions: { locale: \'en\' } }" in your column definition.'),"en"}return t},i.prototype.onTriggerEvent=function(e){this._clearFilterTriggered?(this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,shouldTriggerQuery:this._shouldTriggerQuery}),this.$filterElm.removeClass("filled")):(this._currentDateStrings?this.$filterElm.addClass("filled"):this.$filterElm.removeClass("filled"),this.callback(e,{columnDef:this.columnDef,searchTerms:this._currentDateStrings?this._currentDateStrings:[this._currentValue],operator:this.operator||"",shouldTriggerQuery:this._shouldTriggerQuery})),this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0},i=N([R(0,t.Optional()),V("design:paramtypes",[n.TranslateService])],i)}(),bt=function(e){function t(t,i){var r=e.call(this,t,i,!1)||this;return r.translate=t,r.collectionService=i,r}return _(t,e),t}(ht),St=function(){function t(){this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}return Object.defineProperty(t.prototype,"columnFilter",{get:function(){return this.columnDef&&this.columnDef.filter||{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultOperator",{get:function(){return e.OperatorType.equal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filterParams",{get:function(){return this.columnDef&&this.columnDef.filter&&this.columnDef.filter.params||{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filterProperties",{get:function(){return this.columnDef&&this.columnDef.filter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"operator",{get:function(){return this.columnFilter&&this.columnFilter.operator||this.defaultOperator},set:function(e){this.columnFilter&&(this.columnFilter.operator=e)},enumerable:!0,configurable:!0}),t.prototype.init=function(e){var t=this;if(!e)throw new Error('[Angular-SlickGrid] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this._elementRangeInputId="rangeInput_"+this.columnDef.field,this._elementRangeOutputId="rangeOutput_"+this.columnDef.field;var i=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"",r=this.buildTemplateHtmlString();this.$filterElm=this.createDomElement(r,i),this.$filterElm.change((function(e){var i=e&&e.target&&e.target.value;t._currentValue=+i,t._clearFilterTriggered?(t.$filterElm.removeClass("filled"),t.callback(e,{columnDef:t.columnDef,clearFilterTriggered:t._clearFilterTriggered,searchTerms:[],shouldTriggerQuery:t._shouldTriggerQuery})):(t.$filterElm.addClass("filled"),t.callback(e,{columnDef:t.columnDef,operator:t.operator,searchTerms:[i||"0"],shouldTriggerQuery:t._shouldTriggerQuery})),t._clearFilterTriggered=!1,t._shouldTriggerQuery=!0})),this.filterParams.hideSliderNumber||this.$filterElm.on("input change",(function(e){var i=e&&e.target&&e.target.value;if(i!==undefined&&null!==i){var r=document.getElementsByClassName(t._elementRangeOutputId);r.length&&(r[0].innerHTML=i)}}))},t.prototype.clear=function(e){if(void 0===e&&(e=!0),this.$filterElm){this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[];var t=this.filterParams.hasOwnProperty("sliderStartValue")?this.filterParams.sliderStartValue:0;this._currentValue=+t,this.$filterElm.children("input").val(t),this.$filterElm.children("div.input-group-addon.input-group-append").children().html(t),this.$filterElm.val(t),this.$filterElm.trigger("change")}},t.prototype.destroy=function(){this.$filterElm&&this.$filterElm.off("change").remove()},t.prototype.getValues=function(){return this._currentValue},t.prototype.setValues=function(e,t){Array.isArray(e)?(this.$filterElm.val(e[0]),this._currentValue=+e[0]):e&&(this.$filterElm.val(e),this._currentValue=+e),this.operator=t||this.defaultOperator},t.prototype.buildTemplateHtmlString=function(){var e=this.columnDef&&this.columnDef.id,t=this.filterProperties.hasOwnProperty("minValue")?this.filterProperties.minValue:0,i=this.filterProperties.hasOwnProperty("maxValue")?this.filterProperties.maxValue:100,r=this.filterParams.hasOwnProperty("sliderStartValue")?this.filterParams.sliderStartValue:t,n=this.filterProperties.hasOwnProperty("valueStep")?this.filterProperties.valueStep:1;return this.filterParams.hideSliderNumber?'\n      <div class="search-filter slider-container filter-'+e+'">\n        <input type="range" name="'+this._elementRangeInputId+'"\n          defaultValue="'+r+'" value="'+r+'"\n          min="'+t+'" max="'+i+'" step="'+n+'"\n          class="form-control slider-filter-input range '+this._elementRangeInputId+'" />\n      </div>':'\n      <div class="input-group slider-container search-filter filter-'+e+'">\n        <input type="range" name="'+this._elementRangeInputId+'"\n          defaultValue="'+r+'" value="'+r+'"\n          min="'+t+'" max="'+i+'" step="'+n+'"\n          class="form-control slider-filter-input range '+this._elementRangeInputId+'" />\n        <div class="input-group-addon input-group-append slider-value">\n          <span class="input-group-text '+this._elementRangeOutputId+'">'+r+"</span>\n        </div>\n      </div>"},t.prototype.createDomElement=function(e,t){var i=this.columnDef&&this.columnDef.id,r=this.filterProperties.hasOwnProperty("minValue")?this.filterProperties.minValue:0,n=this.filterParams.hasOwnProperty("sliderStartValue")?this.filterParams.sliderStartValue:r,o=this.grid.getHeaderRowColumn(i);$(o).empty();var s=$(e),a=t||"0";return+a<r&&(a=""+r),+a<n&&(a=""+n),this._currentValue=+a,s.children("input").val(a),s.children("div.input-group-addon.input-group-append").children().html(a),s.data("columnId",i),t&&s.addClass("filled"),s&&"function"==typeof s.appendTo&&s.appendTo(o),s},t}(),_t=function(){function t(){this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}return Object.defineProperty(t.prototype,"filterParams",{get:function(){return this.columnDef&&this.columnDef.filter&&this.columnDef.filter.params||{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filterProperties",{get:function(){return this.columnDef&&this.columnDef.filter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnFilter",{get:function(){return this.columnDef&&this.columnDef.filter||{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentValues",{get:function(){return this._currentValues},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultOperator",{get:function(){return this.gridOptions.defaultFilterRangeOperator||e.OperatorType.rangeExclusive},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gridOptions",{get:function(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sliderOptions",{get:function(){return this._sliderOptions||{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"operator",{get:function(){return this.columnFilter&&this.columnFilter.operator||this.defaultOperator},set:function(e){this.columnFilter&&(this.columnFilter.operator=e)},enumerable:!0,configurable:!0}),t.prototype.init=function(e){if(!e)throw new Error('[Angular-SlickGrid] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this.$filterElm=this.createDomElement(this.searchTerms)},t.prototype.clear=function(e){if(void 0===e&&(e=!0),this.$filterElm){this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[];var t=this.filterParams.hasOwnProperty("sliderStartValue")?this.filterParams.sliderStartValue:0,i=this.filterParams.hasOwnProperty("sliderEndValue")?this.filterParams.sliderEndValue:100;this._currentValues=[t,i],this.$filterElm.slider("values",[t,i]),this.filterParams.hideSliderNumbers||this.renderSliderValues(t,i),this.callback(null,{columnDef:this.columnDef,clearFilterTriggered:!0,shouldTriggerQuery:e}),this.$filterContainerElm.removeClass("filled")}},t.prototype.destroy=function(){this.$filterElm&&this.$filterElm.off("change").remove()},t.prototype.renderSliderValues=function(e,t){var i=this.columnDef&&this.columnDef.id,r=document.querySelector(".lowest-range-"+i),n=document.querySelector(".highest-range-"+i);r&&r.innerHTML&&(r.innerHTML=e.toString()),n&&n.innerHTML&&(n.innerHTML=t.toString())},t.prototype.setValues=function(e,t){if(e){var i=[];"string"==typeof e||Array.isArray(e)&&"string"==typeof e[0]&&e[0].indexOf("..")>0?i="string"==typeof e?[e]:e[0].split(".."):Array.isArray(e)&&(i=e),Array.isArray(i)&&2===i.length&&(this.$filterElm.slider("values",i),this.filterParams.hideSliderNumbers||this.renderSliderValues(i[0],i[1]))}this.operator=t||this.defaultOperator},t.prototype.createDomElement=function(e){var t=this;if(this.columnFilter&&this.columnFilter.filterOptions&&(this.columnFilter.filterOptions.change||this.columnFilter.filterOptions.slide))throw new Error('[Angular-Slickgrid] You cannot override the "change" and/or the "slide" callback methods\n        since they are used in SliderRange Filter itself, however any other methods can be used for example the "create", "start", "stop" methods.');var i=this.columnDef&&this.columnDef.id,r=this.grid.getHeaderRowColumn(i),n=this.filterProperties.hasOwnProperty("minValue")?this.filterProperties.minValue:0,o=this.filterProperties.hasOwnProperty("maxValue")?this.filterProperties.maxValue:100,s=this.filterProperties.hasOwnProperty("valueStep")?this.filterProperties.valueStep:1,a=0,l=100;Array.isArray(e)&&e.length>1?(a=+e[0],l=+e[1]):(a=+(this.filterParams.hasOwnProperty("sliderStartValue")?this.filterParams.sliderStartValue:n),l=+(this.filterParams.hasOwnProperty("sliderEndValue")?this.filterParams.sliderEndValue:o)),$(r).empty();var d=$('\n    <div class="input-group-addon input-group-prepend slider-range-value">\n      <span class="input-group-text lowest-range-'+i+'">'+a+"</span>\n    </div>"),c=$('\n    <div class="input-group-addon input-group-append slider-range-value">\n      <span class="input-group-text highest-range-'+i+'">'+l+"</span>\n    </div>");this.$filterElm=$('<div class="filter-input filter-'+i+'"></div>'),this.$filterContainerElm=$('<div class="input-group form-control search-filter slider-range-container slider-values filter-'+i+'">'),this.filterParams.hideSliderNumbers?this.$filterContainerElm.append(this.$filterElm):(this.$filterContainerElm.append(d),this.$filterContainerElm.append(this.$filterElm),this.$filterContainerElm.append(c)),this._currentValues=[a,l];var u={range:!0,min:+n,max:+o,step:+s,values:[a,l],change:function(e,i){return t.onValueChanged(e,i)},slide:function(e,i){var r=i.values;!t.filterParams.hideSliderNumbers&&Array.isArray(r)&&t.renderSliderValues(r[0],r[1])}};return this._sliderOptions=M({},u,this.columnFilter.filterOptions),this.$filterElm.slider(this._sliderOptions),Array.isArray(e)&&e.length>0&&""!==e[0]&&this.$filterContainerElm.addClass("filled"),this.$filterContainerElm&&"function"==typeof this.$filterContainerElm.appendTo&&this.$filterContainerElm.appendTo(r),this.$filterElm},t.prototype.onValueChanged=function(e,t){var i=t&&Array.isArray(t.values)?t.values:[],r=i.join("..");this._clearFilterTriggered?(this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,shouldTriggerQuery:this._shouldTriggerQuery}),this.$filterContainerElm.removeClass("filled")):(""===r?this.$filterContainerElm.removeClass("filled"):this.$filterContainerElm.addClass("filled"),this.callback(e,{columnDef:this.columnDef,operator:this.operator,searchTerms:i,shouldTriggerQuery:this._shouldTriggerQuery})),this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0},t}(),Ot={autoComplete:tt,compoundDate:it,compoundInput:rt,compoundInputNumber:nt,compoundInputPassword:ot,compoundInputText:rt,compoundSlider:st,dateRange:vt,input:at,inputMask:lt,inputNumber:dt,inputPassword:ct,inputText:at,multipleSelect:pt,select:mt,singleSelect:bt,slider:St,sliderRange:_t},Tt={alwaysShowVerticalScroll:!0,autoEdit:!1,asyncEditorLoading:!1,autoFitColumnsOnFirstLoad:!0,autoResize:{calculateAvailableSizeBy:"window",bottomPadding:20,minHeight:180,minWidth:300,sidePadding:0},cellHighlightCssClass:"slick-cell-modified",checkboxSelector:{cssClass:"slick-cell-checkboxsel"},columnPicker:{fadeSpeed:0,hideForceFitButton:!1,hideSyncResizeButton:!0},cellMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideCommandSection:!1,hideOptionSection:!1},contextMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideClearAllGrouping:!1,hideCollapseAllGroups:!1,hideCommandSection:!1,hideCopyCellValueCommand:!1,hideExpandAllGroups:!1,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideMenuOnScroll:!0,hideOptionSection:!1,iconCopyCellValueCommand:"fa fa-clone",iconExportCsvCommand:"fa fa-download",iconExportExcelCommand:"fa fa-file-excel-o text-success",iconExportTextDelimitedCommand:"fa fa-download",width:200},customFooterOptions:{dateFormat:"yyyy-MM-dd hh:mm aaaaa'm'",hideTotalItemCount:!1,hideLastUpdateTimestamp:!0,footerHeight:20,leftContainerClass:"col-xs-12 col-sm-5",rightContainerClass:"col-xs-6 col-sm-7",metricSeparator:"|",metricTexts:{items:"items",of:"of",itemsKey:"ITEMS",ofKey:"OF"}},dataView:{syncGridSelection:!0,syncGridSelectionWithBackendService:!1},datasetIdPropertyName:"id",defaultFilter:Ot.input,enableFilterTrimWhiteSpace:!1,defaultFilterPlaceholder:"&#128269;",defaultFilterRangeOperator:e.OperatorType.rangeExclusive,editable:!1,enableAutoResize:!0,enableAutoSizeColumns:!0,enableCellNavigation:!1,enableColumnPicker:!0,enableColumnReorder:!0,enableContextMenu:!0,enableExcelExport:!0,enableExport:!1,enableGridMenu:!0,enableHeaderMenu:!0,enableMouseHoverHighlightRow:!0,enableSorting:!0,enableTextSelectionOnCells:!0,explicitInitialization:!0,excelExportOptions:{addGroupIndentation:!0,exportWithFormatter:!1,filename:"export",format:e.FileType.xlsx,groupingColumnHeaderTitle:"Group By",groupCollapsedSymbol:"▹",groupExpandedSymbol:"▿",groupingAggregatorRowText:"",sanitizeDataExport:!1},exportOptions:{delimiter:e.DelimiterType.comma,exportWithFormatter:!1,filename:"export",format:e.FileType.csv,groupingColumnHeaderTitle:"Group By",groupingAggregatorRowText:"",sanitizeDataExport:!1,useUtf8WithBom:!0},forceFitColumns:!1,gridMenu:{hideClearAllFiltersCommand:!1,hideClearAllSortingCommand:!1,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideForceFitButton:!1,hideRefreshDatasetCommand:!1,hideSyncResizeButton:!0,hideToggleFilterCommand:!1,hideTogglePreHeaderCommand:!1,iconCssClass:"fa fa-bars",iconClearAllFiltersCommand:"fa fa-filter text-danger",iconClearAllSortingCommand:"fa fa-unsorted text-danger",iconExportCsvCommand:"fa fa-download",iconExportExcelCommand:"fa fa-file-excel-o text-success",iconExportTextDelimitedCommand:"fa fa-download",iconRefreshDatasetCommand:"fa fa-refresh",iconToggleFilterCommand:"fa fa-random",iconTogglePreHeaderCommand:"fa fa-random",menuWidth:16,resizeOnShowHeaderRow:!0},headerMenu:{autoAlign:!0,autoAlignOffset:12,minWidth:140,iconClearFilterCommand:"fa fa-filter text-danger",iconClearSortCommand:"fa fa-unsorted",iconSortAscCommand:"fa fa-sort-amount-asc",iconSortDescCommand:"fa fa-sort-amount-desc",iconColumnHideCommand:"fa fa-times",hideColumnHideCommand:!1,hideClearFilterCommand:!1,hideClearSortCommand:!1,hideSortCommands:!1},headerRowHeight:35,multiColumnSort:!0,numberedMultiColumnSort:!0,tristateMultiColumnSort:!1,sortColNumberInSeparateSpan:!0,suppressActiveCellChangeOnEdit:!0,pagination:{pageSizes:[10,15,20,25,30,40,50,75,100],pageSize:25,totalItems:0},rowDetailView:{cssClass:"detail-view-toggle",panelRows:1,keyPrefix:"__",useRowClick:!0,useSimpleViewportCalc:!0,saveDetailViewOnScroll:!1},rowHeight:35,topPanelHeight:35},Et=function(){this.options=Tt},Ct=function(){function e(e,t,i){this.config=e,this.translate=t,this.collectionService=i,this._options=this.config.options}return e.prototype.createFilter=function(e){var t;return e&&e.model&&(t="function"==typeof e.model?new e.model(this.translate,this.collectionService):e.model),!t&&this._options.defaultFilter&&(t=new this._options.defaultFilter(this.translate,this.collectionService)),t},e=N([t.Injectable(),R(1,t.Optional()),V("design:paramtypes",[Et,n.TranslateService,Ie])],e)}(),wt=u,xt=function(){function r(e,t){this.filterFactory=e,this.sharedService=t,this._isFilterFirstRender=!0,this._firstColumnIdRendered="",this._filtersMetadata=[],this._columnFilters={},this.httpCancelRequests$=new i.Subject,this.onFilterChanged=new i.Subject,this.onFilterCleared=new i.Subject,this._eventHandler=new Slick.EventHandler,this._onSearchChange=new Slick.Event}return Object.defineProperty(r.prototype,"eventHandler",{get:function(){return this._eventHandler},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isFilterFirstRender",{get:function(){return this._isFilterFirstRender},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"onSearchChange",{get:function(){return this._onSearchChange},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"_gridOptions",{get:function(){return this._grid&&this._grid.getOptions?this._grid.getOptions():{}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"_columnDefinitions",{get:function(){return this._grid&&this._grid.getColumns?this._grid.getColumns():[]},enumerable:!0,configurable:!0}),r.prototype.init=function(e){this._grid=e},r.prototype.dispose=function(){this.disposeColumnFilters(),this._eventHandler&&this._eventHandler.unsubscribeAll&&this._eventHandler.unsubscribeAll(),i.isObservable(this.httpCancelRequests$)&&this.httpCancelRequests$.next()},r.prototype.disposeColumnFilters=function(){if("object"==typeof this._columnFilters)for(var e in this._columnFilters)e&&this._columnFilters[e]&&delete this._columnFilters[e];Array.isArray(this._filtersMetadata)&&this._filtersMetadata.forEach((function(e){e&&e.destroy&&e.destroy(!0)}))},r.prototype.bindBackendOnFilter=function(e,t){var i=this;this._dataView=t,this._filtersMetadata=[],this._eventHandler.subscribe(e.onHeaderRowCellRendered,(function(e,t){t.column.id===i._firstColumnIdRendered&&(i._isFilterFirstRender=!1),i.addFilterTemplateToHeaderRow(t,i._isFilterFirstRender),""===i._firstColumnIdRendered&&(i._firstColumnIdRendered=t.column.id)})),this._eventHandler.subscribe(this._onSearchChange,this.onBackendFilterChange.bind(this))},r.prototype.bindLocalOnFilter=function(t,i){var r=this;this._filtersMetadata=[],this._dataView=i,i.setFilterArgs({columnFilters:this._columnFilters,grid:this._grid,dataView:i}),i.setFilter(this.customLocalFilter.bind(this)),this._eventHandler.subscribe(this._onSearchChange,(function(t,n){null!=n.columnId&&i.refresh(),n&&!n.clearFilterTriggered&&r.emitFilterChanged(e.EmitterType.local)})),this._eventHandler.subscribe(t.onHeaderRowCellRendered,(function(e,t){r.addFilterTemplateToHeaderRow(t)}))},r.prototype.clearFilterByColumnId=function(t,i){var r,n=Object.keys(this._columnFilters);Array.isArray(n)&&(r=n.find((function(e){return e===i})));var o=this._filtersMetadata.find((function(e){return e.columnDef.id===i}));o&&o.clear&&o.clear(!0);var s=e.EmitterType.local;(this._gridOptions&&this._gridOptions.backendServiceApi||!1)&&(s=e.EmitterType.remote,r&&this.onBackendFilterChange(t,{grid:this._grid,columnFilters:this._columnFilters})),this.emitFilterChanged(s)},r.prototype.clearFilters=function(e){var t=this;void 0===e&&(e=!0),this._filtersMetadata.forEach((function(e){e&&e.clear&&e.clear(!1)})),this._dataView&&this._grid&&(this._dataView.refresh(),this._grid.invalidate());var i=this._gridOptions&&this._gridOptions.backendServiceApi;if(i&&e){var r={clearFilterTriggered:!0,shouldTriggerQuery:e,grid:this._grid,columnFilters:this._columnFilters},n=i.service.processOnFilterChanged(undefined,r);if(n instanceof Promise&&n.then)console.warn('[Angular-Slickgrid] please note that the "processOnFilterChanged" from your Backend Service, should now return a string instead of a Promise.\n          Returning a Promise will be deprecated in the future.'),n.then((function(e){var n=t._gridOptions&&t._gridOptions.pagination&&t._gridOptions.pagination.totalItems;Q(i,e,r,new Date,n,t.emitFilterChanged.bind(t))}));else{var o=n,s=this._gridOptions&&this._gridOptions.pagination&&this._gridOptions.pagination.totalItems;Q(i,o,r,new Date,s,this.emitFilterChanged.bind(this))}}e&&this.onFilterCleared.next(!0)},r.prototype.customLocalFilter=function(t,i){var r,n,o=i&&i.dataView,s=function(r){var n=i.columnFilters[r],s=i.grid.getColumnIndex(r),l=i.grid.getColumns()[s];if(!l&&a.sharedService&&Array.isArray(a.sharedService.allColumns)&&(s=a.sharedService.allColumns.findIndex((function(e){return e.field===r})),l=a.sharedService.allColumns[s]),!l)return{value:!0};if(a._gridOptions.enableRowDetailView){var d=a._gridOptions.rowDetailView&&a._gridOptions.rowDetailView.keyPrefix||"__";t[d+"isPadding"]&&t[d+"parent"]&&(t=t[d+"parent"])}var c=l.dataKey,u=l.queryFieldFilter||l.queryField||l.field,h=l.type||e.FieldType.string,p=l.filterSearchType?l.filterSearchType:null,m=t[u];u.indexOf(".")>=0&&(m=ce(t,u));var f=n&&n.searchTerms?$.extend(!0,[],n.searchTerms):null,g=Array.isArray(f)&&1===f.length?f[0]:"",y=null;h!==e.FieldType.object&&(y=(g=""+g).match(/^([<>!=\*]{0,2})(.*[^<>!=\*])([\*]?)$/));var v=n.operator||(y?y[1]:""),b=y?y[2]:"",S=y?y[3]:"*z"===v?"*":"";if(f&&f.length>1?g=f.join(","):"string"==typeof g&&(g=g.replace("'","''"),"*"!==v&&"a*"!==v&&"*z"!==v&&"*"!==S||(v="*"===v||"*z"===v?e.OperatorType.endsWith:e.OperatorType.startsWith)),""===b&&(!f||Array.isArray(f)&&0===f.length))return{value:!0};if(Array.isArray(y)&&y.length>=1&&Array.isArray(f)&&1===f.length&&(f[0]=b),f&&Array.isArray(f)&&h!==e.FieldType.object)for(var _=0,O=f.length;_<O;_++)f[_]=(f[_]===undefined||null===f[_]?"":f[_])+"";if(l&&l.params&&l.params.useFormatterOuputToFilter){var T=o&&"function"==typeof o.getIdxById?o.getIdxById(t.id):0;m=l.formatter(T,s,m,l,t,a._grid)}return"number"==typeof m&&(m=m.toString()),et.executeMappedCondition({dataKey:c,fieldType:h,searchTerms:f,cellValue:m,operator:v,cellValueLastChar:S,filterSearchType:p})?void 0:{value:!1}},a=this;try{for(var l=j(Object.keys(i.columnFilters)),d=l.next();!d.done;d=l.next()){var c=s(d.value);if("object"==typeof c)return c.value}}catch(u){r={error:u}}finally{try{d&&!d.done&&(n=l["return"])&&n.call(l)}finally{if(r)throw r.error}}return!0},r.prototype.getColumnFilters=function(){return this._columnFilters},r.prototype.getFiltersMetadata=function(){return this._filtersMetadata},r.prototype.getCurrentLocalFilters=function(){var e,t,i=[];if(this._columnFilters)try{for(var r=j(Object.keys(this._columnFilters)),n=r.next();!n.done;n=r.next()){var o=n.value,s=this._columnFilters[o],a={columnId:o||""};s&&s.searchTerms&&(a.searchTerms=s.searchTerms),s.operator&&(a.operator=s.operator),Array.isArray(a.searchTerms)&&a.searchTerms.length>0&&""!==a.searchTerms[0]&&i.push(a)}}catch(l){e={error:l}}finally{try{n&&!n.done&&(t=r["return"])&&t.call(r)}finally{if(e)throw e.error}}return i},r.prototype.emitFilterChanged=function(t){if(t===e.EmitterType.remote&&this._gridOptions&&this._gridOptions.backendServiceApi){var i=[],r=this._gridOptions.backendServiceApi.service;r&&r.getCurrentFilters&&(i=r.getCurrentFilters()),this.onFilterChanged.next(i)}else t===e.EmitterType.local&&this.onFilterChanged.next(this.getCurrentLocalFilters())},r.prototype.onBackendFilterChange=function(t,i){return G(this,void 0,void 0,(function(){var r,n,o,s,a,l,d,c,u=this;return L(this,(function(h){switch(h.label){case 0:if(!i||!i.grid)throw new Error('Something went wrong when trying to bind the "onBackendFilterChange(event, args)" function, it seems that "args" is not populated correctly');if(!(r=this._gridOptions.backendServiceApi)||!r.process||!r.service)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');return n=new Date,r.preProcess&&r.preProcess(),o=0,s=i&&i.clearFilterTriggered,a=t&&t.type,l=t&&t.keyCode,s||l===e.KeyCode.ENTER||"input"!==a&&"keyup"!==a&&"keydown"!==a||(o=r.hasOwnProperty("filterTypingDebounce")?r.filterTypingDebounce:500),i&&i.shouldTriggerQuery?(clearTimeout(gt),o>0?(gt=setTimeout((function(){return G(u,void 0,void 0,(function(){var e,o;return L(this,(function(s){switch(s.label){case 0:return[4,r.service.processOnFilterChanged(t,i)];case 1:return e=s.sent(),o=this._gridOptions&&this._gridOptions.pagination&&this._gridOptions.pagination.totalItems,Q(r,e,i,n,o,this.emitFilterChanged.bind(this),this.httpCancelRequests$),[2]}}))}))}),o),[3,3]):[3,1]):[3,3];case 1:return[4,r.service.processOnFilterChanged(t,i)];case 2:d=h.sent(),c=this._gridOptions&&this._gridOptions.pagination&&this._gridOptions.pagination.totalItems,Q(r,d,i,n,c,this.emitFilterChanged.bind(this),this.httpCancelRequests$),h.label=3;case 3:return[2]}}))}))},r.prototype.populateColumnFilterSearchTermPresets=function(e){return Array.isArray(e)&&e.length>0&&this._columnDefinitions.forEach((function(t){t.filter&&t.filter.searchTerms&&delete t.filter.searchTerms;var i=e.find((function(e){return e.columnId===t.id}));i&&i.searchTerms&&Array.isArray(i.searchTerms)&&(t.filter=t.filter||{},t.filter.operator=i.operator||t.filter.operator||"",t.filter.searchTerms=i.searchTerms)})),this._columnDefinitions},r.prototype.setSortColumnIcons=function(e){this._grid&&Array.isArray(e)&&this._grid.setSortColumns(e)},r.prototype.updateFilters=function(t,i,r){var n=this;if(void 0===i&&(i=!0),void 0===r&&(r=!0),!this._filtersMetadata||0===this._filtersMetadata.length||!this._gridOptions||!this._gridOptions.enableFiltering)throw new Error('[Angular-Slickgrid] in order to use "updateFilters" method, you need to have Filterable Columns defined in your grid and "enableFiltering" set in your Grid Options');if(Array.isArray(t)){this.clearFilters(!1),t.forEach((function(e){var t=n._filtersMetadata.find((function(t){return e.columnId===t.columnDef.id}));if(e&&t){var i=e.operator||t.defaultOperator;n.updateColumnFilters(e.searchTerms,t.columnDef,i),t.setValues(e.searchTerms,i)}}));var o=this._gridOptions&&this._gridOptions.backendServiceApi;if(this._dataView.refresh(),o){var s=o&&o.service;s&&(s.updateFilters(t,!0),r&&X(this._gridOptions))}if(i){var a=o?e.EmitterType.remote:e.EmitterType.local;this.emitFilterChanged(a)}}},r.prototype.addFilterTemplateToHeaderRow=function(e,t){void 0===t&&(t=!0);var i=e.column,r=i&&i.id||"";if(i&&"selector"!==r&&i.filterable){var n=void 0,o=void 0,s=this.filterFactory.createFilter(e.column.filter);o=i&&i.filter&&i.filter.operator||s&&s.operator||undefined,this._columnFilters[i.id]?(n=this._columnFilters[i.id].searchTerms||undefined,o=this._columnFilters[i.id].operator||undefined):i.filter&&(n=i.filter.searchTerms||undefined,this.updateColumnFilters(n,i,o));var a={grid:this._grid,operator:o,searchTerms:n,columnDef:i,callback:this.callbackSearchEvent.bind(this)};if(s){s.init(a,t);var l=this._filtersMetadata.findIndex((function(e){return s.columnDef.id===e.columnDef.id}));-1===l?this._filtersMetadata.push(s):this._filtersMetadata[l]=s,n&&s.setValues&&s.setValues(n)}}},r.prototype.callbackSearchEvent=function(t,i){if(i){var r=t&&t.target?t.target.value:undefined,n=i.searchTerms&&Array.isArray(i.searchTerms)?i.searchTerms:r?[r]:undefined,o=i.columnDef||null,s=o&&o.id||"",a=i.operator||undefined,l=n&&Array.isArray(n),d=l&&n&&n.length,c=M({},this._columnFilters);if(o&&s)if(!l||0===d||1===d&&Array.isArray(n)&&""===n[0])delete this._columnFilters[s];else{var u=""+s,h={columnId:u,columnDef:o,searchTerms:n};a&&(h.operator=a),this._columnFilters[u]=h}var p=t&&"function"!=typeof t.isPropagationStopped?$.extend({},new Slick.EventData,t):t;(t&&t.keyCode)!==e.KeyCode.ENTER&&wt(c,this._columnFilters)||this._onSearchChange.notify({clearFilterTriggered:i.clearFilterTriggered,shouldTriggerQuery:i.shouldTriggerQuery,columnId:s,columnDef:o,columnFilters:this._columnFilters,operator:a,searchTerms:n,grid:this._grid},p)}},r.prototype.updateColumnFilters=function(e,t,i){e&&t&&(this._columnFilters[t.id]={columnId:t.id,columnDef:t,searchTerms:e,operator:i})},r=N([t.Injectable(),V("design:paramtypes",[Ct,Ve])],r)}(),Pt=function(){function t(){this._currentLocalSorters=[],this._isBackendGrid=!1,this.httpCancelRequests$=new i.Subject,this.onSortChanged=new i.Subject,this.onSortCleared=new i.Subject,this._eventHandler=new Slick.EventHandler}return Object.defineProperty(t.prototype,"eventHandler",{get:function(){return this._eventHandler},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_gridOptions",{get:function(){return this._grid&&this._grid.getOptions?this._grid.getOptions():{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_columnDefinitions",{get:function(){return this._grid&&this._grid.getColumns?this._grid.getColumns():[]},enumerable:!0,configurable:!0}),t.prototype.bindBackendOnSort=function(e,t){this._isBackendGrid=!0,this._grid=e,this._dataView=t,this._eventHandler.subscribe(e.onSort,this.onBackendSortChanged.bind(this))},t.prototype.bindLocalOnSort=function(t,i){var r=this;this._isBackendGrid=!1,this._grid=t,this._dataView=i,this._eventHandler.subscribe(t.onSort,(function(n,o){if(o&&(o.sortCols||o.sortCol)){var s=o.multiColumnSort?o.sortCols:new Array({sortAsc:o.sortAsc,sortCol:o.sortCol});r._currentLocalSorters=[],Array.isArray(s)&&s.forEach((function(t){t.sortCol&&r._currentLocalSorters.push({columnId:t.sortCol.id,direction:t.sortAsc?e.SortDirection.ASC:e.SortDirection.DESC})})),r.onLocalSortChanged(t,i,s),r.emitSortChanged(e.EmitterType.local)}}))},t.prototype.clearSorting=function(e){if(void 0===e&&(e=!0),this._grid&&this._gridOptions&&this._dataView)if(this._grid.setSortColumns([]),e)this._isBackendGrid?this.onBackendSortChanged(undefined,{grid:this._grid,sortCols:[],clearSortTriggered:!0}):this._columnDefinitions&&Array.isArray(this._columnDefinitions)&&this.onLocalSortChanged(this._grid,this._dataView,new Array({sortAsc:!0,sortCol:this._columnDefinitions[0],clearSortTriggered:!0}));else if(this._isBackendGrid){var t=this._gridOptions&&this._gridOptions.backendServiceApi&&this._gridOptions.backendServiceApi.service;t&&t.clearSorters&&t.clearSorters()}this._currentLocalSorters=[],this.onSortCleared.next(!0)},t.prototype.dispose=function(){this._eventHandler&&this._eventHandler.unsubscribeAll&&this._eventHandler.unsubscribeAll(),i.isObservable(this.httpCancelRequests$)&&this.httpCancelRequests$.next()},t.prototype.emitSortChanged=function(t,i){if(t===e.EmitterType.remote&&this._gridOptions&&this._gridOptions.backendServiceApi){var r=[],n=this._gridOptions.backendServiceApi.service;n&&n.getCurrentSorters&&(r=n.getCurrentSorters()),this.onSortChanged.next(r)}else t===e.EmitterType.local&&(i&&(this._currentLocalSorters=i),this.onSortChanged.next(this.getCurrentLocalSorters()))},t.prototype.getCurrentLocalSorters=function(){return this._currentLocalSorters},t.prototype.getCurrentColumnSorts=function(e){var t=this,i=this._grid&&this._grid.getSortColumns();return Array.isArray(i)?i.reduce((function(i,r){return e&&r.columnId===e||i.push({sortCol:t._columnDefinitions[t._grid.getColumnIndex(r.columnId)],sortAsc:r.sortAsc}),i}),[]):[]},t.prototype.loadGridSorters=function(t){var i=this;this._currentLocalSorters=[];var r=[];return Array.isArray(t)&&t.forEach((function(t){var n=i._columnDefinitions.find((function(e){return e.id===t.columnId}));n&&(r.push({columnId:n.id,sortAsc:t.direction.toUpperCase()===e.SortDirection.ASC,sortCol:n}),i._currentLocalSorters.push({columnId:n.id+"",direction:t.direction.toUpperCase()}))})),r.length>0&&(this.onLocalSortChanged(this._grid,this._dataView,r),this._grid.setSortColumns(r)),r},t.prototype.onBackendSortChanged=function(e,t){if(!t||!t.grid)throw new Error('Something went wrong when trying to bind the "onBackendSortChanged(event, args)" function, it seems that "args" is not populated correctly');var i=t.grid&&t.grid.getOptions?t.grid.getOptions():{},r=i.backendServiceApi;if(!r||!r.process||!r.service)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');var n=new Date;r.preProcess&&r.preProcess();var o=r.service.processOnSortChanged(e,t),s=i&&i.pagination&&i.pagination.totalItems;Q(r,o,t,n,s,this.emitSortChanged.bind(this),this.httpCancelRequests$)},t.prototype.onLocalSortChanged=function(e,t,i,r){void 0===r&&(r=!1),e&&t&&(r&&t.reSort(),t.sort(this.sortComparer.bind(this,i)),e.invalidate(),e.render())},t.prototype.sortComparer=function(t,i,r){if(Array.isArray(t))for(var n=0,o=t.length;n<o;n++){var s=t[n];if(s&&s.sortCol){var a=s.sortAsc?e.SortDirectionNumber.asc:e.SortDirectionNumber.desc,l=s.sortCol.queryFieldSorter||s.sortCol.queryField||s.sortCol.field,d=s.sortCol.type||e.FieldType.string,c=i[l],u=r[l];if(l&&l.indexOf(".")>=0&&(c=ce(i,l),u=ce(r,l)),s.sortCol&&s.sortCol.sorter){var h=s.sortCol.sorter(c,u,a,s.sortCol);if(h!==e.SortDirectionNumber.neutral)return h}else{var p=De(d,c,u,a,s.sortCol);if(p!==e.SortDirectionNumber.neutral)return p}}}return e.SortDirectionNumber.neutral},t.prototype.updateSorting=function(t,i,r){if(void 0===i&&(i=!0),void 0===r&&(r=!0),!this._gridOptions||!this._gridOptions.enableSorting)throw new Error('[Angular-Slickgrid] in order to use "updateSorting" method, you need to have Sortable Columns defined in your grid and "enableSorting" set in your Grid Options');if(Array.isArray(t)){var n=this._gridOptions&&this._gridOptions.backendServiceApi;if(n){var o=n&&n.service;o&&(o.updateSorters(undefined,t),r&&X(this._gridOptions))}else this.loadGridSorters(t);if(i){var s=n?e.EmitterType.remote:e.EmitterType.local;this.emitSortChanged(s)}}},t}(),At=function(){function i(e,t,i,r,n,o,s){this.excelExportService=e,this.exportService=t,this.extensionUtility=i,this.filterService=r,this.sharedService=n,this.sortService=o,this.translate=s,this._areVisibleColumnDifferent=!1,this._eventHandler=new Slick.EventHandler}return Object.defineProperty(i.prototype,"eventHandler",{get:function(){return this._eventHandler},enumerable:!0,configurable:!0}),i.prototype.dispose=function(){this._eventHandler.unsubscribeAll(),this._addon&&this._addon.destroy&&this._addon.destroy(),this.sharedService.gridOptions&&this.sharedService.gridOptions.gridMenu&&this.sharedService.gridOptions.gridMenu.customItems&&(this.sharedService.gridOptions.gridMenu=this._userOriginalGridMenu)},i.prototype.getAddonInstance=function(){return this._addon},i.prototype.register=function(){var t=this;if(this.sharedService.gridOptions&&this.sharedService.gridOptions.enableTranslate&&(!this.translate||!this.translate.instant))throw new Error('[Angular-Slickgrid] requires "ngx-translate" to be installed and configured when the grid option "enableTranslate" is enabled.');if(this.sharedService&&this.sharedService.gridOptions&&this.sharedService.gridOptions.gridMenu){this._userOriginalGridMenu=M({},this.sharedService.gridOptions.gridMenu),this._locales=this.sharedService.gridOptions&&this.sharedService.gridOptions.locales||Fe.locales,this.extensionUtility.loadExtensionDynamically(e.ExtensionName.gridMenu),this.sharedService.gridOptions.gridMenu=M({},this.getDefaultGridMenuOptions(),this.sharedService.gridOptions.gridMenu);var i=this._userOriginalGridMenu&&Array.isArray(this._userOriginalGridMenu.customItems)?this._userOriginalGridMenu.customItems:[];return this.sharedService.gridOptions.gridMenu.customItems=B(i,this.addGridMenuCustomCommands(i)),this.extensionUtility.translateItems(this.sharedService.gridOptions.gridMenu.customItems,"titleKey","title"),this.extensionUtility.sortItems(this.sharedService.gridOptions.gridMenu.customItems,"positionOrder"),this._addon=new Slick.Controls.GridMenu(this.sharedService.allColumns,this.sharedService.grid,this.sharedService.gridOptions),this.sharedService.grid&&this.sharedService.gridOptions.gridMenu&&(this.sharedService.gridOptions.gridMenu.onExtensionRegistered&&this.sharedService.gridOptions.gridMenu.onExtensionRegistered(this._addon),this.sharedService.gridOptions.gridMenu&&"function"==typeof this.sharedService.gridOptions.gridMenu.onBeforeMenuShow&&this._eventHandler.subscribe(this._addon.onBeforeMenuShow,(function(e,i){t.sharedService.gridOptions.gridMenu.onBeforeMenuShow(e,i)})),this.sharedService.gridOptions.gridMenu&&"function"==typeof this.sharedService.gridOptions.gridMenu.onAfterMenuShow&&this._eventHandler.subscribe(this._addon.onAfterMenuShow,(function(e,i){t.sharedService.gridOptions.gridMenu.onAfterMenuShow(e,i)})),this._eventHandler.subscribe(this._addon.onColumnsChanged,(function(e,i){t._areVisibleColumnDifferent=!0,t.sharedService.gridOptions.gridMenu&&"function"==typeof t.sharedService.gridOptions.gridMenu.onColumnsChanged&&t.sharedService.gridOptions.gridMenu.onColumnsChanged(e,i),i&&Array.isArray(i.columns)&&i.columns.length>t.sharedService.visibleColumns.length&&(t.sharedService.visibleColumns=i.columns)})),this._eventHandler.subscribe(this._addon.onCommand,(function(e,i){t.executeGridMenuInternalCustomCommands(e,i),t.sharedService.gridOptions.gridMenu&&"function"==typeof t.sharedService.gridOptions.gridMenu.onCommand&&t.sharedService.gridOptions.gridMenu.onCommand(e,i)})),this._eventHandler.subscribe(this._addon.onMenuClose,(function(e,i){if(t.sharedService.gridOptions.gridMenu&&"function"==typeof t.sharedService.gridOptions.gridMenu.onMenuClose&&t.sharedService.gridOptions.gridMenu.onMenuClose(e,i),t.sharedService.grid&&"function"==typeof t.sharedService.grid.autosizeColumns){var r=t.sharedService.grid.getUID();t._areVisibleColumnDifferent&&r&&$("."+r).length>0&&(t.sharedService.gridOptions&&t.sharedService.gridOptions.enableAutoSizeColumns&&t.sharedService.grid.autosizeColumns(),t._areVisibleColumnDifferent=!1)}}))),this._addon}return null},i.prototype.refreshBackendDataset=function(e){e&&(this.sharedService.gridOptions=M({},this.sharedService.gridOptions,e)),X(this.sharedService.gridOptions)},i.prototype.showGridMenu=function(e){this._addon.showGridMenu(e)},i.prototype.translateGridMenu=function(){if(this.sharedService&&this.sharedService.gridOptions&&this.sharedService.gridOptions.gridMenu){this.sharedService.gridOptions.gridMenu.customItems=[],this.emptyGridMenuTitles();var e=this._userOriginalGridMenu&&Array.isArray(this._userOriginalGridMenu.customItems)?this._userOriginalGridMenu.customItems:[];this.sharedService.gridOptions.gridMenu.customItems=B(e,this.addGridMenuCustomCommands(e)),this.extensionUtility.translateItems(this.sharedService.gridOptions.gridMenu.customItems,"titleKey","title"),this.extensionUtility.sortItems(this.sharedService.gridOptions.gridMenu.customItems,"positionOrder"),this.sharedService.gridOptions.gridMenu.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","gridMenu"),this.sharedService.gridOptions.gridMenu.forceFitTitle=this.extensionUtility.getPickerTitleOutputString("forceFitTitle","gridMenu"),this.sharedService.gridOptions.gridMenu.syncResizeTitle=this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","gridMenu"),this.extensionUtility.translateItems(this.sharedService.allColumns,"headerKey","name"),this.extensionUtility.translateItems(this.sharedService.allColumns,"nameKey","name"),this._addon&&this._addon.updateAllTitles&&this._addon.updateAllTitles(this.sharedService.gridOptions.gridMenu)}},i.prototype.addGridMenuCustomCommands=function(e){var t=this.sharedService.gridOptions.backendServiceApi||null,i=[];if(this.sharedService.gridOptions&&this.sharedService.gridOptions.enableFiltering&&this.sharedService.gridOptions.showHeaderRow){if(this.sharedService.gridOptions&&this.sharedService.gridOptions.gridMenu&&!this.sharedService.gridOptions.gridMenu.hideClearAllFiltersCommand){e.find((function(e){return e.hasOwnProperty("command")&&"clear-filter"===e.command}))||i.push({iconCssClass:this.sharedService.gridOptions.gridMenu.iconClearAllFiltersCommand||"fa fa-filter text-danger",title:this.sharedService.gridOptions.enableTranslate?this.translate.instant("CLEAR_ALL_FILTERS"):this._locales&&this._locales.TEXT_CLEAR_ALL_FILTERS,disabled:!1,command:"clear-filter",positionOrder:50})}if(this.sharedService.gridOptions&&this.sharedService.gridOptions.gridMenu&&!this.sharedService.gridOptions.gridMenu.hideToggleFilterCommand){e.find((function(e){return e.hasOwnProperty("command")&&"toggle-filter"===e.command}))||i.push({iconCssClass:this.sharedService.gridOptions.gridMenu.iconToggleFilterCommand||"fa fa-random",title:this.sharedService.gridOptions.enableTranslate?this.translate.instant("TOGGLE_FILTER_ROW"):this._locales&&this._locales.TEXT_TOGGLE_FILTER_ROW,disabled:!1,command:"toggle-filter",positionOrder:52})}if(this.sharedService.gridOptions&&this.sharedService.gridOptions.gridMenu&&!this.sharedService.gridOptions.gridMenu.hideRefreshDatasetCommand&&t){e.find((function(e){return e.hasOwnProperty("command")&&"refresh-dataset"===e.command}))||i.push({iconCssClass:this.sharedService.gridOptions.gridMenu.iconRefreshDatasetCommand||"fa fa-refresh",title:this.sharedService.gridOptions.enableTranslate?this.translate.instant("REFRESH_DATASET"):this._locales&&this._locales.TEXT_REFRESH_DATASET,disabled:!1,command:"refresh-dataset",positionOrder:56})}}if(this.sharedService.gridOptions.showPreHeaderPanel&&this.sharedService.gridOptions&&this.sharedService.gridOptions.gridMenu&&!this.sharedService.gridOptions.gridMenu.hideTogglePreHeaderCommand){e.find((function(e){return e.hasOwnProperty("command")&&"toggle-preheader"===e.command}))||i.push({iconCssClass:this.sharedService.gridOptions.gridMenu.iconTogglePreHeaderCommand||"fa fa-random",title:this.sharedService.gridOptions.enableTranslate?this.translate.instant("TOGGLE_PRE_HEADER_ROW"):this._locales&&this._locales.TEXT_TOGGLE_PRE_HEADER_ROW,disabled:!1,command:"toggle-preheader",positionOrder:52})}if(this.sharedService.gridOptions.enableSorting&&this.sharedService.gridOptions&&this.sharedService.gridOptions.gridMenu&&!this.sharedService.gridOptions.gridMenu.hideClearAllSortingCommand){e.find((function(e){return e.hasOwnProperty("command")&&"clear-sorting"===e.command}))||i.push({iconCssClass:this.sharedService.gridOptions.gridMenu.iconClearAllSortingCommand||"fa fa-unsorted text-danger",title:this.sharedService.gridOptions.enableTranslate?this.translate.instant("CLEAR_ALL_SORTING"):this._locales&&this._locales.TEXT_CLEAR_ALL_SORTING,disabled:!1,command:"clear-sorting",positionOrder:51})}if(this.sharedService.gridOptions&&this.sharedService.gridOptions.enableExport&&this.sharedService.gridOptions.gridMenu&&!this.sharedService.gridOptions.gridMenu.hideExportCsvCommand){e.find((function(e){return e.hasOwnProperty("command")&&"export-csv"===e.command}))||i.push({iconCssClass:this.sharedService.gridOptions.gridMenu.iconExportCsvCommand||"fa fa-download",title:this.sharedService.gridOptions.enableTranslate?this.translate.instant("EXPORT_TO_CSV"):this._locales&&this._locales.TEXT_EXPORT_TO_CSV,disabled:!1,command:"export-csv",positionOrder:53})}if(this.sharedService.gridOptions&&this.sharedService.gridOptions.enableExcelExport&&this.sharedService.gridOptions.gridMenu&&!this.sharedService.gridOptions.gridMenu.hideExportExcelCommand){e.find((function(e){return e.hasOwnProperty("command")&&"export-excel"===e.command}))||i.push({iconCssClass:this.sharedService.gridOptions.gridMenu.iconExportExcelCommand||"fa fa-file-excel-o text-success",title:this.sharedService.gridOptions.enableTranslate?this.translate.instant("EXPORT_TO_EXCEL"):this._locales&&this._locales.TEXT_EXPORT_TO_EXCEL,disabled:!1,command:"export-excel",positionOrder:54})}if(this.sharedService.gridOptions&&this.sharedService.gridOptions.enableExport&&this.sharedService.gridOptions.gridMenu&&!this.sharedService.gridOptions.gridMenu.hideExportTextDelimitedCommand){e.find((function(e){return e.hasOwnProperty("command")&&"export-text-delimited"===e.command}))||i.push({iconCssClass:this.sharedService.gridOptions.gridMenu.iconExportTextDelimitedCommand||"fa fa-download",title:this.sharedService.gridOptions.enableTranslate?this.translate.instant("EXPORT_TO_TAB_DELIMITED"):this._locales&&this._locales.TEXT_EXPORT_TO_TAB_DELIMITED,disabled:!1,command:"export-text-delimited",positionOrder:55})}return this.sharedService&&this.sharedService.gridOptions&&this.sharedService.gridOptions.gridMenu&&(Array.isArray(i)&&i.length>0||Array.isArray(this.sharedService.gridOptions.gridMenu.customItems)&&this.sharedService.gridOptions.gridMenu.customItems.length>0)&&(this.sharedService.gridOptions.gridMenu.customTitle=this.sharedService.gridOptions.gridMenu.customTitle||this.extensionUtility.getPickerTitleOutputString("customTitle","gridMenu")),i},i.prototype.executeGridMenuInternalCustomCommands=function(t,i){if(i&&i.command)switch(i.command){case"clear-filter":this.filterService.clearFilters(),this.sharedService.dataView.refresh();break;case"clear-sorting":this.sortService.clearSorting(),this.sharedService.dataView.refresh();break;case"export-csv":this.exportService.exportToFile({delimiter:e.DelimiterType.comma,filename:"export",format:e.FileType.csv,useUtf8WithBom:!0});break;case"export-excel":this.excelExportService.exportToExcel({filename:"export",format:e.FileType.xlsx});break;case"export-text-delimited":this.exportService.exportToFile({delimiter:e.DelimiterType.tab,filename:"export",format:e.FileType.txt,useUtf8WithBom:!0});break;case"toggle-filter":var r=this.sharedService&&this.sharedService.gridOptions&&this.sharedService.gridOptions.showHeaderRow||!1;this.sharedService.grid.setHeaderRowVisibility(!r);break;case"toggle-toppanel":var n=this.sharedService&&this.sharedService.gridOptions&&this.sharedService.gridOptions.showTopPanel||!1;this.sharedService.grid.setTopPanelVisibility(!n);break;case"toggle-preheader":var o=this.sharedService&&this.sharedService.gridOptions&&this.sharedService.gridOptions.showPreHeaderPanel||!1;this.sharedService.grid.setPreHeaderPanelVisibility(!o);break;case"refresh-dataset":this.refreshBackendDataset()}},i.prototype.emptyGridMenuTitles=function(){this.sharedService&&this.sharedService.gridOptions&&this.sharedService.gridOptions.gridMenu&&(this.sharedService.gridOptions.gridMenu.customTitle="",this.sharedService.gridOptions.gridMenu.columnTitle="",this.sharedService.gridOptions.gridMenu.forceFitTitle="",this.sharedService.gridOptions.gridMenu.syncResizeTitle="")},i.prototype.getDefaultGridMenuOptions=function(){return{customTitle:undefined,columnTitle:this.extensionUtility.getPickerTitleOutputString("columnTitle","gridMenu"),forceFitTitle:this.extensionUtility.getPickerTitleOutputString("forceFitTitle","gridMenu"),syncResizeTitle:this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","gridMenu"),iconCssClass:"fa fa-bars",menuWidth:18,customItems:[],hideClearAllFiltersCommand:!1,hideRefreshDatasetCommand:!1,hideToggleFilterCommand:!1}},i=N([t.Injectable(),R(6,t.Optional()),V("design:paramtypes",[Ne,Re,Ge,xt,Ve,Pt,n.TranslateService])],i)}(),Dt=function(){function e(e){this.sharedService=e}return e.prototype.dispose=function(){this._addon&&this._addon.destroy&&this._addon.destroy()},e.prototype.getAddonInstance=function(){return this._addon},e.prototype.register=function(){return this.sharedService&&this.sharedService.grid?(this._addon=this.sharedService.groupItemMetadataProvider||{},this.sharedService.grid.registerPlugin(this._addon),this._addon):null},e=N([t.Injectable(),V("design:paramtypes",[Ve])],e)}(),It=function(){function i(e,t){this.extensionUtility=e,this.sharedService=t,this._eventHandler=new Slick.EventHandler}return Object.defineProperty(i.prototype,"eventHandler",{get:function(){return this._eventHandler},enumerable:!0,configurable:!0}),i.prototype.dispose=function(){this._eventHandler.unsubscribeAll(),this._addon&&this._addon.destroy&&this._addon.destroy()},i.prototype.getAddonInstance=function(){return this._addon},i.prototype.register=function(){var t=this;return this.sharedService&&this.sharedService.grid&&this.sharedService.gridOptions?(this.extensionUtility.loadExtensionDynamically(e.ExtensionName.headerButton),this._addon=new Slick.Plugins.HeaderButtons(this.sharedService.gridOptions.headerButton||{}),this.sharedService.grid.registerPlugin(this._addon),this.sharedService.grid&&this.sharedService.gridOptions.headerButton&&(this.sharedService.gridOptions.headerButton.onExtensionRegistered&&this.sharedService.gridOptions.headerButton.onExtensionRegistered(this._addon),this._eventHandler.subscribe(this._addon.onCommand,(function(e,i){t.sharedService.gridOptions.headerButton&&"function"==typeof t.sharedService.gridOptions.headerButton.onCommand&&t.sharedService.gridOptions.headerButton.onCommand(e,i)}))),this._addon):null},i=N([t.Injectable(),V("design:paramtypes",[Ge,Ve])],i)}(),Ft=function(){function i(e,t,i,r,n){this.extensionUtility=e,this.filterService=t,this.sharedService=i,this.sortService=r,this.translate=n,this._eventHandler=new Slick.EventHandler}return Object.defineProperty(i.prototype,"eventHandler",{get:function(){return this._eventHandler},enumerable:!0,configurable:!0}),i.prototype.dispose=function(){this._eventHandler.unsubscribeAll(),this._addon&&this._addon.destroy&&this._addon.destroy()},i.prototype.getAddonInstance=function(){return this._addon},i.prototype.register=function(){var t=this;if(this.sharedService.gridOptions&&this.sharedService.gridOptions.enableTranslate&&(!this.translate||!this.translate.instant))throw new Error('[Angular-Slickgrid] requires "ngx-translate" to be installed and configured when the grid option "enableTranslate" is enabled.');return this.sharedService&&this.sharedService.grid&&this.sharedService.gridOptions?(this._locales=this.sharedService.gridOptions&&this.sharedService.gridOptions.locales||Fe.locales,this.extensionUtility.loadExtensionDynamically(e.ExtensionName.headerMenu),this.sharedService.gridOptions.headerMenu=M({},this.getDefaultHeaderMenuOptions(),this.sharedService.gridOptions.headerMenu),this.sharedService.gridOptions.enableHeaderMenu&&(this.sharedService.gridOptions.headerMenu=this.addHeaderMenuCustomCommands(this.sharedService.gridOptions,this.sharedService.columnDefinitions)),this._addon=new Slick.Plugins.HeaderMenu(this.sharedService.gridOptions.headerMenu),this.sharedService.grid.registerPlugin(this._addon),this.sharedService.grid&&this.sharedService.gridOptions.headerMenu&&(this.sharedService.gridOptions.headerMenu.onExtensionRegistered&&this.sharedService.gridOptions.headerMenu.onExtensionRegistered(this._addon),this._eventHandler.subscribe(this._addon.onCommand,(function(e,i){t.executeHeaderMenuInternalCommands(e,i),t.sharedService.gridOptions.headerMenu&&"function"==typeof t.sharedService.gridOptions.headerMenu.onCommand&&t.sharedService.gridOptions.headerMenu.onCommand(e,i)})),this.sharedService.gridOptions.headerMenu&&"function"==typeof this.sharedService.gridOptions.headerMenu.onBeforeMenuShow&&this._eventHandler.subscribe(this._addon.onBeforeMenuShow,(function(e,i){t.sharedService.gridOptions.headerMenu.onBeforeMenuShow(e,i)})),this.sharedService.gridOptions.headerMenu&&"function"==typeof this.sharedService.gridOptions.headerMenu.onAfterMenuShow&&this._eventHandler.subscribe(this._addon.onAfterMenuShow,(function(e,i){t.sharedService.gridOptions.headerMenu.onAfterMenuShow(e,i)}))),this._addon):null},i.prototype.addHeaderMenuCustomCommands=function(e,t){var i=this,r=e.headerMenu||{};return t&&Array.isArray(t)&&e.enableHeaderMenu&&t.forEach((function(t){if(t&&!t.excludeFromHeaderMenu){t.header&&t.header.menu||(t.header={menu:{items:[]}});var n=t&&t.header&&t.header.menu&&t.header.menu.items||[];e.enableSorting&&t.sortable&&r&&!r.hideSortCommands&&(0===n.filter((function(e){return e.hasOwnProperty("command")&&"sort-asc"===e.command})).length&&n.push({iconCssClass:r.iconSortAscCommand||"fa fa-sort-asc",title:e.enableTranslate?i.translate.instant("SORT_ASCENDING"):i._locales&&i._locales.TEXT_SORT_ASCENDING,command:"sort-asc",positionOrder:50}),0===n.filter((function(e){return e.hasOwnProperty("command")&&"sort-desc"===e.command})).length&&n.push({iconCssClass:r.iconSortDescCommand||"fa fa-sort-desc",title:e.enableTranslate?i.translate.instant("SORT_DESCENDING"):i._locales&&i._locales.TEXT_SORT_DESCENDING,command:"sort-desc",positionOrder:51}),0===n.filter((function(e){return e.hasOwnProperty("command")&&52===e.positionOrder})).length&&n.push({divider:!0,command:"",positionOrder:52}),r.hideClearSortCommand||0!==n.filter((function(e){return e.hasOwnProperty("command")&&"clear-sort"===e.command})).length||n.push({iconCssClass:r.iconClearSortCommand||"fa fa-unsorted",title:e.enableTranslate?i.translate.instant("REMOVE_SORT"):i._locales&&i._locales.TEXT_REMOVE_SORT,command:"clear-sort",positionOrder:54})),e.enableFiltering&&t.filterable&&r&&!r.hideFilterCommands&&(r.hideClearFilterCommand||0!==n.filter((function(e){return e.hasOwnProperty("command")&&"clear-filter"===e.command})).length||n.push({iconCssClass:r.iconClearFilterCommand||"fa fa-filter",title:e.enableTranslate?i.translate.instant("REMOVE_FILTER"):i._locales&&i._locales.TEXT_REMOVE_FILTER,command:"clear-filter",positionOrder:53})),r&&!r.hideColumnHideCommand&&0===n.filter((function(e){return e.hasOwnProperty("command")&&"hide"===e.command})).length&&n.push({iconCssClass:r.iconColumnHideCommand||"fa fa-times",title:e.enableTranslate?i.translate.instant("HIDE_COLUMN"):i._locales&&i._locales.TEXT_HIDE_COLUMN,command:"hide",positionOrder:55}),i.extensionUtility.translateItems(n,"titleKey","title"),i.extensionUtility.sortItems(n,"positionOrder")}})),r},i.prototype.hideColumn=function(e){if(this.sharedService.grid&&this.sharedService.grid.getColumns&&this.sharedService.grid.setColumns&&this.sharedService.grid.getColumnIndex){var t=this.sharedService.grid.getColumnIndex(e.id),i=this.sharedService.grid.getColumns(),r=this.extensionUtility.arrayRemoveItemByIndex(i,t);this.sharedService.visibleColumns=r,this.sharedService.grid.setColumns(r),this.sharedService.onColumnsChanged.next(r)}},i.prototype.translateHeaderMenu=function(){this.sharedService.gridOptions&&this.sharedService.gridOptions.headerMenu&&this.resetHeaderMenuTranslations(this.sharedService.visibleColumns)},i.prototype.getDefaultHeaderMenuOptions=function(){return{autoAlignOffset:12,minWidth:140,hideColumnHideCommand:!1,hideSortCommands:!1,title:""}},i.prototype.resetHeaderMenuTranslations=function(e){var t=this;e.forEach((function(e){if(e&&e.header&&e.header&&e.header.menu&&e.header.menu.items&&!e.excludeFromHeaderMenu){var i=e.header.menu.items||[];i.forEach((function(e){if(e.hasOwnProperty("command"))switch(e.command){case"clear-filter":e.title=t.translate.instant("REMOVE_FILTER")||t._locales&&t._locales.TEXT_REMOVE_FILTER;break;case"clear-sort":e.title=t.translate.instant("REMOVE_SORT")||t._locales&&t._locales.TEXT_REMOVE_SORT;break;case"sort-asc":e.title=t.translate.instant("SORT_ASCENDING")||t._locales&&t._locales.TEXT_SORT_ASCENDING;break;case"sort-desc":e.title=t.translate.instant("SORT_DESCENDING")||t._locales&&t._locales.TEXT_SORT_DESCENDING;break;case"hide":e.title=t.translate.instant("HIDE_COLUMN")||t._locales&&t._locales.TEXT_HIDE_COLUMN}t.sharedService.gridOptions&&t.sharedService.gridOptions.enableTranslate&&t.extensionUtility.translateItems(i,"titleKey","title")}))}}))},i.prototype.clearColumnFilter=function(e,t){t&&t.column&&this.filterService.clearFilterByColumnId(e,t.column.id)},i.prototype.clearColumnSort=function(e,t){if(t&&t.column&&this.sharedService){var i=this.sortService.getCurrentColumnSorts(),r=this.sortService.getCurrentColumnSorts(t.column.id+"");if(Array.isArray(i)&&Array.isArray(r)&&i.length!==r.length){if(this.sharedService.gridOptions&&this.sharedService.gridOptions.backendServiceApi)this.sortService.onBackendSortChanged(e,{multiColumnSort:!0,sortCols:r,grid:this.sharedService.grid});else if(this.sharedService.dataView)this.sortService.onLocalSortChanged(this.sharedService.grid,this.sharedService.dataView,r,!0);else{var n=this.sharedService.gridOptions&&this.sharedService.gridOptions.multiColumnSort||!1?r:r[0];t.grid.onSort.notify(n)}var o=r.map((function(e){return{columnId:e&&e.sortCol&&e.sortCol.id,sortAsc:e&&e.sortAsc,sortCol:e&&e.sortCol}}));this.sharedService.grid.setSortColumns(o)}}},i.prototype.executeHeaderMenuInternalCommands=function(e,t){if(t&&t.command)switch(t.command){case"hide":this.hideColumn(t.column),this.sharedService.gridOptions&&this.sharedService.gridOptions.enableAutoSizeColumns&&this.sharedService.grid.autosizeColumns();break;case"clear-filter":this.clearColumnFilter(e,t);break;case"clear-sort":this.clearColumnSort(e,t);break;case"sort-asc":case"sort-desc":var i="sort-asc"===t.command;this.sortColumn(e,t,i)}},i.prototype.sortColumn=function(t,i,r){if(void 0===r&&(r=!0),i&&i.column){var n=this.sortService.getCurrentColumnSorts(i.column.id+""),o=void 0;if(n.push({sortCol:i.column,sortAsc:r}),this.sharedService.gridOptions.backendServiceApi)this.sortService.onBackendSortChanged(t,{multiColumnSort:!0,sortCols:n,grid:this.sharedService.grid}),o=e.EmitterType.remote;else if(this.sharedService.dataView)this.sortService.onLocalSortChanged(this.sharedService.grid,this.sharedService.dataView,n),o=e.EmitterType.local;else{var s=this.sharedService&&this.sharedService.gridOptions&&this.sharedService.gridOptions.multiColumnSort||!1?n:n[0];i.grid.onSort.notify(s)}var a=n.map((function(e){return{columnId:e&&e.sortCol&&e.sortCol.id,sortAsc:e&&e.sortAsc,sortCol:e&&e.sortCol}}));if(this.sharedService.grid.setSortColumns(a),o){var l=[];a.forEach((function(e){l.push({columnId:e.columnId+"",direction:e.sortAsc?"ASC":"DESC"})})),this.sortService.emitSortChanged(o,l)}}},i=N([t.Injectable(),R(4,t.Optional()),V("design:paramtypes",[Ge,xt,Ve,Pt,n.TranslateService])],i)}(),kt=p,Mt=function(){function r(e,t,i,r,n){this.angularUtilService=e,this.appRef=t,this.extensionUtility=i,this.filterService=r,this.sharedService=n,this._views=[],this._subscriptions=[],this._eventHandler=new Slick.EventHandler}return Object.defineProperty(r.prototype,"datasetIdPropName",{get:function(){return this.gridOptions.datasetIdPropertyName||"id"},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"eventHandler",{get:function(){return this._eventHandler},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"gridOptions",{get:function(){return this.sharedService&&this.sharedService.gridOptions||{}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rowDetailViewOptions",{get:function(){return this.gridOptions.rowDetailView},enumerable:!0,configurable:!0}),r.prototype.dispose=function(){this._eventHandler.unsubscribeAll(),this._addon&&this._addon.destroy&&this._addon.destroy(),this._subscriptions=Ce(this._subscriptions),this.disposeAllViewComponents()},r.prototype.disposeAllViewComponents=function(){var e=this;this._views.forEach((function(t){return e.disposeViewComponent(t)})),this._views=[]},r.prototype.create=function(t,i){var r=this;if(t&&i){if(this.extensionUtility.loadExtensionDynamically(e.ExtensionName.rowDetailView),!i.rowDetailView)throw new Error('The Row Detail View requires options to be passed via the "rowDetailView" property of the Grid Options');if(i&&i.rowDetailView){if(!this._addon){if("function"!=typeof i.rowDetailView.process)throw new Error('You need to provide a "process" function for the Row Detail Extension to work properly');this._userProcessFn=i.rowDetailView.process,i.rowDetailView.process=function(e){return r.onProcessing(e)},i.rowDetailView.preTemplate||(this._preloadComponent=i&&i.rowDetailView&&i.rowDetailView.preloadComponent,i.rowDetailView.preTemplate=function(){return kt.sanitize('<div class="container_loading"></div>')}),i.rowDetailView.postTemplate||(this._viewComponent=i&&i.rowDetailView&&i.rowDetailView.viewComponent,i.rowDetailView.postTemplate=function(e){return kt.sanitize('<div class="container_'+e[r.datasetIdPropName]+'"></div>')}),this._addon=new Slick.Plugins.RowDetailView(i.rowDetailView)}var n=this._addon.getColumnDefinition();"object"==typeof n&&(n.excludeFromExport=!0,n.excludeFromColumnPicker=!0,n.excludeFromGridMenu=!0,n.excludeFromQuery=!0,n.excludeFromHeaderMenu=!0,t.unshift(n))}return this._addon}return null},r.prototype.getAddonInstance=function(){return this._addon},r.prototype.register=function(t){var i=this;return this.sharedService&&this.sharedService.grid&&this.sharedService.gridOptions?(this.sharedService.grid.registerPlugin(this._addon),t&&this.sharedService.grid.getSelectionModel()||(this.extensionUtility.loadExtensionDynamically(e.ExtensionName.rowSelection),t=new Slick.RowSelectionModel(this.sharedService.gridOptions.rowSelectionOptions||{selectActiveRow:!0}),this.sharedService.grid.setSelectionModel(t)),this.sharedService.grid&&this.rowDetailViewOptions&&(this.rowDetailViewOptions.onExtensionRegistered&&this.rowDetailViewOptions.onExtensionRegistered(this._addon),this._eventHandler.subscribe(this._addon.onAsyncResponse,(function(e,t){i.rowDetailViewOptions&&"function"==typeof i.rowDetailViewOptions.onAsyncResponse&&i.rowDetailViewOptions.onAsyncResponse(e,t)})),this._eventHandler.subscribe(this._addon.onAsyncEndUpdate,(function(e,t){i.renderViewModel(t&&t.item),i.rowDetailViewOptions&&"function"==typeof i.rowDetailViewOptions.onAsyncEndUpdate&&i.rowDetailViewOptions.onAsyncEndUpdate(e,t)})),this._eventHandler.subscribe(this._addon.onAfterRowDetailToggle,(function(e,t){i.renderPreloadView(),i.renderAllViewComponents(),i.rowDetailViewOptions&&"function"==typeof i.rowDetailViewOptions.onAfterRowDetailToggle&&i.rowDetailViewOptions.onAfterRowDetailToggle(e,t)})),this._eventHandler.subscribe(this._addon.onBeforeRowDetailToggle,(function(e,t){i.onBeforeRowDetailToggle(e,t),i.rowDetailViewOptions&&"function"==typeof i.rowDetailViewOptions.onBeforeRowDetailToggle&&i.rowDetailViewOptions.onBeforeRowDetailToggle(e,t)})),this._eventHandler.subscribe(this._addon.onRowBackToViewportRange,(function(e,t){i.onRowBackToViewportRange(e,t),i.rowDetailViewOptions&&"function"==typeof i.rowDetailViewOptions.onRowBackToViewportRange&&i.rowDetailViewOptions.onRowBackToViewportRange(e,t)})),this._eventHandler.subscribe(this._addon.onRowOutOfViewportRange,(function(e,t){i.rowDetailViewOptions&&"function"==typeof i.rowDetailViewOptions.onRowOutOfViewportRange&&i.rowDetailViewOptions.onRowOutOfViewportRange(e,t)})),this._eventHandler.subscribe(this.sharedService.grid.onColumnsReordered,(function(){return i.redrawAllViewComponents()})),this._eventHandler.subscribe(this.sharedService.grid.onSort,(function(){return i.disposeAllViewComponents()})),this._subscriptions.push(this.filterService.onFilterChanged.subscribe((function(){return i.redrawAllViewComponents()})))),this._addon):null},r.prototype.redrawAllViewComponents=function(){var e=this;this._views.forEach((function(t){e.redrawViewComponent(t)}))},r.prototype.renderAllViewComponents=function(){var e=this;this._views.forEach((function(t){t&&t.dataContext&&e.renderViewModel(t.dataContext)}))},r.prototype.redrawViewComponent=function(e){var t=document.getElementsByClassName("container_"+e[this.datasetIdPropName]);t&&t.length&&this.renderViewModel(e.dataContext)},r.prototype.renderPreloadView=function(){var e=document.getElementsByClassName("container_loading");e&&e.length&&this.angularUtilService.createAngularComponentAppendToDom(this._preloadComponent,e[0],!0)},r.prototype.renderViewModel=function(e){var t=this,i=document.getElementsByClassName("container_"+e[this.datasetIdPropName]);if(i&&i.length){var r=this.angularUtilService.createAngularComponentAppendToDom(this._viewComponent,i[0],!0);if(r&&r.componentRef&&r.componentRef.instance){Object.assign(r.componentRef.instance,{model:e,addon:this._addon,grid:this.sharedService.grid,dataView:this.sharedService.dataView,parent:this.rowDetailViewOptions&&this.rowDetailViewOptions.parent});var n=this._views.find((function(i){return i[t.datasetIdPropName]===e[t.datasetIdPropName]}));return n&&(n.componentRef=r.componentRef),n}}return null},r.prototype.disposeViewComponent=function(e){var t=e&&e.componentRef;return t?(this.appRef.detachView(t.hostView),t.destroy(),e):null},r.prototype.notifyTemplate=function(e){this._addon&&this._addon.onAsyncResponse.notify({item:e},undefined,this)},r.prototype.onProcessing=function(e){return G(this,void 0,void 0,(function(){var t,r;return L(this,(function(n){switch(n.label){case 0:return e&&"function"==typeof this._userProcessFn?(t=void 0,[4,this._userProcessFn(e)]):[3,5];case 1:return(r=n.sent()).hasOwnProperty(this.datasetIdPropName)?(t=r,[3,4]):[3,2];case 2:return r&&r instanceof i.Observable||r instanceof Promise?[4,se(r)]:[3,4];case 3:t=n.sent(),n.label=4;case 4:if(!t||!t.hasOwnProperty(this.datasetIdPropName))throw new Error('[Angular-Slickgrid] could not process the Row Detail, you must make sure that your "process" callback\n          (a Promise or an HttpClient call returning an Observable) returns an item object that has an "'+this.datasetIdPropName+'" property');this.notifyTemplate(t||{}),n.label=5;case 5:return[2]}}))}))},r.prototype.onBeforeRowDetailToggle=function(e,t){var i=this;if(t&&t.item&&t.item.__collapsed){var r={id:t.item[this.datasetIdPropName],dataContext:t.item};te(this._views,r)}else{var n=this._views.findIndex((function(e){return e[i.datasetIdPropName]===t.item[i.datasetIdPropName]}));if(n>=0&&this._views.hasOwnProperty(n)){var o=this._views[n].componentRef;this.appRef.detachView(o.hostView),o.destroy(),this._views.splice(n,1)}}},r.prototype.onRowBackToViewportRange=function(e,t){var i=this;t&&t.item&&this._views.forEach((function(e){e[i.datasetIdPropName]===t.item[i.datasetIdPropName]&&i.redrawViewComponent(e)}))},r=N([t.Injectable(),V("design:paramtypes",[U,t.ApplicationRef,Ge,xt,Ve])],r)}(),Nt=function(){function i(e,t){this.extensionUtility=e,this.sharedService=t,this._eventHandler=new Slick.EventHandler}return Object.defineProperty(i.prototype,"eventHandler",{get:function(){return this._eventHandler},enumerable:!0,configurable:!0}),i.prototype.dispose=function(){this._eventHandler.unsubscribeAll(),this._addon&&this._addon.destroy&&this._addon.destroy()},i.prototype.getAddonInstance=function(){return this._addon},i.prototype.register=function(t){var i=this;return this.sharedService&&this.sharedService.grid&&this.sharedService.gridOptions?(this.extensionUtility.loadExtensionDynamically(e.ExtensionName.rowMoveManager),t&&this.sharedService.grid.getSelectionModel()||(this.extensionUtility.loadExtensionDynamically(e.ExtensionName.rowSelection),t=new Slick.RowSelectionModel(this.sharedService.gridOptions.rowSelectionOptions||{}),this.sharedService.grid.setSelectionModel(t)),this._addon=new Slick.RowMoveManager(this.sharedService.gridOptions.rowMoveManager||{cancelEditOnDrag:!0}),this.sharedService.grid.registerPlugin(this._addon),this.sharedService.grid&&this.sharedService.gridOptions.rowMoveManager&&(this.sharedService.gridOptions.rowMoveManager.onExtensionRegistered&&this.sharedService.gridOptions.rowMoveManager.onExtensionRegistered(this._addon),this._eventHandler.subscribe(this._addon.onBeforeMoveRows,(function(e,t){i.sharedService.gridOptions.rowMoveManager&&"function"==typeof i.sharedService.gridOptions.rowMoveManager.onBeforeMoveRows&&i.sharedService.gridOptions.rowMoveManager.onBeforeMoveRows(e,t)})),this._eventHandler.subscribe(this._addon.onMoveRows,(function(e,t){i.sharedService.gridOptions.rowMoveManager&&"function"==typeof i.sharedService.gridOptions.rowMoveManager.onMoveRows&&i.sharedService.gridOptions.rowMoveManager.onMoveRows(e,t)}))),this._addon):null},i=N([t.Injectable(),V("design:paramtypes",[Ge,Ve])],i)}(),Rt=function(){function i(e,t){this.extensionUtility=e,this.sharedService=t}return i.prototype.dispose=function(){this._addon&&this._addon.destroy&&this._addon.destroy()},i.prototype.getAddonInstance=function(){return this._addon},i.prototype.register=function(){return this.sharedService&&this.sharedService.grid&&this.sharedService.gridOptions?(this.extensionUtility.loadExtensionDynamically(e.ExtensionName.rowSelection),this._addon=new Slick.RowSelectionModel(this.sharedService.gridOptions.rowSelectionOptions||{}),this.sharedService.grid.setSelectionModel(this._addon),this._addon):null},i=N([t.Injectable(),V("design:paramtypes",[Ge,Ve])],i)}(),Vt=function(){function i(e,t,i,r,n,o,s,a,l,d,c,u,h,p,m,f){this.autoTooltipExtension=e,this.cellExternalCopyExtension=t,this.cellMenuExtension=i,this.checkboxSelectorExtension=r,this.columnPickerExtension=n,this.contextMenuExtension=o,this.draggableGroupingExtension=s,this.gridMenuExtension=a,this.groupItemMetaExtension=l,this.headerButtonExtension=d,this.headerMenuExtension=c,this.rowDetailViewExtension=u,this.rowMoveManagerExtension=h,this.rowSelectionExtension=p,this.sharedService=m,this.translate=f,this._extensionCreatedList=[],this._extensionList=[]}return i.prototype.dispose=function(){this.sharedService.grid=null,this.sharedService.visibleColumns=[],this._extensionList.forEach((function(e){e&&e["class"]&&e["class"].dispose&&e["class"].dispose()})),this._extensionList=[]},i.prototype.getAllColumns=function(){return this.sharedService.allColumns||[]},i.prototype.getVisibleColumns=function(){return this.sharedService.visibleColumns||[]},i.prototype.getAllExtensions=function(){return this._extensionList},i.prototype.getExtensionByName=function(e){return Array.isArray(this._extensionList)&&this._extensionList.find((function(t){return t.name===e}))},i.prototype.getSlickgridAddonInstance=function(e){var t=this.getExtensionByName(e);return t&&t["class"]&&(t.instance||t.addon)?t["class"]&&t["class"].getAddonInstance?t["class"].getAddonInstance():t.instance:null},i.prototype.autoResizeColumns=function(){this.sharedService.grid.autosizeColumns()},i.prototype.bindDifferentExtensions=function(){var t=this;if(this.sharedService&&this.sharedService.gridOptions){if(this.sharedService.gridOptions.enableTranslate&&(this.translateItems(this.sharedService.allColumns,"headerKey","name"),this.translateItems(this.sharedService.allColumns,"nameKey","name")),this.sharedService.gridOptions.enableAutoTooltip&&this.autoTooltipExtension&&this.autoTooltipExtension.register){var i=this.autoTooltipExtension.register();this._extensionList.push({name:e.ExtensionName.autoTooltip,"class":this.autoTooltipExtension,addon:i,instance:i})}if(this.sharedService.gridOptions.enableExcelCopyBuffer&&this.cellExternalCopyExtension&&this.cellExternalCopyExtension.register){i=this.cellExternalCopyExtension.register();this._extensionList.push({name:e.ExtensionName.cellExternalCopyManager,"class":this.cellExternalCopyExtension,addon:i,instance:i})}if(this.sharedService.gridOptions.enableCellMenu&&this.cellMenuExtension&&this.cellMenuExtension.register){i=this.cellMenuExtension.register();this._extensionList.push({name:e.ExtensionName.cellMenu,"class":this.cellMenuExtension,addon:i,instance:i})}if(!this.getExtensionByName(e.ExtensionName.rowSelection)&&(this.sharedService.gridOptions.enableRowSelection||this.sharedService.gridOptions.enableCheckboxSelector||this.sharedService.gridOptions.enableRowDetailView)&&this.rowSelectionExtension&&this.rowSelectionExtension.register){i=this.rowSelectionExtension.register();this._extensionList.push({name:e.ExtensionName.rowSelection,"class":this.rowSelectionExtension,addon:i,instance:i})}if(this.sharedService.gridOptions.enableCheckboxSelector&&this.checkboxSelectorExtension&&this.checkboxSelectorExtension.register){var r=this.getExtensionByName(e.ExtensionName.rowSelection);this.checkboxSelectorExtension.register(r);i=(n=this.getCreatedExtensionByName(e.ExtensionName.checkboxSelector))&&n.instance;this._extensionList.push({name:e.ExtensionName.checkboxSelector,"class":this.checkboxSelectorExtension,addon:i,instance:i})}if(this.sharedService.gridOptions.enableColumnPicker&&this.columnPickerExtension&&this.columnPickerExtension.register){i=this.columnPickerExtension.register();this._extensionList.push({name:e.ExtensionName.columnPicker,"class":this.columnPickerExtension,addon:i,instance:i})}if(this.sharedService.gridOptions.enableContextMenu&&this.contextMenuExtension&&this.contextMenuExtension.register){i=this.contextMenuExtension.register();this._extensionList.push({name:e.ExtensionName.contextMenu,"class":this.contextMenuExtension,addon:i,instance:i})}if(this.sharedService.gridOptions.enableDraggableGrouping&&this.draggableGroupingExtension&&this.draggableGroupingExtension.register){i=this.draggableGroupingExtension.register();this._extensionList.push({name:e.ExtensionName.draggableGrouping,"class":this.draggableGroupingExtension,addon:i,instance:i})}if(this.sharedService.gridOptions.enableGridMenu&&this.gridMenuExtension&&this.gridMenuExtension.register){i=this.gridMenuExtension.register();this._extensionList.push({name:e.ExtensionName.gridMenu,"class":this.gridMenuExtension,addon:i,instance:i})}if((this.sharedService.gridOptions.enableDraggableGrouping||this.sharedService.gridOptions.enableGrouping)&&this.groupItemMetaExtension&&this.groupItemMetaExtension.register){i=this.groupItemMetaExtension.register();this._extensionList.push({name:e.ExtensionName.groupItemMetaProvider,"class":this.groupItemMetaExtension,addon:i,instance:i})}if(this.sharedService.gridOptions.enableHeaderButton&&this.headerButtonExtension&&this.headerButtonExtension.register){i=this.headerButtonExtension.register();this._extensionList.push({name:e.ExtensionName.headerButton,"class":this.headerButtonExtension,addon:i,instance:i})}if(this.sharedService.gridOptions.enableHeaderMenu&&this.headerMenuExtension&&this.headerMenuExtension.register){i=this.headerMenuExtension.register();this._extensionList.push({name:e.ExtensionName.headerMenu,"class":this.headerMenuExtension,addon:i,instance:i})}if(this.sharedService.gridOptions.enableRowDetailView&&this.rowDetailViewExtension&&this.rowDetailViewExtension.register){r=this.getExtensionByName(e.ExtensionName.rowSelection);this.rowDetailViewExtension.register(r);var n;i=(n=this.getCreatedExtensionByName(e.ExtensionName.rowDetailView))&&n.instance;this._extensionList.push({name:e.ExtensionName.rowDetailView,"class":this.rowDetailViewExtension,addon:i,instance:i})}if(this.sharedService.gridOptions.enableRowMoveManager&&this.rowMoveManagerExtension&&this.rowMoveManagerExtension.register){i=this.rowMoveManagerExtension.register();this._extensionList.push({name:e.ExtensionName.rowMoveManager,"class":this.rowMoveManagerExtension,addon:i,instance:i})}if(this.sharedService.gridOptions.registerPlugins!==undefined)if(Array.isArray(this.sharedService.gridOptions.registerPlugins))this.sharedService.gridOptions.registerPlugins.forEach((function(i){var r=t.sharedService.grid.registerPlugin(i);t._extensionList.push({name:e.ExtensionName.noname,"class":null,addon:r,instance:r})}));else{this.sharedService.grid.registerPlugin(this.sharedService.gridOptions.registerPlugins);var o=this.sharedService.gridOptions.registerPlugins;i=this.sharedService.grid.registerPlugin(o);this._extensionList.push({name:e.ExtensionName.noname,"class":null,addon:i,instance:i})}}},i.prototype.createExtensionsBeforeGridCreation=function(t,i){if(i.enableCheckboxSelector&&!this.getCreatedExtensionByName(e.ExtensionName.checkboxSelector)){var r=this.checkboxSelectorExtension.create(t,i);this._extensionCreatedList.push({name:e.ExtensionName.checkboxSelector,instance:r})}if(i.enableRowDetailView&&!this.getCreatedExtensionByName(e.ExtensionName.rowDetailView)){var n=this.rowDetailViewExtension.create(t,i);this._extensionCreatedList.push({name:e.ExtensionName.rowDetailView,instance:n})}if(i.enableDraggableGrouping&&!this.getCreatedExtensionByName(e.ExtensionName.rowDetailView)){var o=this.draggableGroupingExtension.create(i);i.enableColumnReorder=o.getSetupColumnReorder,this._extensionCreatedList.push({name:e.ExtensionName.draggableGrouping,instance:o})}},i.prototype.hideColumn=function(e){if(this.sharedService&&this.sharedService.grid&&this.sharedService.grid.getColumns&&this.sharedService.grid.setColumns){var t=this.sharedService.grid.getColumnIndex(e.id);this.sharedService.visibleColumns=this.removeColumnByIndex(this.sharedService.grid.getColumns(),t),this.sharedService.grid.setColumns(this.sharedService.visibleColumns)}},i.prototype.refreshBackendDataset=function(e){this.gridMenuExtension.refreshBackendDataset(e)},i.prototype.removeColumnByIndex=function(e,t){return Array.isArray(e)?e.filter((function(e,i){return t!==i})):e},i.prototype.translateCellMenu=function(){this.cellMenuExtension&&this.cellMenuExtension.translateCellMenu&&this.cellMenuExtension.translateCellMenu()},i.prototype.translateColumnPicker=function(){this.columnPickerExtension&&this.columnPickerExtension.translateColumnPicker&&this.columnPickerExtension.translateColumnPicker()},i.prototype.translateContextMenu=function(){this.contextMenuExtension&&this.contextMenuExtension.translateContextMenu&&this.contextMenuExtension.translateContextMenu()},i.prototype.translateGridMenu=function(){this.gridMenuExtension&&this.gridMenuExtension.translateGridMenu&&this.gridMenuExtension.translateGridMenu()},i.prototype.translateHeaderMenu=function(){this.headerMenuExtension&&this.headerMenuExtension.translateHeaderMenu&&this.headerMenuExtension.translateHeaderMenu()},i.prototype.translateColumnHeaders=function(e,t){if(this.sharedService&&this.sharedService.gridOptions&&this.sharedService.gridOptions.enableTranslate&&(!this.translate||!this.translate.instant))throw new Error('[Angular-Slickgrid] requires "ngx-translate" to be installed and configured when the grid option "enableTranslate" is enabled.');e&&this.translate.use(e);var i=t;i||(i=this.sharedService.columnDefinitions),this.translateItems(i,"headerKey","name"),this.translateItems(this.sharedService.allColumns,"headerKey","name"),this.translateItems(i,"nameKey","name"),this.translateItems(this.sharedService.allColumns,"nameKey","name"),this.renderColumnHeaders(i),this.gridMenuExtension.translateGridMenu()},i.prototype.renderColumnHeaders=function(t){var i=t;if(i||(i=this.sharedService.columnDefinitions),Array.isArray(i)&&this.sharedService.grid&&this.sharedService.grid.setColumns&&(i.length>this.sharedService.allColumns.length&&(this.sharedService.allColumns=i),this.sharedService.grid.setColumns(i)),this.sharedService.gridOptions.enableColumnPicker){this.columnPickerExtension.dispose();var r=this.columnPickerExtension.register();(n=this.getExtensionByName(e.ExtensionName.columnPicker))&&(n.addon=r,n.instance=r)}if(this.sharedService.gridOptions.enableGridMenu){this.gridMenuExtension.dispose();var n;r=this.gridMenuExtension.register();(n=this.getExtensionByName(e.ExtensionName.gridMenu))&&(n.addon=r,n.instance=r)}},i.prototype.getCreatedExtensionByName=function(e){return Array.isArray(this._extensionCreatedList)&&this._extensionCreatedList.find((function(t){return t.name===e}))},i.prototype.translateItems=function(e,t,i){var r,n;if(this.sharedService.gridOptions&&this.sharedService.gridOptions.enableTranslate&&(!this.translate||!this.translate.instant))throw new Error('[Angular-Slickgrid] requires "ngx-translate" to be installed and configured when the grid option "enableTranslate" is enabled.');if(Array.isArray(e))try{for(var o=j(e),s=o.next();!s.done;s=o.next()){var a=s.value;a[t]&&(a[i]=this.translate&&this.translate.currentLang&&this.translate.instant(a[t]))}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=o["return"])&&n.call(o)}finally{if(r)throw r.error}}},i=N([t.Injectable(),R(15,t.Optional()),V("design:paramtypes",[$e,Le,je,He,Be,Ue,ze,At,Dt,It,Ft,Mt,Nt,Rt,Ve,n.TranslateService])],i)}(),Gt=function(){function e(e,t){if(this.queryFnName=e,this.head=[],"string"==typeof t)this.alias=t;else if("object"==typeof t)this.filter(t);else{if(t===undefined&&2===arguments.length)throw new TypeError('You have passed undefined as Second argument to "Query"');if(t!==undefined)throw new TypeError('Second argument to "Query" should be an alias name(String) or filter arguments(Object). What was passed is: '+t)}}return e.prototype.filter=function(e){var t,i;try{for(var r=j(Object.keys(e)),n=r.next();!n.done;n=r.next()){var o=n.value;if("function"!=typeof e[o]){var s=this.getGraphQLValue(e[o]);"{}"!==s&&this.head.push(o+":"+s)}}}catch(a){t={error:a}}finally{try{n&&!n.done&&(i=r["return"])&&i.call(r)}finally{if(t)throw t.error}}return this},e.prototype.find=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!e||!Array.isArray(e)||0===e.length)throw new TypeError("find value can not be >>falsy<<");var i=1===e.length&&Array.isArray(e[0])?e[0]:e;return this.body=this.parceFind(i),this},e.prototype.setAlias=function(e){this.alias=e},e.prototype.toString=function(){if(this.body===undefined)throw new ReferenceError("return properties are not defined. use the 'find' function to defined them");return(this.alias?this.alias+":":"")+" "+this.queryFnName+" "+(this.head.length>0?"("+this.head.join(",")+")":"")+"  { "+this.body+" }"},e.prototype.parceFind=function(t){return t.map((function(i,r){var n=t[r];if(n instanceof e)return n.toString();if(Array.isArray(n)||"object"!=typeof n){if("string"==typeof n)return n;throw new RangeError("cannot handle Find value of "+n)}var o=Object.keys(n);if(1!==o.length)throw new RangeError("Alias objects should only have one value. was passed: "+JSON.stringify(n));var s=o[0],a=n[s];return Array.isArray(a)?new e(s).find(a):s+" : "+a+" "})).join(",")},e.prototype.getGraphQLValue=function(e){var t=this;return"string"==typeof e?e=JSON.stringify(e):Array.isArray(e)?e="["+(e=e.map((function(e){return t.getGraphQLValue(e)})).join())+"]":e instanceof Date?e=JSON.stringify(e):null!==e&&"object"==typeof e&&(e=this.objectToString(e)),e},e.prototype.objectToString=function(e){var t,i,r=[];try{for(var n=j(Object.keys(e)),o=n.next();!o.done;o=n.next()){var s=o.value;"function"!=typeof e[s]&&r.push(s+":"+this.getGraphQLValue(e[s]))}}catch(a){t={error:a}}finally{try{o&&!o.done&&(i=n["return"])&&i.call(n)}finally{if(t)throw t.error}}return"{"+r.join()+"}"},e}(),$t=function(){function t(){this._currentFilters=[],this._currentSorters=[],this._datasetIdPropName="id",this.defaultPaginationOptions={first:25,offset:0}}return Object.defineProperty(t.prototype,"columnDefinitions",{get:function(){return this._columnDefinitions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_gridOptions",{get:function(){return this._grid&&this._grid.getOptions?this._grid.getOptions():{}},enumerable:!0,configurable:!0}),t.prototype.init=function(e,t,i){this._grid=i,this.options=e||{datasetName:"",columnDefinitions:[]},this.pagination=t,this._datasetIdPropName=this._gridOptions.datasetIdPropertyName||"id",i&&i.getColumns&&(this._columnDefinitions=e&&e.columnDefinitions||i.getColumns())},t.prototype.buildQuery=function(){var e,t,i,r;if(!this.options||!this.options.datasetName||!this._columnDefinitions&&!Array.isArray(this.options.columnDefinitions))throw new Error('GraphQL Service requires the "datasetName" property to properly build the GraphQL query');var n=this._columnDefinitions||this.options.columnDefinitions;n=n.filter((function(e){return!e.excludeFromQuery}));var o=new Gt("query"),s=new Gt(this.options.datasetName),a=new Gt("nodes"),l=[];if(n&&Array.isArray(n))try{for(var d=j(n),c=d.next();!c.done;c=d.next()){var u=c.value;l.push(u.field),u.fields&&l.push.apply(l,B(u.fields))}}catch(S){e={error:S}}finally{try{c&&!c.done&&(t=d["return"])&&t.call(d)}finally{if(e)throw e.error}}-1===l.indexOf(this._datasetIdPropName)&&l.unshift(this._datasetIdPropName);var h=this.buildFilterQuery(l),p=[];if(!1!==this._gridOptions.enablePagination){if(this.options.isWithCursor){var m=new Gt("edges"),f=new Gt("pageInfo");f.find("hasNextPage","hasPreviousPage","endCursor","startCursor"),a.find(h),m.find(["cursor"]),p=["totalCount",a,f,m]}else a.find(h),p=["totalCount",a];s.find(p)}else s.find(h);var g={};if(!1!==this._gridOptions.enablePagination&&(g=M({},this.options.paginationOptions,{first:(this.options.paginationOptions&&this.options.paginationOptions.first?this.options.paginationOptions.first:this.pagination&&this.pagination.pageSize?this.pagination.pageSize:null)||this.defaultPaginationOptions.first}),this.options.isWithCursor||(g.offset=this.options.paginationOptions&&this.options.paginationOptions.hasOwnProperty("offset")?+this.options.paginationOptions.offset:0)),this.options.sortingOptions&&Array.isArray(this.options.sortingOptions)&&this.options.sortingOptions.length>0&&(g.orderBy=this.options.sortingOptions),this.options.filteringOptions&&Array.isArray(this.options.filteringOptions)&&this.options.filteringOptions.length>0&&(g.filterBy=this.options.filteringOptions),this.options.addLocaleIntoQuery&&(g.locale=this._gridOptions&&this._gridOptions.i18n&&this._gridOptions.i18n.currentLang||this._gridOptions.locale||"en"),this.options.extraQueryArguments)try{for(var y=j(this.options.extraQueryArguments),v=y.next();!v.done;v=y.next()){var b=v.value;g[b.field]=b.value}}catch(_){i={error:_}}finally{try{v&&!v.done&&(r=y["return"])&&r.call(y)}finally{if(i)throw i.error}}s.filter(g),o.find(s);return this.trimDoubleQuotesOnEnumField(o.toString(),["direction:","field:","operator:"],this.options.keepArgumentFieldDoubleQuotes||!1)},t.prototype.buildFilterQuery=function(e){var t=function(e,i){void 0===e&&(e={});var r=i.shift();return e[r]=i.length?t(e[r],i):null,e},i=e.reduce((function(e,i){return t(e,i.split("."))}),{});return JSON.stringify(i).replace(/\"|\:|null/g,"").replace(/^\{/,"").replace(/\}$/,"")},t.prototype.clearFilters=function(){this._currentFilters=[],this.updateOptions({filteringOptions:[]})},t.prototype.clearSorters=function(){this._currentSorters=[],this.updateOptions({sortingOptions:[]})},t.prototype.getInitPaginationOptions=function(){var e=this.pagination?this.pagination.pageSize:25;return this.options&&this.options.isWithCursor?{first:e}:{first:e,offset:0}},t.prototype.getDatasetName=function(){return this.options.datasetName||""},t.prototype.getCurrentFilters=function(){return this._currentFilters},t.prototype.getCurrentPagination=function(){return this._currentPagination},t.prototype.getCurrentSorters=function(){return this._currentSorters},t.prototype.resetPaginationOptions=function(){var e;this.options&&this.options.isWithCursor?e={after:"",before:undefined,last:undefined}:(e=this.options&&this.options.paginationOptions||this.getInitPaginationOptions()).offset=0,this._currentPagination={pageNumber:1,pageSize:e.first||20},this.updateOptions({paginationOptions:e})},t.prototype.updateOptions=function(e){this.options=M({},this.options,e)},t.prototype.processOnFilterChanged=function(e,t){if(this._gridOptions.backendServiceApi===undefined)throw new Error('Something went wrong in the GraphqlService, "backendServiceApi" is not initialized');if(this._currentFilters=this.castFilterToColumnFilters(t.columnFilters),!t||!t.grid)throw new Error('Something went wrong when trying create the GraphQL Backend Service, it seems that "args" is not populated correctly');return this.updateFilters(t.columnFilters,!1),this.resetPaginationOptions(),this.buildQuery()},t.prototype.processOnPaginationChanged=function(e,t){var i=+(t.pageSize||(this.pagination?this.pagination.pageSize:20));return this.updatePagination(t.newPage,i),this.buildQuery()},t.prototype.processOnSortChanged=function(e,t){var i=t.multiColumnSort?t.sortCols:new Array({sortCol:t.sortCol,sortAsc:t.sortAsc});return this.updateSorters(i),this.buildQuery()},t.prototype.updateFilters=function(t,i){var r,n=[];i&&(this._currentFilters=this.castFilterToColumnFilters(t));var o=function(o){if(t.hasOwnProperty(o)){var a=t[o],l=void 0;if(!(l=i&&Array.isArray(s._columnDefinitions)?s._columnDefinitions.find((function(e){return e.id===a.columnId})):a.columnDef))throw new Error("[GraphQL Service]: Something went wrong in trying to get the column definition of the specified filter (or preset filters). Did you make a typo on the filter columnId?");var d=l.queryFieldFilter||l.queryField||l.field||l.name||"",c=a&&a.searchTerms||[],u=Array.isArray(c)&&1===c.length?c[0]:"";if(void 0===u&&(u=""),!d)throw new Error('GraphQL filter could not find the field name to query the search, your column definition must include a valid "field" or "name" (optionally you can also use the "queryfield" or "queryFieldFilter").');var h=(u=""+u).match(/^([<>!=\*]{0,2})(.*[^<>!=\*])([\*]?)$/),p=a.operator||(h?h[1]:"");r=h?h[2]:"";var m=h?h[3]:"*z"===p?"*":"";if(d&&""===r&&0===c.length)return"continue";if(Array.isArray(c)&&1===c.length&&"string"==typeof c[0]&&c[0].indexOf("..")>0&&(c=c[0].split(".."),p||(p=e.OperatorType.rangeExclusive)),"string"==typeof r&&(r=r.replace("'","''"),"*"!==p&&"a*"!==p&&"*z"!==p&&"*"!==m||(p="*"===p||"*z"===p?"EndsWith":"StartsWith")),!p&&l.filter&&(p=l.filter.operator),c&&c.length>1&&("IN"===p||"NIN"===p||"NOTIN"===p||"NOT IN"===p||"NOT_IN"===p))r=c.join(",");else if(c&&2===c.length&&(!p||p===e.OperatorType.rangeExclusive||p===e.OperatorType.rangeInclusive))return p||(p=e.OperatorType.rangeExclusive),n.push({field:d,operator:p===e.OperatorType.rangeInclusive?"GE":"GT",value:c[0]}),n.push({field:d,operator:p===e.OperatorType.rangeInclusive?"LE":"LT",value:c[1]}),"continue";p||(p=ge(l.type||e.FieldType.string)),n.push({field:d,operator:me(p),value:r})}},s=this;for(var a in t)o(a);this.updateOptions({filteringOptions:n})},t.prototype.updatePagination=function(e,t){var i;this._currentPagination={pageNumber:e,pageSize:t},i=this.options&&this.options.isWithCursor?{first:t}:{first:t,offset:e>1?(e-1)*t:0},!this._gridOptions||!this._gridOptions.enablePagination&&this._gridOptions.hasOwnProperty("enablePagination")||this.updateOptions({paginationOptions:i})},t.prototype.updateSorters=function(t,i){var r,n,o=this,s=[],a=[];if(!t&&i){(s=i).forEach((function(e){return e.direction=e.direction.toUpperCase()}));var l=s.map((function(t){var i=o._columnDefinitions.find((function(e){return e.id===t.columnId}));return a.push({field:i?(i.queryFieldSorter||i.queryField||i.field)+"":t.columnId+"",direction:t.direction}),i?{columnId:t.columnId,sortAsc:t.direction.toUpperCase()===e.SortDirection.ASC}:null}));Array.isArray(l)&&this._grid.setSortColumns(l.filter((function(e){return e})))}else if(t&&!i&&Array.isArray(t)&&t.length>0)try{for(var d=j(t),c=d.next();!c.done;c=d.next()){var u=c.value;if(u&&u.sortCol){s.push({columnId:u.sortCol.id+"",direction:u.sortAsc?e.SortDirection.ASC:e.SortDirection.DESC});var h=(u.sortCol.queryFieldSorter||u.sortCol.queryField||u.sortCol.field||"")+"";h&&a.push({field:h,direction:u.sortAsc?e.SortDirection.ASC:e.SortDirection.DESC})}}}catch(p){r={error:p}}finally{try{c&&!c.done&&(n=d["return"])&&n.call(d)}finally{if(r)throw r.error}}this._currentSorters=s,this.updateOptions({sortingOptions:a})},t.prototype.trimDoubleQuotesOnEnumField=function(e,t,i){var r=t.join('s?((field:s*)?".*?")|'),n=new RegExp(r+='s?((field:s*)?".*?")',"g");return e.replace(n,(function(e,t,r){var n=!0;return e.startsWith("field:")&&i&&(n=!1),n?e.replace(/"/g,""):e}))},t.prototype.castFilterToColumnFilters=function(e){var t="object"==typeof e?Object.keys(e).map((function(t){return e[t]})):e;return Array.isArray(t)?t.map((function(e){var t={columnId:e.columnId||""};return e.operator&&(t.operator=e.operator),Array.isArray(e.searchTerms)&&(t.searchTerms=e.searchTerms),t})):[]},t}(),Lt=function(){function t(){this._odataOptions={filterQueue:[],orderBy:""},this._defaultSortBy="",this._columnFilters={}}return t.prototype.buildQuery=function(){if(!this._odataOptions)throw new Error('Odata Service requires certain options like "top" for it to work');this._odataOptions.filterQueue=[];var e=[];if(!0===this._odataOptions.enableCount){var t=this._odataOptions.version>=4?"$count=true":"$inlinecount=allpages";e.push(t)}if(this._odataOptions.top&&e.push("$top="+this._odataOptions.top),this._odataOptions.skip&&e.push("$skip="+this._odataOptions.skip),this._odataOptions.orderBy){var i="";i=Array.isArray(this._odataOptions.orderBy)?this._odataOptions.orderBy.join(","):this._odataOptions.orderBy,e.push("$orderby="+i)}if(this._odataOptions.filterBy||this._odataOptions.filter){var r=this._odataOptions.filter||this._odataOptions.filterBy;if(r){this._filterCount=1,this._odataOptions.filterQueue=[];var n=r;Array.isArray(r)&&(this._filterCount=r.length,n=r.join(" "+(this._odataOptions.filterBySeparator||"and")+" ")),"string"==typeof n&&("("!==n[0]||")"!==n.slice(-1)?this.addToFilterQueueWhenNotExists("("+n+")"):this.addToFilterQueueWhenNotExists(n))}}if(this._odataOptions.filterQueue.length>0){var o=this._odataOptions.filterQueue.join(" "+(this._odataOptions.filterBySeparator||"and")+" ");this._odataOptions.filter=o,e.push("$filter="+o)}return e.join("&")},t.prototype.getFilterCount=function(){return this._filterCount},Object.defineProperty(t.prototype,"columnFilters",{get:function(){return this._columnFilters},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._odataOptions},set:function(e){this._odataOptions=e},enumerable:!0,configurable:!0}),t.prototype.removeColumnFilter=function(e){this._columnFilters&&this._columnFilters.hasOwnProperty(e)&&delete this._columnFilters[e]},t.prototype.saveColumnFilter=function(e,t,i){this._columnFilters[e]={search:i,value:t}},t.prototype.updateOptions=function(t){var i,r;try{for(var n=j(Object.keys(t)),o=n.next();!o.done;o=n.next()){var s=o.value;if(t.hasOwnProperty(s)&&(this._odataOptions[s]=t[s]),"orderBy"===s||"sortBy"===s){var a=t[s];this._odataOptions.caseType===e.CaseType.pascalCase&&(Array.isArray(a)?a.forEach((function(e,t,i){i[t]=Oe(e)})):a=Oe(t[s])),this._odataOptions.orderBy=a,this._defaultSortBy=a}}}catch(l){i={error:l}}finally{try{o&&!o.done&&(r=n["return"])&&r.call(n)}finally{if(i)throw i.error}}},t.prototype.addToFilterQueueWhenNotExists=function(e){this._odataOptions.filterQueue&&-1===this._odataOptions.filterQueue.indexOf(e)&&this._odataOptions.filterQueue.push(e)},t}(),jt=function(){function i(){this._currentFilters=[],this._currentSorters=[],this.defaultOptions={top:25,orderBy:"",caseType:e.CaseType.pascalCase},this._odataService=new Lt}return Object.defineProperty(i.prototype,"columnDefinitions",{get:function(){return this._columnDefinitions},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"odataService",{get:function(){return this._odataService},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_gridOptions",{get:function(){return this._grid&&this._grid.getOptions?this._grid.getOptions():{}},enumerable:!0,configurable:!0}),i.prototype.init=function(e,t,i){this._grid=i;var r=M({},this.defaultOptions,e);if(this._gridOptions&&!this._gridOptions.enablePagination)this._odataService.options=M({},r,{top:null}),this._currentPagination=null;else{var n=t&&t.pageSize?t.pageSize:this.defaultOptions.top;this._odataService.options=M({},r,{top:n}),this._currentPagination={pageNumber:1,pageSize:this._odataService.options.top||this.defaultOptions.top||20}}this.options=this._odataService.options,this.pagination=t,i&&i.getColumns&&(this._columnDefinitions=e&&e.columnDefinitions||i.getColumns(),this._columnDefinitions=this._columnDefinitions.filter((function(e){return!e.excludeFromQuery})))},i.prototype.buildQuery=function(){return this._odataService.buildQuery()},i.prototype.clearFilters=function(){this._currentFilters=[],this.updateFilters([])},i.prototype.clearSorters=function(){this._currentSorters=[],this.updateSorters([])},i.prototype.updateOptions=function(e){this.options=M({},this.options,e),this._odataService.options=this.options},i.prototype.removeColumnFilter=function(e){this._odataService.removeColumnFilter(e)},i.prototype.getCurrentFilters=function(){return this._currentFilters},i.prototype.getCurrentPagination=function(){return this._currentPagination},i.prototype.getCurrentSorters=function(){return this._currentSorters},i.prototype.mapOdataOperator=function(e){var t="";switch(e){case"<":t="lt";break;case"<=":t="le";break;case">":t="gt";break;case">=":t="ge";break;case"<>":case"!=":t="ne";break;case"=":case"==":default:t="eq"}return t},i.prototype.resetPaginationOptions=function(){this._odataService.updateOptions({skip:0})},i.prototype.saveColumnFilter=function(e,t,i){this._odataService.saveColumnFilter(e,t,i)},i.prototype.processOnFilterChanged=function(e,t){if(this._gridOptions.backendServiceApi===undefined)throw new Error('Something went wrong in the GridOdataService, "backendServiceApi" is not initialized');if(this._currentFilters=this.castFilterToColumnFilters(t.columnFilters),!t||!t.grid)throw new Error('Something went wrong when trying create the GridOdataService, it seems that "args" is not populated correctly');return this.updateFilters(t.columnFilters),this.resetPaginationOptions(),this._odataService.buildQuery()},i.prototype.processOnPaginationChanged=function(e,t){var i=+(t.pageSize||(this.pagination?this.pagination.pageSize:20));return this.updatePagination(t.newPage,i),this._odataService.buildQuery()},i.prototype.processOnSortChanged=function(e,t){var i=t.multiColumnSort?t.sortCols:new Array({sortCol:t.sortCol,sortAsc:t.sortAsc});return this.updateSorters(i),this._odataService.buildQuery()},i.prototype.updateFilters=function(t,i){var r="",n=[],o=this._odataService&&this._odataService.options&&this._odataService.options.version||2;i&&(this._currentFilters=this.castFilterToColumnFilters(t));var s=function(s){if(t.hasOwnProperty(s)){var l=t[s],d=void 0;if(!(d=i&&Array.isArray(a._columnDefinitions)?a._columnDefinitions.find((function(e){return e.id===l.columnId})):l.columnDef))throw new Error("[GridOData Service]: Something went wrong in trying to get the column definition of the specified filter (or preset filters). Did you make a typo on the filter columnId?");var c=d.queryFieldFilter||d.queryField||d.field||d.name||"",u=d.type||e.FieldType.string,h=(l?l.searchTerms:null)||[],p=Array.isArray(h)&&1===h.length?h[0]:"";if(void 0===p&&(p=""),!c)throw new Error('GridOData filter could not find the field name to query the search, your column definition must include a valid "field" or "name" (optionally you can also use the "queryfield" or "queryFieldFilter").');var m=(p=""+p).match(/^([<>!=\*]{0,2})(.*[^<>!=\*])([\*]?)$/),f=l.operator||(m?m[1]:""),g=m?m[2]:"",y=m?m[3]:"*z"===f?"*":"",v=l.bypassBackendQuery||!1;if(c&&""===g&&h.length<=1)return a.removeColumnFilter(c),"continue";if(Array.isArray(h)&&1===h.length&&"string"==typeof h[0]&&h[0].indexOf("..")>0&&(h=h[0].split(".."),f||(f=e.OperatorType.rangeExclusive)),g=g.replace("'","''"),g=encodeURIComponent(g),!f&&d.filter&&(f=d.filter.operator),f||(f=ge(d.type||e.FieldType.string)),v)c&&a.saveColumnFilter(c,p,h);else{if(r="",a._odataService.options.caseType===e.CaseType.pascalCase&&(c=Oe(c||"")),u===e.FieldType.date)r=a.filterBySearchDate(c,f,h,o);else if(h&&h.length>1&&("IN"===f||"NIN"===f||"NOTIN"===f||"NOT IN"===f||"NOT_IN"===f)){var b=[];if("IN"===f){for(var S=0,_=h.length;S<_;S++)if(u===e.FieldType.string){var O=h[S].replace("'","''");b.push(c+" eq '"+O+"'")}else b.push(c+" eq "+h[S]);"string"==typeof(r=b.join(" or "))&&"("===r[0]&&")"===r.slice(-1)||(r="("+r+")")}else{for(var T=0,E=h.length;T<E;T++){O=h[T].replace("'","''");b.push(c+" ne '"+O+"'")}"string"==typeof(r=b.join(" and "))&&"("===r[0]&&")"===r.slice(-1)||(r="("+r+")")}}else"*"===f||"a*"===f||"*z"===f||"*"===y?r="*"===f||"*z"===f?"endswith("+c+", '"+g+"')":"startswith("+c+", '"+g+"')":u===e.FieldType.string?""===f||f===e.OperatorType.contains||f===e.OperatorType.notContains?(r=a.odataQueryVersionWrapper("substring",o,c,g),f===e.OperatorType.notContains&&(r="not "+r)):r=f===e.OperatorType.rangeExclusive||f===e.OperatorType.rangeInclusive?a.filterBySearchTermRange(c,f,h):c+" "+a.mapOdataOperator(f)+" '"+g+"'":f===e.OperatorType.rangeExclusive||f===e.OperatorType.rangeInclusive?r=a.filterBySearchTermRange(c,f,h):(g=u===e.FieldType.number||u===e.FieldType.boolean?g:"'"+g+"'",r=c+" "+a.mapOdataOperator(f)+" "+g);""!==r&&(n.push(r.trim()),a.saveColumnFilter(c||"",p,g))}}},a=this;for(var l in t)s(l);this._odataService.updateOptions({filter:n.length>0?n.join(" and "):"",skip:undefined})},i.prototype.updatePagination=function(e,t){this._currentPagination={pageNumber:e,pageSize:t},!this._gridOptions||!this._gridOptions.enablePagination&&this._gridOptions.hasOwnProperty("enablePagination")||this._odataService.updateOptions({top:t,skip:(e-1)*t})},i.prototype.updateSorters=function(t,i){var r,n,o=this,s=[],a=[];if(!t&&i){(s=i).forEach((function(e){return e.direction=e.direction.toLowerCase()}));var l=s.map((function(t){var i=o._columnDefinitions.find((function(e){return e.id===t.columnId}));return a.push({field:i?(i.queryFieldSorter||i.queryField||i.field)+"":t.columnId+"",direction:t.direction}),i?{columnId:t.columnId,sortAsc:t.direction.toUpperCase()===e.SortDirection.ASC}:null}));Array.isArray(l)&&this._grid.setSortColumns(l)}else if(t&&!i)if(t&&0===t.length);else if(t)try{for(var d=j(t),c=d.next();!c.done;c=d.next()){var u=c.value;if(u.sortCol){var h=(u.sortCol.queryFieldSorter||u.sortCol.queryField||u.sortCol.field)+"",p=(u.sortCol.field||u.sortCol.id)+"",m=(u.sortCol.queryFieldSorter||u.sortCol.queryField||u.sortCol.field||"")+"";this._odataService.options.caseType===e.CaseType.pascalCase&&(h=Oe(h),p=Oe(p),m=Oe(m)),""!==p&&s.push({columnId:p,direction:u.sortAsc?"asc":"desc"}),""!==m&&a.push({field:m,direction:u.sortAsc?e.SortDirection.ASC:e.SortDirection.DESC})}}}catch(g){r={error:g}}finally{try{c&&!c.done&&(n=d["return"])&&n.call(d)}finally{if(r)throw r.error}}s=s||[];var f=a.map((function(t){var i="";t&&t.field&&(i=(o._odataService.options.caseType===e.CaseType.pascalCase?Oe(t.field):t.field)+" "+(t&&t.direction&&t.direction.toLowerCase()||""));return i})).join(",");return this._odataService.updateOptions({orderBy:f}),this._currentSorters=s,this._odataService.buildQuery()},i.prototype.castFilterToColumnFilters=function(e){var t="object"==typeof e?Object.keys(e).map((function(t){return e[t]})):e;return Array.isArray(t)?t.map((function(e){var t={columnId:e.columnId||""};return e.operator&&(t.operator=e.operator),Array.isArray(e.searchTerms)&&(t.searchTerms=e.searchTerms),t})):[]},i.prototype.odataQueryVersionWrapper=function(e,t,i,r){var n="";switch(e){case"dateTime":n=t>=4?r:"DateTime'"+r+"'";break;case"substring":n=t>=4?"contains("+i+", '"+r+"')":"substringof('"+r+"', "+i+")"}return n},i.prototype.filterBySearchDate=function(t,i,r,n){var o,s="";if((Array.isArray(r)&&r.length>1&&(o=r,i!==e.OperatorType.rangeExclusive&&i!==e.OperatorType.rangeInclusive&&(i=this._gridOptions.defaultFilterRangeOperator)),!Array.isArray(o)&&Array.isArray(r)&&1===r.length&&r[0])&&(a=this.odataQueryVersionWrapper("dateTime",n,t,ve(r[0],!0))))return t+" "+this.mapOdataOperator(i)+" "+a;if(Array.isArray(o)&&2===o.length&&o[0]&&o[1]){var a=this.odataQueryVersionWrapper("dateTime",n,t,ve(o[0],!0)),l=this.odataQueryVersionWrapper("dateTime",n,t,ve(o[1],!0));a&&l&&(i===e.OperatorType.rangeInclusive?s="("+t+" ge "+a+" and "+t+" le "+l+")":i===e.OperatorType.rangeExclusive&&(s="("+t+" gt "+a+" and "+t+" lt "+l+")"))}return s},i.prototype.filterBySearchTermRange=function(t,i,r){var n="";return Array.isArray(r)&&2===r.length&&(i===e.OperatorType.rangeInclusive?n="("+t+" ge "+r[0]+" and "+t+" le "+r[1]+")":i===e.OperatorType.rangeExclusive&&(n="("+t+" gt "+r[0]+" and "+t+" lt "+r[1]+")")),n},i=N([t.Injectable(),V("design:paramtypes",[])],i)}(),Ht=function(){function e(){this._eventHandler=new Slick.EventHandler}return Object.defineProperty(e.prototype,"eventHandler",{get:function(){return this._eventHandler},enumerable:!0,configurable:!0}),e.prototype.bindOnCellChange=function(e,t){this._eventHandler.subscribe(e.onCellChange,(function(i,r){if(i&&r&&e&&r.cell!==undefined&&e.getColumns&&e.getDataItem){var n=e.getColumns()[r.cell];if("function"==typeof n.onCellChange){var o={row:r.row,cell:r.cell,dataView:t,grid:e,columnDef:n,dataContext:e.getDataItem(r.row)};n.onCellChange(i,o)}}}))},e.prototype.bindOnClick=function(e,t){this._eventHandler.subscribe(e.onClick,(function(i,r){if(i&&r&&e&&r.cell!==undefined&&e.getColumns&&e.getDataItem){var n=e&&e.getColumns&&e.getColumns()[r.cell],o=e&&e.getOptions&&e.getOptions()||{};if(o.enableCellNavigation&&(!o.editable||o.editable&&o.autoCommitEdit)&&e.setActiveCell(r.row,r.cell),"function"==typeof n.onCellClick){var s={row:r.row,cell:r.cell,dataView:t,grid:e,columnDef:n,dataContext:e.getDataItem(r.row)};n.onCellClick(i,s)}}}))},e.prototype.dispose=function(){this._eventHandler.unsubscribeAll()},e}(),Bt=u,Ut=function(){function r(e,t,r,n){this.extensionService=e,this.filterService=t,this.sharedService=r,this.sortService=n,this._columns=[],this._currentColumns=[],this._subscriptions=[],this._selectedRowDataContextIds=[],this._selectedFilteredRowDataContextIds=[],this._wasRecheckedAfterPageChange=!0,this.onGridStateChanged=new i.Subject,this._eventHandler=new Slick.EventHandler}return Object.defineProperty(r.prototype,"_gridOptions",{get:function(){return this._grid&&this._grid.getOptions?this._grid.getOptions():{}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"datasetIdPropName",{get:function(){return this._gridOptions.datasetIdPropertyName||"id"},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selectedRowDataContextIds",{get:function(){return this._selectedRowDataContextIds},set:function(e){this._selectedRowDataContextIds=e,this._selectedFilteredRowDataContextIds=e},enumerable:!0,configurable:!0}),r.prototype.init=function(e,t){this._grid=e,this._dataView=t,this.subscribeToAllGridChanges(e)},r.prototype.dispose=function(){this._eventHandler.unsubscribeAll(),this._subscriptions=Ce(this._subscriptions),this._currentColumns=[],this._columns=[]},r.prototype.getCurrentGridState=function(e){var t={columns:this.getCurrentColumns(),filters:this.getCurrentFilters(),sorters:this.getCurrentSorters()},i=this.getCurrentPagination();if(i&&(t.pagination=i),this.hasRowSelectionEnabled()){var r=this.getCurrentRowSelections(e&&e.requestRefreshRowFilteredRow);r&&(t.rowSelection=r)}return t},r.prototype.getColumns=function(){return this._columns},r.prototype.getAssociatedCurrentColumns=function(e){var t=[];return e&&Array.isArray(e)&&e.forEach((function(e,i){e&&e.id&&t.push({columnId:e.id,cssClass:e.cssClass||"",headerCssClass:e.headerCssClass||"",width:e.width||0})})),this._currentColumns=t,t},r.prototype.getAssociatedGridColumns=function(e,t){var i=[],r=e.getColumns();return t&&Array.isArray(t)&&t.forEach((function(e,t){var n=r.find((function(t){return t.id===e.columnId}));n&&n.id&&i.push(M({},n,{cssClass:e.cssClass,headerCssClass:e.headerCssClass,width:e.width}))})),this._columns=i,i},r.prototype.getCurrentColumns=function(){return this._currentColumns&&Array.isArray(this._currentColumns)&&this._currentColumns.length>0?this._currentColumns:this.getAssociatedCurrentColumns(this._grid.getColumns())},r.prototype.getCurrentFilters=function(){if(this._gridOptions&&this._gridOptions.backendServiceApi){var e=this._gridOptions.backendServiceApi.service;if(e&&e.getCurrentFilters)return e.getCurrentFilters()}else if(this.filterService&&this.filterService.getCurrentLocalFilters)return this.filterService.getCurrentLocalFilters();return null},r.prototype.getCurrentPagination=function(){if(this._gridOptions.enablePagination){if(!this._gridOptions||!this._gridOptions.backendServiceApi)return this.sharedService.currentPagination;var e=this._gridOptions.backendServiceApi.service;if(e&&e.getCurrentPagination)return e.getCurrentPagination()}return null},r.prototype.getCurrentRowSelections=function(e){if(void 0===e&&(e=!0),this._grid&&this._gridOptions&&this._dataView&&this.hasRowSelectionEnabled()&&this._grid.getSelectedRows&&this._dataView.mapRowsToIds){var t=this._dataView.mapIdsToRows(this._selectedRowDataContextIds||[]),i=this._selectedRowDataContextIds;return!0===e&&this.refreshFilteredRowSelections(),{gridRowIndexes:t,dataContextIds:i,filteredDataContextIds:this._selectedFilteredRowDataContextIds}}return null},r.prototype.getCurrentSorters=function(){if(this._gridOptions&&this._gridOptions.backendServiceApi){var e=this._gridOptions.backendServiceApi.service;if(e&&e.getCurrentSorters)return e.getCurrentSorters()}else if(this.sortService&&this.sortService.getCurrentLocalSorters)return this.sortService.getCurrentLocalSorters();return null},r.prototype.needToPreserveRowSelection=function(){var e=!1;if(this._gridOptions&&this._gridOptions.dataView&&this._gridOptions.dataView.hasOwnProperty("syncGridSelection")){var t=this._gridOptions.dataView.syncGridSelection;(e="boolean"==typeof t?this._gridOptions.dataView.syncGridSelection:t.preserveHidden)&&this._gridOptions.backendServiceApi&&this._gridOptions.dataView.hasOwnProperty("syncGridSelectionWithBackendService")&&(e=this._gridOptions.dataView.syncGridSelectionWithBackendService)}return e},r.prototype.resetColumns=function(t){var i=t||this._columns,r=this.getAssociatedCurrentColumns(i);this.onGridStateChanged.next({change:{newValues:r,type:e.GridStateType.columns},gridState:this.getCurrentGridState()})},r.prototype.resetRowSelectionWhenRequired=function(){if(!this.needToPreserveRowSelection()&&(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)){var t=this.extensionService&&this.extensionService.getExtensionByName&&this.extensionService.getExtensionByName(e.ExtensionName.rowSelection);t&&t.instance&&this._grid.setSelectedRows([])}},r.prototype.subscribeToAllGridChanges=function(t){var i=this;this._subscriptions.push(this.filterService.onFilterChanged.subscribe((function(t){i.resetRowSelectionWhenRequired(),i.onGridStateChanged.next({change:{newValues:t,type:e.GridStateType.filter},gridState:i.getCurrentGridState({requestRefreshRowFilteredRow:!i.hasRowSelectionEnabled()})}),i.hasRowSelectionEnabled()&&i.reEvaluateRowSelectionAfterFilterChange()}))),this._subscriptions.push(this.filterService.onFilterCleared.subscribe((function(){i.resetRowSelectionWhenRequired(),i.onGridStateChanged.next({change:{newValues:[],type:e.GridStateType.filter},gridState:i.getCurrentGridState()})}))),this._subscriptions.push(this.sortService.onSortChanged.subscribe((function(t){i.resetRowSelectionWhenRequired(),i.onGridStateChanged.next({change:{newValues:t,type:e.GridStateType.sorter},gridState:i.getCurrentGridState()})}))),this._subscriptions.push(this.sortService.onSortCleared.subscribe((function(){i.resetRowSelectionWhenRequired(),i.onGridStateChanged.next({change:{newValues:[],type:e.GridStateType.sorter},gridState:i.getCurrentGridState()})}))),this.bindExtensionAddonEventToGridStateChange(e.ExtensionName.columnPicker,"onColumnsChanged"),this.bindExtensionAddonEventToGridStateChange(e.ExtensionName.gridMenu,"onColumnsChanged"),this.bindSlickGridColumnChangeEventToGridStateChange("onColumnsReordered",t),this.bindSlickGridColumnChangeEventToGridStateChange("onColumnsResized",t),(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)&&this.bindSlickGridRowSelectionToGridStateChange(),this._subscriptions.push(this.sharedService.onColumnsChanged.subscribe((function(t){var r=i.getAssociatedCurrentColumns(t);i.onGridStateChanged.next({change:{newValues:r,type:e.GridStateType.columns},gridState:i.getCurrentGridState()})})))},r.prototype.bindExtensionAddonEventToGridStateChange=function(t,i){var r=this,n=this.extensionService&&this.extensionService.getExtensionByName&&this.extensionService.getExtensionByName(t),o=n&&n.instance&&n.instance[i];o&&o.subscribe&&this._eventHandler.subscribe(o,(function(t,i){var n=i&&i.columns,o=r.getAssociatedCurrentColumns(n);r.onGridStateChanged.next({change:{newValues:o,type:e.GridStateType.columns},gridState:r.getCurrentGridState()})}))},r.prototype.bindSlickGridColumnChangeEventToGridStateChange=function(t,i){var r=this,n=i&&i[t];n&&n.subscribe&&this._eventHandler.subscribe(n,(function(){var t=i.getColumns(),n=r.getAssociatedCurrentColumns(t);r.onGridStateChanged.next({change:{newValues:n,type:e.GridStateType.columns},gridState:r.getCurrentGridState()})}))},r.prototype.bindSlickGridRowSelectionToGridStateChange=function(){var t=this;this._grid&&this._gridOptions&&this._dataView&&(this._eventHandler.subscribe(this._dataView.onBeforePagingInfoChanged,(function(){t._wasRecheckedAfterPageChange=!1})),this._eventHandler.subscribe(this._dataView.onPagingInfoChanged,(function(){setTimeout((function(){var e=t._dataView.mapIdsToRows(t._selectedRowDataContextIds||[]),i=t._grid.getSelectedRows();Bt(e,i)||t._grid.setSelectedRows(e)}))})),this._eventHandler.subscribe(this._grid.onSelectedRowsChanged,(function(i,r){if(Array.isArray(r.rows)&&Array.isArray(r.previousSelectedRows)){var n=r.rows,o=r.previousSelectedRows,s=n.filter((function(e){return o.indexOf(e)<0})),a=o.filter((function(e){return n.indexOf(e)<0}));if(t._wasRecheckedAfterPageChange&&a.length>0)(t._dataView.mapRowsToIds(a)||[]).forEach((function(e){t._selectedRowDataContextIds.splice(t._selectedRowDataContextIds.indexOf(e),1)}));if(s.length>0)(t._dataView.mapRowsToIds(s)||[]).forEach((function(e){-1===t._selectedRowDataContextIds.indexOf(e)&&t._selectedRowDataContextIds.push(e)}));t._wasRecheckedAfterPageChange=!0;var l=t._dataView.mapIdsToRows(t._selectedRowDataContextIds||[]),d=t._grid.getSelectedRows();Bt(l,d)||t._grid.setSelectedRows(l);var c=t.refreshFilteredRowSelections(),u={gridRowIndexes:t._grid.getSelectedRows(),dataContextIds:t._selectedRowDataContextIds,filteredDataContextIds:c};t.onGridStateChanged.next({change:{newValues:u,type:e.GridStateType.rowSelection},gridState:t.getCurrentGridState()})}})))},r.prototype.hasRowSelectionEnabled=function(){var e=this._grid.getSelectionModel();return(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)&&e},r.prototype.reEvaluateRowSelectionAfterFilterChange=function(){var t=this._grid.getSelectedRows(),i=this._selectedFilteredRowDataContextIds.slice(),r=this.refreshFilteredRowSelections();if(!Bt(this._selectedFilteredRowDataContextIds,i)){var n={gridRowIndexes:t,dataContextIds:this._selectedRowDataContextIds,filteredDataContextIds:r};this.onGridStateChanged.next({change:{newValues:n,type:e.GridStateType.rowSelection},gridState:this.getCurrentGridState({requestRefreshRowFilteredRow:!1})})}},r.prototype.refreshFilteredRowSelections=function(){var e=this,t=[],i=this._dataView.getFilteredItems()||[];Array.isArray(this._selectedRowDataContextIds)&&(t=B(this._selectedRowDataContextIds).filter((function(t){return i.findIndex((function(i){return i[e.datasetIdPropName]===t}))>-1})),this._selectedFilteredRowDataContextIds=t);return t},r=N([t.Injectable(),V("design:paramtypes",[Vt,xt,Ve,Pt])],r)}(),zt={triggerEvent:!0},Wt={highlightRow:!0,position:"top",resortGrid:!1,selectRow:!1,triggerEvent:!0},qt={highlightRow:!0,selectRow:!1,scrollRowIntoView:!1,triggerEvent:!0},Qt=function(){function e(e,t,r,n){this.extensionService=e,this.filterService=t,this.gridStateService=r,this.sortService=n,this.onItemAdded=new i.Subject,this.onItemDeleted=new i.Subject,this.onItemUpdated=new i.Subject,this.onItemUpserted=new i.Subject}return Object.defineProperty(e.prototype,"_gridOptions",{get:function(){return this._grid&&this._grid.getOptions?this._grid.getOptions():{}},enumerable:!0,configurable:!0}),e.prototype.init=function(e,t){this._grid=e,this._dataView=t},e.prototype.clearAllFiltersAndSorts=function(){this.sortService&&this.sortService.clearSorting&&this.sortService.clearSorting(!1),this.filterService&&this.filterService.clearFilters&&this.filterService.clearFilters()},e.prototype.getColumnFromEventArguments=function(e){if(!(e&&e.grid&&e.grid.getColumns&&e.grid.getDataItem))throw new Error("To get the column definition and data, we need to have these arguments passed as objects (row, cell, grid)");return{row:e.row,cell:e.cell,columnDef:e.grid.getColumns()[e.cell],dataContext:e.grid.getDataItem(e.row),dataView:this._dataView,grid:this._grid}},e.prototype.getDataItemByRowNumber=function(e){if(!this._grid||"function"!=typeof this._grid.getDataItem)throw new Error('We could not find SlickGrid Grid object or it\'s "getDataItem" method');return this._grid.getDataItem(e)},e.prototype.getItemRowMetadataToHighlight=function(e){var t=this;return function(i){var r=t._dataView.getItem(i),n={cssClasses:""};return"function"==typeof e&&(n=e(i)),n||(n={cssClasses:""}),r&&r._dirty&&(n.cssClasses=(n&&n.cssClasses||"")+" dirty"),r&&r.rowClass&&n&&(n.cssClasses+=" "+r.rowClass,n.cssClasses+=" row"+i),n}},e.prototype.highlightRow=function(e,t,i){var r=this;if(void 0===t&&(t=1500),void 0===i&&(i=300),!this._grid.getSelectionModel()&&Slick&&Slick.RowSelectionModel){var n=new Slick.RowSelectionModel(this._gridOptions.rowSelectionOptions||{});this._grid.setSelectionModel(n)}Array.isArray(e)?e.forEach((function(e){return r.highlightRowByMetadata(e,t,i)})):this.highlightRowByMetadata(e,t,i)},e.prototype.highlightRowByMetadata=function(e,t,i){var r=this;void 0===t&&(t=1500),void 0===i&&(i=300),this._dataView.getItemMetadata=this.getItemRowMetadataToHighlight(this._dataView.getItemMetadata);var n=this._dataView.getItem(e);n&&n.id&&(n.rowClass="highlight",this._dataView.updateItem(n.id,n),this.renderGrid(),clearTimeout(yt),yt=setTimeout((function(){n.rowClass="highlight-end",r._dataView.updateItem(n.id,n),r.renderGrid()}),i),setTimeout((function(){n&&n.id&&(delete n.rowClass,r._dataView.getIdxById(n.id)!==undefined&&(r._dataView.updateItem(n.id,n),r.renderGrid()))}),t+i))},e.prototype.getDataItemByRowIndex=function(e){if(!this._grid||"function"!=typeof this._grid.getDataItem)throw new Error('We could not find SlickGrid Grid object and/or "getDataItem" method');return this._grid.getDataItem(e)},e.prototype.getDataItemByRowIndexes=function(e){var t=this;if(!this._grid||"function"!=typeof this._grid.getDataItem)throw new Error('We could not find SlickGrid Grid object and/or "getDataItem" method');var i=[];return Array.isArray(e)&&e.forEach((function(e){i.push(t._grid.getDataItem(e))})),i},e.prototype.getSelectedRows=function(){if(!this._grid||"function"!=typeof this._grid.getSelectedRows)throw new Error('We could not find SlickGrid Grid object and/or "getSelectedRows" method');return this._grid.getSelectedRows()},e.prototype.getSelectedRowsDataItem=function(){if(!this._grid||"function"!=typeof this._grid.getSelectedRows)throw new Error('We could not find SlickGrid Grid object and/or "getSelectedRows" method');var e=this._grid.getSelectedRows();return this.getDataItemByRowIndexes(e)},e.prototype.setSelectedRow=function(e){this._grid&&this._grid.setSelectedRows&&this._grid.setSelectedRows([e])},e.prototype.setSelectedRows=function(e){this._grid&&this._grid.setSelectedRows&&this._grid.setSelectedRows(e)},e.prototype.renderGrid=function(){this._grid&&"function"==typeof this._grid.invalidate&&(this._grid.invalidate(),this._grid.render())},e.prototype.resetGrid=function(e){if(this._grid&&this._dataView){var t=this.extensionService.getAllColumns();Array.isArray(t)&&t.length>0&&(this._grid.setColumns(t),this._gridOptions&&this._gridOptions.enableAutoSizeColumns&&this._grid.autosizeColumns(),this.gridStateService.resetColumns(e))}this.filterService&&this.filterService.clearFilters&&this.filterService.clearFilters(),this.sortService&&this.sortService.clearSorting&&this.sortService.clearSorting()},e.prototype.addItemToDatagrid=function(e,t,i,r,n){return void 0===t&&(t=!0),void 0===i&&(i=!1),void 0===r&&(r=!0),void 0===n&&(n=!0),console.warn('[Angular-Slickgrid - GridService] please consider using the new "addItem" method since "addItemToDatagrid" will be deprecated in the future.'),this.addItem(e,{highlightRow:t,resortGrid:i,triggerEvent:r,selectRow:n})},e.prototype.addItemsToDatagrid=function(e,t,i,r,n){return void 0===t&&(t=!0),void 0===i&&(i=!1),void 0===r&&(r=!0),void 0===n&&(n=!0),console.warn('[Angular-Slickgrid - GridService] please consider using the new "addItems" method since "addItemsToDatagrid" will be deprecated in the future.'),this.addItems(e,{highlightRow:t,resortGrid:i,triggerEvent:r,selectRow:n})},e.prototype.addItem=function(e,t){if(t=M({},Wt,t),!this._grid||!this._gridOptions||!this._dataView)throw new Error("We could not find SlickGrid Grid, DataView objects");if(!e||!e.hasOwnProperty("id"))throw new Error('Adding an item requires the item to include an "id" property');t&&"bottom"===t.position?this._dataView.addItem(e):this._dataView.insertItem(0,e);var i=0;return t.resortGrid?(this._dataView.reSort(),i=this._dataView.getRowById(e.id)):(i=t&&"bottom"===t.position?this._dataView.getRowById(e.id):0,this._grid.scrollRowIntoView(i)),t.highlightRow&&this.highlightRow(i),t.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRow(i),t.triggerEvent&&this.onItemAdded.next(e),i},e.prototype.addItems=function(e,t){var i=this;t=M({},Wt,t);var r=[];return Array.isArray(e)?(e.forEach((function(e){return i.addItem(e,M({},t,{highlightRow:!1,resortGrid:!1,triggerEvent:!1,selectRow:!1}))})),t.resortGrid&&this._dataView.reSort(),t&&"bottom"===t.position?this._grid.navigateBottom():this._grid.navigateTop(),e.forEach((function(e){return r.push(i._dataView.getRowById(e.id))})),t.highlightRow&&this.highlightRow(r),t.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(r),t.triggerEvent&&this.onItemAdded.next(e),r):[this.addItem(e,t)]},e.prototype.deleteDataGridItem=function(e,t){void 0===t&&(t=!0),console.warn('[Angular-Slickgrid - GridService] please consider using the new "deleteItem" method since "deleteDataGridItem" will be deprecated in the future.'),this.deleteItem(e,{triggerEvent:t})},e.prototype.deleteDataGridItems=function(e,t){void 0===t&&(t=!0),console.warn('[Angular-Slickgrid - GridService] please consider using the new "deleteItems" method since "deleteDataGridItems" will be deprecated in the future.'),this.deleteItems(e,{triggerEvent:t})},e.prototype.deleteDataGridItemById=function(e,t){void 0===t&&(t=!0),console.warn('[Angular-Slickgrid - GridService] please consider using the new "deleteItemById" method since "deleteDataGridItemById" will be deprecated in the future.'),this.deleteItemById(e,{triggerEvent:t})},e.prototype.deleteDataGridItemByIds=function(e,t){void 0===t&&(t=!0),console.warn('[Angular-Slickgrid - GridService] please consider using the new "deleteItemByIds" method since "deleteDataGridItemByIds" will be deprecated in the future.'),this.deleteItemByIds(e,{triggerEvent:t})},e.prototype.deleteItem=function(e,t){if(t=M({},zt,t),!e||!e.hasOwnProperty("id"))throw new Error('Deleting an item requires the item to include an "id" property');return this.deleteItemById(e.id,t)},e.prototype.deleteItems=function(e,t){var i=this;if(t=M({},zt,t),!Array.isArray(e))return this.deleteItem(e,t),[e.id];var r=[];return e.forEach((function(e){e&&e.id!==undefined&&r.push(e.id),i.deleteItem(e,M({},t,{triggerEvent:!1}))})),t.triggerEvent&&this.onItemDeleted.next(e),r},e.prototype.deleteItemById=function(e,t){if(t=M({},zt,t),null===e||e===undefined)throw new Error('Cannot delete a row without a valid "id"');return!(this.gridStateService&&this.gridStateService.needToPreserveRowSelection()||!1)&&this._grid&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows([]),this._dataView.deleteItem(e),t.triggerEvent&&this.onItemDeleted.next(e),e},e.prototype.deleteItemByIds=function(e,t){if(t=M({},zt,t),Array.isArray(e)){for(var i=0;i<e.length;i++)null!==e[i]&&this.deleteItemById(e[i],{triggerEvent:!1});return t.triggerEvent&&this.onItemDeleted.next(e),e}return[]},e.prototype.updateDataGridItem=function(e,t,i,r){return void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===r&&(r=!0),console.warn('[Angular-Slickgrid - GridService] please consider using the new "updateItem" method since "updateDataGridItem" will be deprecated in the future.'),this.updateItem(e,{highlightRow:t,triggerEvent:i,selectRow:r})},e.prototype.updateDataGridItems=function(e,t,i,r){return void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===r&&(r=!0),console.warn('[Angular-Slickgrid - GridService] please consider using the new "updateItems" method since "updateDataGridItems" will be deprecated in the future.'),this.updateItems(e,{highlightRow:t,triggerEvent:i,selectRow:r})},e.prototype.updateDataGridItemById=function(e,t,i,r,n){return void 0===i&&(i=!0),void 0===r&&(r=!0),void 0===n&&(n=!0),console.warn('[Angular-Slickgrid - GridService] please consider using the new "updateItemById" method since "updateDataGridItemById" will be deprecated in the future.'),this.updateItemById(e,t,{highlightRow:i,triggerEvent:r,selectRow:n})},e.prototype.updateItem=function(e,t){t=M({},qt,t);var i=e&&e.hasOwnProperty("id")?e.id:undefined;if(i===undefined)throw new Error('Calling Update of an item requires the item to include an "id" property');return this.updateItemById(i,e,t)},e.prototype.updateItems=function(e,t){var i=this;if(t=M({},qt,t),!Array.isArray(e))return[this.updateItem(e,t)];var r=[];return e.forEach((function(e){r.push(i.updateItem(e,M({},t,{highlightRow:!1,selectRow:!1,triggerEvent:!1})))})),t.highlightRow&&this.highlightRow(r),t.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(r),t.triggerEvent&&this.onItemUpdated.next(e),r},e.prototype.updateItemById=function(e,t,i){if(i=M({},qt,i),e===undefined)throw new Error('Cannot update a row without a valid "id"');var r=this._dataView.getRowById(e);if(!t||r===undefined)throw new Error("The item to update in the grid was not found with id: "+e);return this._dataView.getIdxById(e)!==undefined&&(this._dataView.updateItem(e,t),this._grid.updateRow(r),i.scrollRowIntoView&&this._grid.scrollRowIntoView(r),i.highlightRow&&this.highlightRow(r),i.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRow(r),i.triggerEvent&&this.onItemUpdated.next(t)),r},e.prototype.upsertItem=function(e,t){t=M({},Wt,t);var i=e&&e.hasOwnProperty("id")?e.id:undefined;if(i===undefined)throw new Error('Calling Upsert of an item requires the item to include an "id" property');return this.upsertItemById(i,e,t)},e.prototype.upsertItems=function(e,t){var i=this;if(t=M({},Wt,t),!Array.isArray(e))return[this.upsertItem(e,t)];var r=[];e.forEach((function(e){r.push(i.upsertItem(e,M({},t,{highlightRow:!1,resortGrid:!1,selectRow:!1,triggerEvent:!1})))}));var n=r.map((function(e){return e.added!==undefined?e.added:e.updated}));if(t.highlightRow&&this.highlightRow(n),t.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(n),t.triggerEvent){this.onItemUpserted.next(e);var o=r.filter((function(e){return e.added!==undefined}));Array.isArray(o)&&o.length>0&&this.onItemAdded.next(o);var s=r.filter((function(e){return e.updated!==undefined}));Array.isArray(s)&&s.length>0&&this.onItemUpdated.next(s)}return r},e.prototype.upsertItemById=function(e,t,i){var r,n,o=!1;if(i=M({},Wt,i),e===undefined)throw new Error('Calling Upsert of an item requires the item to include a valid and unique "id" property');return this._dataView.getRowById(e)===undefined?(r=this.addItem(t,i),o=!0):(n=this.updateItem(t,{highlightRow:i.highlightRow,selectRow:i.selectRow,triggerEvent:i.triggerEvent}),o=!1),i.triggerEvent&&(this.onItemUpserted.next(t),o?this.onItemAdded.next(t):this.onItemUpdated.next(t)),{added:r,updated:n}},e=N([t.Injectable(),V("design:paramtypes",[Vt,xt,Ut,Pt])],e)}(),Xt=function(){function e(){this._resizePaused=!1,this.onGridAfterResize=new i.Subject,this.onGridBeforeResize=new i.Subject}return Object.defineProperty(e.prototype,"_gridOptions",{get:function(){return this._grid&&this._grid.getOptions?this._grid.getOptions():{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_gridUid",{get:function(){return this._grid&&this._grid.getUID?this._grid.getUID():this._gridOptions&&this._gridOptions.gridId},enumerable:!0,configurable:!0}),e.prototype.init=function(e,t){this._grid=e,t&&(this._fixedHeight=t.height,this._fixedWidth=t.width)},e.prototype.bindAutoResizeDataGrid=function(e){var t=this,i=$("#"+(this._gridOptions&&this._gridOptions.gridId?this._gridOptions.gridId:"grid1"));if(i===undefined||i.offset()===undefined)return null;this.resizeGrid(10,e),$(window).on("resize.grid."+this._gridUid,(function(i){t.onGridBeforeResize.next(i),t._resizePaused||t.resizeGrid(0,e)}))},e.prototype.calculateGridNewDimensions=function(e){var t=$("#"+e.gridId),i=e&&e.autoResize||{},r=i&&i.containerId?$("#"+i.containerId):$("#"+e.gridContainerId);if(!window||r===undefined||t===undefined||t.offset()===undefined)return null;var n=i&&i.bottomPadding?i.bottomPadding:20;n&&e.enablePagination&&(n+=35),n&&e.showCustomFooter&&(n+=e.customFooterOptions&&e.customFooterOptions.footerHeight||20);var o=0,s=0;if("container"===i.calculateAvailableSizeBy)o=r.height()||0;else{o=window.innerHeight||0;var a=t.offset();s=a!==undefined?a.top:0}var l=o-s-n,d=r.width()||window.innerWidth||0,c=i&&i.maxHeight||undefined,u=i&&i.minHeight||180,h=i&&i.maxWidth||undefined,p=i&&i.minWidth||300,m=l,f=i&&i.sidePadding?d-i.sidePadding:d;return m<u&&(m=u),c&&m>c&&(m=c),f<p&&(f=p),h&&f>h&&(f=h),{height:this._fixedHeight||m,width:this._fixedWidth||f}},e.prototype.dispose=function(){$(window).off("resize.grid."+this._gridUid)},e.prototype.compensateHorizontalScroll=function(e,t){var i=$("#"+t.gridId),r=e&&e.getScrollbarDimensions(),n=r&&r.width,o=ue();n<o&&i.width(i.width()+(o-n))},e.prototype.getLastResizeDimensions=function(){return this._lastDimensions},e.prototype.pauseResizer=function(e){this._resizePaused=e},e.prototype.resizeGrid=function(e,t){var i=this;if(void 0===e&&(e=10),!this._grid||!this._gridOptions)throw new Error('\n      Angular-Slickgrid resizer requires a valid Grid object and Grid Options defined.\n      You can fix this by setting your gridOption to use "enableAutoResize" or create an instance of the ResizerService by calling bindAutoResizeDataGrid()');return new Promise((function(r){(e=e||0)>0?(clearTimeout(i._timer),i._timer=setTimeout((function(){return r(i.resizeGridCallback(t))}),e)):r(i.resizeGridCallback(t))}))},e.prototype.resizeGridCallback=function(e){var t=this.resizeGridWithDimensions(e);return this.onGridAfterResize.next(t),t},e.prototype.resizeGridWithDimensions=function(e){var t=this.calculateGridNewDimensions(this._gridOptions),i=$("#"+this._gridOptions.gridId)||{},r=$("#"+this._gridOptions.gridContainerId)||{};if((e||t)&&i.length>0){var n=e&&e.height?e.height:t.height,o=e&&e.width?e.width:t.width;this._gridOptions.autoHeight||(i.height(n),r.height(n)),i.width(o),r.width(o),null===new RegExp("MSIE [6-8]").exec(navigator.userAgent)&&this._grid&&this._grid.resizeCanvas&&this._grid.resizeCanvas(),this._gridOptions&&this._gridOptions.enableAutoSizeColumns&&this._grid.autosizeColumns&&(this._gridUid&&$("."+this._gridUid).length>0&&this._grid.autosizeColumns(),this.compensateHorizontalScroll(this._grid,this._gridOptions)),this._lastDimensions={height:n,width:o},(this._gridOptions.enablePagination||this._gridOptions.backendServiceApi)&&(this._lastDimensions.heightWithPagination=n+35)}return this._lastDimensions},e}(),Kt=function(){function e(e,t){this.resizerService=e,this.translate=t,this._eventHandler=new Slick.EventHandler}return Object.defineProperty(e.prototype,"eventHandler",{get:function(){return this._eventHandler},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_gridOptions",{get:function(){return this._grid&&this._grid.getOptions?this._grid.getOptions():{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_columnDefinitions",{get:function(){return this._grid&&this._grid.getColumns?this._grid.getColumns():[]},enumerable:!0,configurable:!0}),e.prototype.init=function(e,t){var i=this;this._grid=e,e&&this._gridOptions&&this._gridOptions.createPreHeaderPanel&&(this._eventHandler.subscribe(e.onSort,(function(){return i.renderPreHeaderRowGroupingTitles()})),this._eventHandler.subscribe(e.onColumnsResized,(function(){return i.renderPreHeaderRowGroupingTitles()})),this._eventHandler.subscribe(e.onColumnsReordered,(function(){return i.renderPreHeaderRowGroupingTitles()})),this._eventHandler.subscribe(t.onRowCountChanged,(function(){return i.renderPreHeaderRowGroupingTitles()})),this.resizerService.onGridAfterResize.subscribe((function(){return i.renderPreHeaderRowGroupingTitles()})),this._gridOptions.enableTranslate&&this.translate.onLangChange.subscribe((function(){var e=i._grid.getColumns();i.translateItems(e,"columnGroupKey","columnGroup"),i._grid.setColumns(e),i.renderPreHeaderRowGroupingTitles()})),setTimeout((function(){return i.renderPreHeaderRowGroupingTitles()}),50))},e.prototype.dispose=function(){this._eventHandler.unsubscribeAll()},e.prototype.renderPreHeaderRowGroupingTitles=function(){if(this._gridOptions&&this._gridOptions.frozenColumn!==undefined&&this._gridOptions.frozenColumn>=0){var e=$(this._grid.getPreHeaderPanelLeft());this.renderHeaderGroups(e,0,this._gridOptions.frozenColumn+1),e=$(this._grid.getPreHeaderPanelRight()),this.renderHeaderGroups(e,this._gridOptions.frozenColumn+1,this._columnDefinitions.length)}else{e=$(this._grid.getPreHeaderPanel());this.renderHeaderGroups(e,0,this._columnDefinitions.length)}},e.prototype.renderHeaderGroups=function(e,t,i){e.empty().addClass("slick-header-columns").css("left","-1000px").width(this._grid.getHeadersWidth()),e.parent().addClass("slick-header");for(var r,n,o=this._grid.getHeaderColumnWidthDiff(),s="",a=0,l=t;l<i;l++)(r=this._columnDefinitions[l])&&(s===r.columnGroup&&l>0?(a+=r.width||0,n&&n.width&&n.width(a-o)):(a=r.width||0,n=$('<div class="ui-state-default slick-header-column" />').html('<span class="slick-column-name">'+(r.columnGroup||"")+"</span>").width(a-o).appendTo(e)),s=r.columnGroup||"")},e.prototype.translateItems=function(e,t,i){var r,n;if(Array.isArray(e))try{for(var o=j(e),s=o.next();!s.done;s=o.next()){var a=s.value;a[t]&&(a[i]=this.translate&&this.translate&&this.translate.instant&&this.translate.instant(a[t]))}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=o["return"])&&n.call(o)}finally{if(r)throw r.error}}},e=N([t.Injectable(),R(1,t.Optional()),V("design:paramtypes",[Xt,n.TranslateService])],e)}(),Yt=u,Zt=function(){function e(e,t,r){this.filterService=e,this.gridService=t,this.sharedService=r,this._initialized=!1,this._isLocalGrid=!0,this._dataFrom=1,this._dataTo=1,this._pageCount=1,this._pageNumber=1,this._totalItems=0,this._eventHandler=new Slick.EventHandler,this._subscriptions=[],this.onPaginationChanged=new i.Subject,this.onPaginationVisibilityChanged=new i.Subject}return Object.defineProperty(e.prototype,"paginationOptions",{get:function(){return this._paginationOptions},set:function(e){this._paginationOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"availablePageSizes",{get:function(){return this._availablePageSizes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataFrom",{get:function(){return this._dataFrom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataTo",{get:function(){return this._dataTo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemsPerPage",{get:function(){return this._itemsPerPage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageCount",{get:function(){return this._pageCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageNumber",{get:function(){return this._pageNumber},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalItems",{get:function(){return this._totalItems},set:function(e){this._totalItems=e,this._initialized&&this.refreshPagination()},enumerable:!0,configurable:!0}),e.prototype.init=function(e,t,i,r){var n=this;if(this._availablePageSizes=i.pageSizes,this.dataView=t,this.grid=e,this._backendServiceApi=r,this._paginationOptions=i,this._isLocalGrid=!r,this._pageNumber=i.pageNumber||1,r&&(!r.service||!r.process))throw new Error('BackendServiceApi requires the following 2 properties "process" and "service" to be defined.');this._isLocalGrid&&this.dataView&&(this.dataView.onPagingInfoChanged.subscribe((function(e,t){n._totalItems!==t.totalRows&&(n._totalItems=t.totalRows,n._paginationOptions.totalItems=n._totalItems,n.refreshPagination(!1,!1))})),t.setRefreshHints({isFilterUnchanged:!0}),t.setPagingOptions({pageSize:this.paginationOptions.pageSize,pageNum:this._pageNumber-1})),this._subscriptions.push(this.filterService.onFilterChanged.subscribe((function(){return n.resetPagination()}))),this._subscriptions.push(this.filterService.onFilterCleared.subscribe((function(){return n.resetPagination()}))),this.dataView&&(this._subscriptions.push(this.gridService.onItemAdded.subscribe((function(e){return n.processOnItemAddedOrRemoved(e,!0)}))),this._subscriptions.push(this.gridService.onItemDeleted.subscribe((function(e){return n.processOnItemAddedOrRemoved(e,!1)})))),this.refreshPagination(!1,!1),this._initialized=!0},e.prototype.dispose=function(){this._initialized=!1,this._eventHandler.unsubscribeAll(),this._subscriptions=Ce(this._subscriptions)},e.prototype.getCurrentPageNumber=function(){return this._pageNumber},e.prototype.getCurrentPagination=function(){return{pageNumber:this._pageNumber,pageSize:this._itemsPerPage,pageSizes:this._availablePageSizes}},e.prototype.getFullPagination=function(){return{pageCount:this._pageCount,pageNumber:this._pageNumber,pageSize:this._itemsPerPage,pageSizes:this._availablePageSizes,totalItems:this._totalItems,dataFrom:this._dataFrom,dataTo:this._dataTo}},e.prototype.getCurrentItemPerPage=function(){return this._itemsPerPage},e.prototype.changeItemPerPage=function(e,t){return this._pageNumber=1,this._pageCount=Math.ceil(this._totalItems/e),this._itemsPerPage=e,this.processOnPageChanged(this._pageNumber,t)},e.prototype.goToFirstPage=function(e){return this._pageNumber=1,this.processOnPageChanged(this._pageNumber,e)},e.prototype.goToLastPage=function(e){return this._pageNumber=this._pageCount||1,this.processOnPageChanged(this._pageNumber,e)},e.prototype.goToNextPage=function(e){return this._pageNumber<this._pageCount?(this._pageNumber++,this.processOnPageChanged(this._pageNumber,e)):new Promise((function(e){return e(!1)}))},e.prototype.goToPageNumber=function(e,t){var i=this._pageNumber;return e<1?this._pageNumber=1:e>this._pageCount?this._pageNumber=this._pageCount:this._pageNumber=e,this._pageNumber!==i?this.processOnPageChanged(this._pageNumber,t):new Promise((function(e){return e(!1)}))},e.prototype.goToPreviousPage=function(e){return this._pageNumber>1?(this._pageNumber--,this.processOnPageChanged(this._pageNumber,e)):new Promise((function(e){return e(!1)}))},e.prototype.refreshPagination=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!0);var i=M({},this.getCurrentPagination());if(this._paginationOptions){var r=this._paginationOptions;this._itemsPerPage||(this._isLocalGrid?this._itemsPerPage=r.pageSize:this._itemsPerPage=+(this._backendServiceApi&&this._backendServiceApi.options&&this._backendServiceApi.options.paginationOptions&&this._backendServiceApi.options.paginationOptions.first?this._backendServiceApi.options.paginationOptions.first:r.pageSize)),(e||this._totalItems!==r.totalItems)&&(e?(this._pageNumber=1,this.paginationOptions.pageNumber=1):!this._initialized&&r.pageNumber&&r.pageNumber>1&&(this._pageNumber=r.pageNumber||1),1===this._pageNumber&&this._backendServiceApi&&this._backendServiceApi.service.resetPaginationOptions()),this._availablePageSizes=r.pageSizes,!this._totalItems&&r.totalItems&&(this._totalItems=r.totalItems),this.recalculateFromToIndexes()}this._pageCount=Math.ceil(this._totalItems/this._itemsPerPage);var n=this.getCurrentPagination();this.sharedService.currentPagination=n,t&&!Yt(i,n)&&this.onPaginationChanged.next(n)},e.prototype.processOnPageChanged=function(e,t){var r=this;return new Promise((function(n,o){if(r.recalculateFromToIndexes(),r._isLocalGrid&&r.dataView)r.dataView.setPagingOptions({pageSize:r._itemsPerPage,pageNum:e-1}),r.onPaginationChanged.next(r.getFullPagination());else{var s=+r._itemsPerPage,a=new Date;r._backendServiceApi.preProcess&&r._backendServiceApi.preProcess();var l=r._backendServiceApi.service.processOnPaginationChanged(t,{newPage:e,pageSize:s}),d=r._backendServiceApi.process(l);d instanceof Promise?d.then((function(e){n(W(a,e,r._backendServiceApi,r._totalItems))}))["catch"]((function(e){q(e,r._backendServiceApi),o(d)})):i.isObservable(d)&&d.subscribe((function(e){n(W(a,e,r._backendServiceApi,r._totalItems))}),(function(e){q(e,r._backendServiceApi),o(d)})),r.onPaginationChanged.next(r.getFullPagination())}}))},e.prototype.recalculateFromToIndexes=function(){0===this._totalItems?(this._dataFrom=0,this._dataTo=1,this._pageNumber=0):(this._dataFrom=this._pageNumber>1?this._pageNumber*this._itemsPerPage-this._itemsPerPage+1:1,this._dataTo=this._totalItems<this._itemsPerPage?this._totalItems:(this._pageNumber||1)*this._itemsPerPage,this._dataTo>this._totalItems&&(this._dataTo=this._totalItems)),this._totalItems>0&&0===this._pageNumber&&(this._pageNumber=1),this._dataTo>this._totalItems?this._dataTo=this._totalItems:this._totalItems<this._itemsPerPage&&(this._dataTo=this._totalItems)},e.prototype.resetPagination=function(e){void 0===e&&(e=!0),this._isLocalGrid&&this.dataView.setPagingOptions({pageSize:this._itemsPerPage,pageNum:0}),this.refreshPagination(!0,e)},e.prototype.togglePaginationVisibility=function(e){if(this.grid&&this.sharedService&&this.sharedService.gridOptions){var t=e!==undefined?e:!this.sharedService.gridOptions.enablePagination;if(this.sharedService.gridOptions.enablePagination=t,this.onPaginationVisibilityChanged.next({visible:t}),t&&this.goToFirstPage(),this._isLocalGrid){var i=e?this._itemsPerPage:0;this.dataView.setPagingOptions({pageSize:i,pageNum:0})}}},e.prototype.processOnItemAddedOrRemoved=function(e,t){if(void 0===t&&(t=!0),null!==e){var i=this._dataTo,r=Array.isArray(e)?e.length:1,n=t?+r:-r;this._totalItems+=n,this.recalculateFromToIndexes(),this._dataTo=i+n,this.onPaginationChanged.next(this.getFullPagination())}},e=N([t.Injectable(),V("design:paramtypes",[xt,Qt,Ve])],e)}(),Jt=function(){function e(e){this._count=0,this._field=e}return e.prototype.init=function(){this._count=0,this._nonNullCount=0,this._sum=0},e.prototype.accumulate=function(e){var t=e&&e.hasOwnProperty(this._field)?e[this._field]:null;this._count++,null==t||""===t||isNaN(t)||(this._nonNullCount++,this._sum+=parseFloat(t))},e.prototype.storeResult=function(e){e&&e.avg!==undefined||(e.avg={}),0!==this._nonNullCount&&(e.avg[this._field]=this._sum/this._nonNullCount)},e}(),ei=function(){function e(e){this._field=e}return e.prototype.init=function(){this._min=null},e.prototype.accumulate=function(e){var t=e&&e.hasOwnProperty(this._field)?e[this._field]:null;null==t||""===t||isNaN(t)||(null==this._min||t<this._min)&&(this._min=parseFloat(t))},e.prototype.storeResult=function(e){e&&e.min!==undefined||(e.min={}),e.min[this._field]=this._min},e}(),ti=function(){function e(e){this._field=e}return e.prototype.init=function(){this._max=null},e.prototype.accumulate=function(e){var t=e&&e.hasOwnProperty(this._field)?e[this._field]:null;null==t||""===t||isNaN(t)||(null==this._max||t>this._max)&&(this._max=parseFloat(t))},e.prototype.storeResult=function(e){e&&e.max!==undefined||(e.max={}),e.max[this._field]=this._max},e}(),ii=function(){function e(e){this._sum=0,this._field=e}return e.prototype.init=function(){this._sum=0},e.prototype.accumulate=function(e){var t=e&&e.hasOwnProperty(this._field)?e[this._field]:null;null==t||""===t||isNaN(t)||(this._sum+=parseFloat(t))},e.prototype.storeResult=function(e){e&&e.sum!==undefined||(e.sum={}),e.sum[this._field]=this._sum},e}(),ri={Avg:Jt,Min:ei,Max:ti,Sum:ii},ni=function(){function t(e){if(this.args=e,!e)throw new Error("[Angular-SlickGrid] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=e.grid,this.init()}return Object.defineProperty(t.prototype,"autoCompleteOptions",{get:function(){return this._autoCompleteOptions||{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editorCollection",{get:function(){return this.columnDef&&this.columnDef.internalColumnEditor&&this.columnDef.internalColumnEditor.collection||[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"elementCollection",{get:function(){return this._elementCollection},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnDef",{get:function(){return this.args&&this.args.column},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnEditor",{get:function(){return this.columnDef&&this.columnDef.internalColumnEditor||{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"customStructure",{get:function(){return this.columnDef&&this.columnDef.internalColumnEditor&&this.columnDef.internalColumnEditor.customStructure},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasAutoCommitEdit",{get:function(){return this.grid.getOptions().autoCommitEdit},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validator",{get:function(){return this.columnEditor.validator||this.columnDef.validator},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editorOptions",{get:function(){return this.columnEditor&&this.columnEditor.editorOptions||{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editorDomElement",{get:function(){return this._$editorElm},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.labelName=this.customStructure&&this.customStructure.label||"label",this.valueName=this.customStructure&&this.customStructure.value||"value";var e=this.columnEditor.collection||[];this.renderDomElement(e)},t.prototype.destroy=function(){this._$editorElm.off("keydown.nav").remove()},t.prototype.focus=function(){this._$editorElm.focus().select()},t.prototype.getValue=function(){return this._$editorElm.val()},t.prototype.setValue=function(e){this._$editorElm.val(e)},t.prototype.applyValue=function(e,t){var i=this,r=t,n=this.columnDef&&this.columnDef.field;Array.isArray(this.editorCollection)&&this.editorCollection.length>0&&(r=ae(this.editorCollection,(function(e){return e&&"object"==typeof t&&e.hasOwnProperty(i.labelName)?(e.hasOwnProperty(i.labelName)&&e[i.labelName].toString())===(t.hasOwnProperty(i.labelName)&&t[i.labelName].toString()):e&&"string"==typeof t&&e.hasOwnProperty(i.labelName)?(e.hasOwnProperty(i.labelName)&&e[i.labelName].toString())===t:e&&e.toString()===t})));var o=n.indexOf(".")>0,s=this.validate(r);r=s&&s.valid?r:"",o?Se(e,n,r):e[n]=r},t.prototype.isValueChanged=function(){var t=this._lastInputEvent&&this._lastInputEvent.keyCode;return!(!this.columnEditor||!this.columnEditor.alwaysSaveOnEnterKey||t!==e.KeyCode.ENTER)||!(""===this._$editorElm.val()&&null===this._defaultTextValue)&&this._$editorElm.val()!==this._defaultTextValue},t.prototype.loadValue=function(e){var t=this.columnDef&&this.columnDef.field,i=t.indexOf(".")>0;if(e&&this.columnDef&&(e.hasOwnProperty(t)||i)){var r=i?ce(e,t):e[t];this._currentValue=r,this._defaultTextValue="string"==typeof r?r:r[this.labelName],this._$editorElm.val(this._defaultTextValue),this._$editorElm.select()}},t.prototype.save=function(){var e=this.validate();e&&e.valid&&this.isValueChanged()&&(this.hasAutoCommitEdit?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges())},t.prototype.serializeValue=function(){var t;if(this.editorOptions.forceUserInput){var i=this.editorOptions&&this.editorOptions.hasOwnProperty("minLength")?this.editorOptions.minLength:3;this._currentValue=this._$editorElm.val().length>i?this._$editorElm.val():this._currentValue}return this.customStructure&&this._currentValue&&this._currentValue.hasOwnProperty(this.labelName)?this._currentValue[this.labelName]:this._currentValue&&this._currentValue.label?this.columnDef.type===e.FieldType.object?((t={})[this.labelName]=this._currentValue.label,t[this.valueName]=this._currentValue.value,t):this._currentValue.label:this._currentValue},t.prototype.validate=function(e){var t=this.columnEditor.required,i=e!==undefined?e:this._$editorElm&&this._$editorElm.val&&this._$editorElm.val(),r=this.columnEditor.errorMessage;return this.validator?this.validator(i,this.args):t&&""===i?{valid:!1,msg:r||Fe.VALIDATION_REQUIRED_FIELD}:{valid:!0,msg:null}},t.prototype.onSelect=function(e,t){if(t&&t.item){this._currentValue=t&&t.item;var i="string"==typeof t.item?t.item:t.item.label;if(this.setValue(i),this.hasAutoCommitEdit){var r=this.validate();r&&r.valid&&this.grid.getEditorLock().commitCurrentEdit()}}return!1},t.prototype.renderDomElement=function(t){var i=this;if(!Array.isArray(t))throw new Error('The "collection" passed to the Autocomplete Editor is not a valid array.');var r=this.columnDef&&this.columnDef.id,n=this.columnEditor&&this.columnEditor.placeholder||"",o=this.columnEditor&&this.columnEditor.title||"";this._$editorElm=$('<input type="text" role="presentation" autocomplete="off" class="autocomplete editor-text editor-'+r+'" placeholder="'+n+'" title="'+o+'" />').appendTo(this.args.container).on("keydown.nav",(function(t){i._lastInputEvent=t,t.keyCode!==e.KeyCode.LEFT&&t.keyCode!==e.KeyCode.RIGHT||t.stopImmediatePropagation()}));var s=this.columnEditor.editorOptions,a=t;if(Array.isArray(a)&&this.customStructure&&(a=a.map((function(e){return{label:e[i.labelName],value:e[i.valueName]}}))),this._elementCollection=a,s)s.select=function(e,t){return i.onSelect(e,t)},this._autoCompleteOptions=M({},s),this._$editorElm.autocomplete(s);else{var l={source:a,minLength:0,select:function(e,t){return i.onSelect(e,t)}};this._autoCompleteOptions=M({},l,this.columnEditor.editorOptions),this._$editorElm.autocomplete(this._autoCompleteOptions)}setTimeout((function(){return i.focus()}),50)},t}(),oi=function(){function e(e){if(this.args=e,!e)throw new Error("[Angular-SlickGrid] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=e.grid,this.init()}return Object.defineProperty(e.prototype,"columnDef",{get:function(){return this.args&&this.args.column},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnEditor",{get:function(){return this.columnDef&&this.columnDef.internalColumnEditor||{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editorDomElement",{get:function(){return this._$input},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasAutoCommitEdit",{get:function(){return this.args.grid.getOptions().autoCommitEdit},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validator",{get:function(){return this.columnEditor.validator||this.columnDef.validator},enumerable:!0,configurable:!0}),e.prototype.init=function(){var e=this,t=this.columnDef&&this.columnDef.id,i=this.columnEditor&&this.columnEditor.title||"";this._$input=$('<input type="checkbox" value="true" class="editor-checkbox editor-'+t+'" title="'+i+'" />'),this._$input.appendTo(this.args.container),this.focus(),this.hasAutoCommitEdit&&this._$input.click((function(){return e.save()}))},e.prototype.destroy=function(){this._$input.remove()},e.prototype.focus=function(){this._$input.focus()},e.prototype.getValue=function(){return this._$input.prop("checked")},e.prototype.setValue=function(e){var t=!!e;this._$input.prop("checked",t)},e.prototype.applyValue=function(e,t){var i=this.columnDef&&this.columnDef.field,r=i.indexOf(".")>0,n=this.validate(t),o=n&&n.valid?t:"";r?Se(e,i,o):e[i]=o},e.prototype.isValueChanged=function(){return this.serializeValue()!==this.originalValue},e.prototype.loadValue=function(e){var t=this.columnDef&&this.columnDef.field,i=t.indexOf(".")>0;if(e&&this.columnDef&&(e.hasOwnProperty(t)||i)){var r=i?ce(e,t):e[t];this.originalValue=r,this.originalValue?this._$input.prop("checked",!0):this._$input.prop("checked",!1)}},e.prototype.save=function(){var e=this.validate();e&&e.valid&&this.isValueChanged()&&this.hasAutoCommitEdit&&this.grid.getEditorLock().commitCurrentEdit()},e.prototype.serializeValue=function(){return this._$input.prop("checked")},e.prototype.validate=function(e){var t=this.columnEditor.required,i=e!==undefined?e:this._$input&&this._$input.prop&&this._$input.prop("checked"),r=this.columnEditor.errorMessage;return this.validator?this.validator(i,this.args):t&&!i?{valid:!1,msg:r||Fe.VALIDATION_REQUIRED_FIELD}:{valid:!0,msg:null}},e}(),si=o;require("flatpickr");var ai=function(){function t(e){if(this.args=e,!e)throw new Error("[Angular-SlickGrid] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=e.grid,this.gridOptions=e.grid&&e.grid.getOptions()||{};var t=this.gridOptions||this.args.column.params||{};t&&t.i18n instanceof n.TranslateService&&(this._translate=t.i18n),this.init()}return Object.defineProperty(t.prototype,"columnDef",{get:function(){return this.args&&this.args.column},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnEditor",{get:function(){return this.columnDef&&this.columnDef.internalColumnEditor||{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editorDomElement",{get:function(){return this._$input},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editorOptions",{get:function(){return this.columnEditor.editorOptions||{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasAutoCommitEdit",{get:function(){return this.grid.getOptions().autoCommitEdit},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validator",{get:function(){return this.columnEditor.validator||this.columnDef.validator},enumerable:!0,configurable:!0}),t.prototype.init=function(){var t=this;if(this.args&&this.columnDef){var i=this.columnDef&&this.columnDef.id,r=this.columnEditor&&this.columnEditor.placeholder||"",n=this.columnEditor&&this.columnEditor.title||"";this.defaultDate=this.args.item?this.args.item[this.columnDef.field]:null;var o=pe(this.columnDef.type||e.FieldType.dateIso),s=pe(this.columnDef.outputType||e.FieldType.dateUtc),a=this._translate&&this._translate.currentLang||this.gridOptions.locale||"en";a&&a.length>2&&(a=a.substring(0,2));var l={defaultDate:this.defaultDate,altInput:!0,altFormat:o,dateFormat:s,closeOnSelect:!1,locale:"en"!==a?this.loadFlatpickrLocale(a):"en",onChange:function(e,i,r){t.save()}},d=M({},l,this.editorOptions),c=".editor-text.editor-"+i+".flatpickr";d.altInput&&(d.altInputClass="flatpickr-alt-input editor-text"),this._$input=$('<input type="text" data-defaultDate="'+this.defaultDate+'" class="'+c.replace(/\./g," ")+'" placeholder="'+r+'" title="'+n+'" />'),this._$input.appendTo(this.args.container),this.flatInstance=this._$input[0]&&"function"==typeof this._$input[0].flatpickr?this._$input[0].flatpickr(d):null,this._$inputWithData=d&&d.altInput?$(c+".flatpickr-alt-input"):this._$input}},t.prototype.destroy=function(){this.hide(),this._$input.remove(),this._$inputWithData&&"function"==typeof this._$inputWithData.remove&&this._$inputWithData.remove(),this.flatInstance&&"function"==typeof this.flatInstance.destroy&&this.flatInstance.destroy()},t.prototype.focus=function(){this._$input.focus(),this._$inputWithData&&"function"==typeof this._$inputWithData.focus&&this._$inputWithData.focus().select()},t.prototype.hide=function(){this.flatInstance&&"function"==typeof this.flatInstance.close&&this.flatInstance.close()},t.prototype.show=function(){this.flatInstance&&"function"==typeof this.flatInstance.open&&this.flatInstance.open()},t.prototype.getValue=function(){return this._$input.val()},t.prototype.setValue=function(e){this.flatInstance.setDate(e)},t.prototype.applyValue=function(t,i){var r=this.columnDef&&this.columnDef.field,n=he(this.columnDef.type||e.FieldType.dateIso),o=r.indexOf(".")>0,s=this.validate(i),a=s&&s.valid?si(i,n).toDate():"";o?Se(t,r,a):t[r]=a},t.prototype.isValueChanged=function(){var t=this._$input.val(),i=he(this.columnDef.type||e.FieldType.dateIso),r=t?si(t).format(i):"",n=this.originalDate?si(this.originalDate).format(i):"";return!(""===r&&""===n)&&r!==n},t.prototype.loadValue=function(e){var t=this.columnDef&&this.columnDef.field,i=t.indexOf(".")>0;if(e&&this.columnDef&&(e.hasOwnProperty(t)||i)){var r=i?ce(e,t):e[t];this.originalDate=r,this.flatInstance.setDate(r),this.show(),this.focus()}},t.prototype.save=function(){var e=this.validate();e&&e.valid&&this.isValueChanged()&&(this.hasAutoCommitEdit?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges())},t.prototype.serializeValue=function(){var t=this._$input.val();if(!t)return"";var i=he(this.columnDef.type||e.FieldType.dateIso);return si(t).format(i)},t.prototype.validate=function(e){var t=this.columnEditor.required,i=e!==undefined?e:this._$input&&this._$input.val&&this._$input.val(),r=this.columnEditor.errorMessage;return this.validator?this.validator(i,this.args):t&&""===i?{valid:!1,msg:r||Fe.VALIDATION_REQUIRED_FIELD}:{valid:!0,msg:null}},t.prototype.loadFlatpickrLocale=function(e){var t="en";if("en"!==e){var i=require("flatpickr/dist/l10n/"+e+".js")["default"];t=i&&i[e]?i[e]:"en"}return t},t}(),li=function(){function t(e){if(this.args=e,!e)throw new Error("[Angular-SlickGrid] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=e.grid,this.init()}return Object.defineProperty(t.prototype,"columnDef",{get:function(){return this.args&&this.args.column},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnEditor",{get:function(){return this.columnDef&&this.columnDef.internalColumnEditor||{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editorDomElement",{get:function(){return this._$input},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasAutoCommitEdit",{get:function(){return this.grid&&this.grid.getOptions&&this.grid.getOptions().autoCommitEdit},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validator",{get:function(){return this.columnEditor.validator||this.columnDef.validator},enumerable:!0,configurable:!0}),t.prototype.init=function(){var t=this,i=this.columnDef&&this.columnDef.id,r=this.columnEditor&&this.columnEditor.placeholder||"",n=this.columnEditor&&this.columnEditor.title||"";this._$input=$('<input type="number" role="presentation" autocomplete="off" class="editor-text editor-'+i+'" placeholder="'+r+'" title="'+n+'" step="'+this.getInputDecimalSteps()+'" />').appendTo(this.args.container).on("keydown.nav",(function(i){t._lastInputEvent=i,i.keyCode!==e.KeyCode.LEFT&&i.keyCode!==e.KeyCode.RIGHT||i.stopImmediatePropagation()})),this.hasAutoCommitEdit&&this._$input.on("focusout",(function(){return t.save()})),setTimeout((function(){return t.focus()}),50)},t.prototype.destroy=function(){this._$input&&this._$input.off("keydown.nav").remove()},t.prototype.focus=function(){this._$input.focus()},t.prototype.getDecimalPlaces=function(){var e=this.columnEditor.params&&this.columnEditor.params.hasOwnProperty("decimalPlaces")?this.columnEditor.params.decimalPlaces:undefined;return e===undefined&&(e=0),e||0===e?e:null},t.prototype.getInputDecimalSteps=function(){for(var e=this.getDecimalPlaces(),t="",i=1;i<e;i++)t+="0";return e>0?"0."+t+"1":"1"},t.prototype.getValue=function(){return this._$input.val()||""},t.prototype.setValue=function(e){this._$input.val(e)},t.prototype.applyValue=function(e,t){var i=this.columnDef&&this.columnDef.field,r=i.indexOf(".")>0,n=this.validate(t),o=n&&n.valid?t:"";r?Se(e,i,o):e[i]=o},t.prototype.isValueChanged=function(){var t=this._$input.val(),i=this._lastInputEvent&&this._lastInputEvent.keyCode;return!(!this.columnEditor||!this.columnEditor.alwaysSaveOnEnterKey||i!==e.KeyCode.ENTER)||!(""===t&&null===this.originalValue)&&t!==this.originalValue},t.prototype.loadValue=function(e){var t=this.columnDef&&this.columnDef.field,i=t.indexOf(".")>0;if(e&&this.columnDef&&(e.hasOwnProperty(t)||i)){var r=i?ce(e,t):e[t];this.originalValue=r;var n=this.getDecimalPlaces();null!==n&&(this.originalValue||0===this.originalValue)&&(+this.originalValue).toFixed&&(this.originalValue=(+this.originalValue).toFixed(n)),this._$input.val(this.originalValue),this._$input.select()}},t.prototype.save=function(){var e=this.validate();e&&e.valid&&this.isValueChanged()&&(this.hasAutoCommitEdit?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges())},t.prototype.serializeValue=function(){var e=this._$input.val();if(""===e||isNaN(e))return e;var t=parseFloat(e),i=this.getDecimalPlaces();return null!==i&&(t||0===t)&&t.toFixed&&(t=parseFloat(t.toFixed(i))),t},t.prototype.validate=function(e){var t=e!==undefined?e:this._$input&&this._$input.val&&this._$input.val(),i=isNaN(t)?null:parseFloat(t),r=this.getDecimalPlaces(),n=this.columnEditor.required,o=this.columnEditor.minValue,s=this.columnEditor.maxValue,a=this.columnEditor.errorMessage,l={"{{minValue}}":o,"{{maxValue}}":s,"{{minDecimal}}":0,"{{maxDecimal}}":r},d=!0,c="";return this.validator?this.validator(t,this.args):(n&&""===t?(d=!1,c=a||Fe.VALIDATION_REQUIRED_FIELD):isNaN(t)||0===r&&!/^[-+]?(\d+(\.)?(\d)*)$/.test(t)?(d=!1,c=a||Fe.VALIDATION_EDITOR_VALID_NUMBER):o!==undefined&&s!==undefined&&null!==i&&(i<o||i>s)?(d=!1,c=a||Fe.VALIDATION_EDITOR_NUMBER_BETWEEN.replace(/{{minValue}}|{{maxValue}}/gi,(function(e){return l[e]}))):o!==undefined&&null!==i&&i<=o?(d=!1,c=a||Fe.VALIDATION_EDITOR_NUMBER_MIN.replace(/{{minValue}}/gi,(function(e){return l[e]}))):s!==undefined&&null!==i&&i>=s?(d=!1,c=a||Fe.VALIDATION_EDITOR_NUMBER_MAX.replace(/{{maxValue}}/gi,(function(e){return l[e]}))):r>0&&!new RegExp("^[-+]?(\\d*(\\.)?(\\d){0,"+r+"})$").test(t)&&(d=!1,c=a||Fe.VALIDATION_EDITOR_DECIMAL_BETWEEN.replace(/{{minDecimal}}|{{maxDecimal}}/gi,(function(e){return l[e]}))),{valid:d,msg:c})},t}(),di=function(){function t(e){if(this.args=e,!e)throw new Error("[Angular-SlickGrid] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=e.grid,this.init()}return Object.defineProperty(t.prototype,"columnDef",{get:function(){return this.args&&this.args.column},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnEditor",{get:function(){return this.columnDef&&this.columnDef.internalColumnEditor||{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editorDomElement",{get:function(){return this._$input},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasAutoCommitEdit",{get:function(){return this.args&&this.grid&&this.grid.getOptions&&this.grid.getOptions().autoCommitEdit},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validator",{get:function(){return this.columnEditor.validator||this.columnDef.validator},enumerable:!0,configurable:!0}),t.prototype.init=function(){var t=this,i=this.columnDef&&this.columnDef.id,r=this.columnEditor&&this.columnEditor.placeholder||"",n=this.columnEditor&&this.columnEditor.title||"";this._$input=$('<input type="number" role="presentation" autocomplete="off" class="editor-text editor-'+i+'" placeholder="'+r+'" title="'+n+'" />').appendTo(this.args.container).on("keydown.nav",(function(i){t._lastInputEvent=i,i.keyCode!==e.KeyCode.LEFT&&i.keyCode!==e.KeyCode.RIGHT||i.stopImmediatePropagation()})),this.hasAutoCommitEdit&&this._$input.on("focusout",(function(){return t.save()})),setTimeout((function(){return t.focus()}),50)},t.prototype.destroy=function(){this._$input.off("keydown.nav focusout").remove()},t.prototype.focus=function(){this._$input.focus()},t.prototype.getValue=function(){return this._$input.val()||""},t.prototype.setValue=function(e){this._$input.val(e)},t.prototype.applyValue=function(e,t){var i=this.columnDef&&this.columnDef.field,r=i.indexOf(".")>0,n=this.validate(t),o=n&&n.valid?t:"";r?Se(e,i,o):e[i]=o},t.prototype.isValueChanged=function(){var t=this._$input.val(),i=this._lastInputEvent&&this._lastInputEvent.keyCode;return!(!this.columnEditor||!this.columnEditor.alwaysSaveOnEnterKey||i!==e.KeyCode.ENTER)||!(""===t&&null===this.originalValue)&&t!==this.originalValue},t.prototype.loadValue=function(e){var t=this.columnDef&&this.columnDef.field,i=t.indexOf(".")>0;if(e&&this.columnDef&&(e.hasOwnProperty(t)||i)){var r=i?ce(e,t):e[t];this.originalValue=isNaN(r)||null===r||r===undefined?r:""+r,this._$input.val(this.originalValue),this._$input.select()}},t.prototype.save=function(){var e=this.validate();e&&e.valid&&this.isValueChanged()&&(this.hasAutoCommitEdit?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges())},t.prototype.serializeValue=function(){var e=this._$input.val();if(""===e||isNaN(e))return e;var t=isNaN(e)?e:parseInt(e,10);return isNaN(t)?e:t},t.prototype.validate=function(e){var t=e!==undefined?e:this.getValue(),i=isNaN(t)?null:parseInt(t,10);isNaN(i)&&(i=null);var r=this.columnEditor.errorMessage,n=this.columnEditor.required,o=this.columnEditor.minValue,s=this.columnEditor.maxValue,a={"{{minValue}}":o,"{{maxValue}}":s},l=!0,d="";return this.validator?this.validator(t,this.args):(n&&""===t?(l=!1,d=r||Fe.VALIDATION_REQUIRED_FIELD):!t||!isNaN(t)&&/^[+-]?\d+$/.test(t)?o!==undefined&&s!==undefined&&null!==i&&(i<o||i>s)?(l=!1,d=r||Fe.VALIDATION_EDITOR_INTEGER_BETWEEN.replace(/{{minValue}}|{{maxValue}}/gi,(function(e){return a[e]}))):o!==undefined&&null!==i&&i<=o?(l=!1,d=r||Fe.VALIDATION_EDITOR_INTEGER_MIN.replace(/{{minValue}}/gi,(function(e){return a[e]}))):s!==undefined&&null!==i&&i>=s&&(l=!1,d=r||Fe.VALIDATION_EDITOR_INTEGER_MAX.replace(/{{maxValue}}/gi,(function(e){return a[e]}))):(l=!1,d=r||Fe.VALIDATION_EDITOR_VALID_INTEGER),{valid:l,msg:d})},t}(),ci=function(){function t(e){if(this.args=e,!e)throw new Error("[Angular-SlickGrid] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=e.grid,this.gridOptions=e.grid&&e.grid.getOptions();var t=this.gridOptions||this.args.column.params||{};t&&t.i18n instanceof n.TranslateService&&(this._translate=t.i18n),this._locales=this.gridOptions&&this.gridOptions.locales||Fe.locales,this.init()}return Object.defineProperty(t.prototype,"columnDef",{get:function(){return this.args&&this.args.column},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnEditor",{get:function(){return this.columnDef&&this.columnDef.internalColumnEditor||{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editorDomElement",{get:function(){return this._$textarea},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasAutoCommitEdit",{get:function(){return this.grid.getOptions().autoCommitEdit},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validator",{get:function(){return this.columnEditor.validator||this.columnDef.validator},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this,t="",i="";this._translate&&this._translate.instant&&this._translate.currentLang?(t=this._translate.instant("CANCEL"),i=this._translate.instant("SAVE")):(t=this._locales&&this._locales.TEXT_CANCEL,i=this._locales&&this._locales.TEXT_SAVE);var r=this.columnDef&&this.columnDef.id,n=this.columnEditor&&this.columnEditor.placeholder||"",o=this.columnEditor&&this.columnEditor.title||"",s=$("body");this._$wrapper=$('<div class="slick-large-editor-text editor-'+r+'" />').appendTo(s),this._$textarea=$('<textarea hidefocus rows="5" placeholder="'+n+'" title="'+o+'">').appendTo(this._$wrapper),this.hasAutoCommitEdit&&this._$textarea.on("focusout",(function(){return e.save()})),$('<div class="editor-footer">\n          <button class="btn btn-save btn-primary btn-xs">'+i+'</button>\n          <button class="btn btn-cancel btn-default btn-xs">'+t+"</button>\n      </div>").appendTo(this._$wrapper),this._$wrapper.find(".btn-save").on("click",(function(){return e.save()})),this._$wrapper.find(".btn-cancel").on("click",(function(){return e.cancel()})),this._$textarea.on("keydown",this.handleKeyDown.bind(this)),this.position(this.args&&this.args.position),this._$textarea.focus().select()},t.prototype.cancel=function(){this._$textarea.val(this.defaultValue),this.args&&this.args.cancelChanges&&this.args.cancelChanges()},t.prototype.hide=function(){this._$wrapper.hide()},t.prototype.show=function(){this._$wrapper.show()},t.prototype.destroy=function(){this._$wrapper.off("keydown focusout").remove()},t.prototype.focus=function(){this._$textarea.focus()},t.prototype.getValue=function(){return this._$textarea.val()},t.prototype.setValue=function(e){this._$textarea.val(e)},t.prototype.applyValue=function(e,t){var i=this.columnDef&&this.columnDef.field,r=i.indexOf(".")>0,n=this.validate(t),o=n&&n.valid?t:"";r?Se(e,i,o):e[i]=o},t.prototype.isValueChanged=function(){return!(""===this._$textarea.val()&&null===this.defaultValue)&&this._$textarea.val()!==this.defaultValue},t.prototype.loadValue=function(e){var t=this.columnDef&&this.columnDef.field,i=t.indexOf(".")>0;if(e&&this.columnDef&&(e.hasOwnProperty(t)||i)){var r=i?ce(e,t):e[t];this.defaultValue=r,this._$textarea.val(this.defaultValue),this._$textarea[0].defaultValue=this.defaultValue,this._$textarea.select()}},t.prototype.position=function(e){this._$wrapper.css("top",(e.top||0)-5).css("left",(e.left||0)-5)},t.prototype.save=function(){var e=this.validate();e&&e.valid&&this.isValueChanged()&&(this.hasAutoCommitEdit?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges())},t.prototype.serializeValue=function(){return this._$textarea.val()},t.prototype.validate=function(e){var t=this.columnEditor.required,i=e!==undefined?e:this._$textarea&&this._$textarea.val&&this._$textarea.val(),r=this.columnEditor.errorMessage;return this.validator?this.validator(i,this.args):t&&""===i?{valid:!1,msg:r||Fe.VALIDATION_REQUIRED_FIELD}:{valid:!0,msg:null}},t.prototype.handleKeyDown=function(t){var i=t.keyCode||t.code;i===e.KeyCode.ENTER&&t.ctrlKey?this.save():i===e.KeyCode.ESCAPE?(t.preventDefault(),this.cancel()):i===e.KeyCode.TAB&&t.shiftKey?(t.preventDefault(),this.args&&this.grid&&this.grid.navigatePrev()):i===e.KeyCode.TAB&&(t.preventDefault(),this.args&&this.grid&&this.grid.navigateNext())},t}(),ui=p,hi=function(){function t(e,t){var i=this;if(this.args=e,this.isMultipleSelect=t,this._subscriptions=[],this._destroying=!1,!e)throw new Error("[Angular-SlickGrid] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=e.grid,this.gridOptions=this.grid.getOptions()||{};var r=this.gridOptions||this.args.column.params||{};r&&r.i18n instanceof n.TranslateService&&(this._translate=r.i18n),this._locales=this.gridOptions.locales||Fe.locales;var o=this.columnDef&&this.columnDef.id;this.elementName="editor-"+o;var s={autoAdjustDropHeight:!0,autoAdjustDropPosition:!0,autoAdjustDropWidthByTextSize:!0,container:"body",filter:!1,maxHeight:275,name:this.elementName,single:!0,textTemplate:function(e){return i.columnDef&&i.columnDef.internalColumnEditor&&i.columnDef.internalColumnEditor.enableRenderHtml||!1?e.text():e.html()},onClose:function(){return i.save()}};t&&(s.single=!1,s.addTitle=!0,s.okButton=!0,s.selectAllDelimiter=["",""],this._translate&&this._translate.instant&&this._translate.currentLang?(s.countSelected=this._translate.instant("X_OF_Y_SELECTED"),s.allSelected=this._translate.instant("ALL_SELECTED"),s.selectAllText=this._translate.instant("SELECT_ALL")):(s.countSelected=this._locales&&this._locales.TEXT_X_OF_Y_SELECTED,s.allSelected=this._locales&&this._locales.TEXT_ALL_SELECTED,s.selectAllText=this._locales&&this._locales.TEXT_SELECT_ALL,s.okButtonText=this._locales&&this._locales.TEXT_OK)),this.defaultOptions=s,this.init()}return Object.defineProperty(t.prototype,"collection",{get:function(){return this.columnDef&&this.columnDef.internalColumnEditor.collection||[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collectionOptions",{get:function(){return this.columnDef&&this.columnDef.internalColumnEditor&&this.columnDef.internalColumnEditor.collectionOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnDef",{get:function(){return this.args&&this.args.column},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnEditor",{get:function(){return this.columnDef&&this.columnDef.internalColumnEditor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editorDomElement",{get:function(){return this.$editorElm},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"customStructure",{get:function(){return this.columnDef&&this.columnDef.internalColumnEditor&&this.columnDef.internalColumnEditor.customStructure},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasAutoCommitEdit",{get:function(){return this.grid.getOptions().autoCommitEdit},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentValues",{get:function(){var e=this,t=this.$editorElm.val();if(this.collection.every((function(e){return"string"==typeof e})))return this.collection.filter((function(e){return-1!==t.indexOf(e.toString())}));var i=this.collectionOptions&&this.collectionOptions.separatorBetweenTextLabels||"",r=this.collectionOptions&&this.collectionOptions.includePrefixSuffixToSelectedValues||!1;return this.collection.filter((function(i){return-1!==t.indexOf(i.hasOwnProperty(e.valueName)&&i[e.valueName].toString())})).map((function(t){var n=t[e.valueName],o=t[e.labelPrefixName]||"",s=t[e.labelSuffixName]||"";return(e.columnDef&&e.columnDef.field).indexOf(".")>0&&"object"==typeof t?t:(o=e.enableTranslateLabel&&o&&"string"==typeof o?e._translate.instant(o||" "):o,s=e.enableTranslateLabel&&s&&"string"==typeof s?e._translate.instant(s||" "):s,r?[o,n,s].filter((function(e){return e})).join(i):n)}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentValue",{get:function(){var e=this,t=this.$editorElm.val();if(this.collection.every((function(e){return"string"==typeof e})))return ae(this.collection,(function(e){return e.toString()===t}));var i=this.collectionOptions&&this.collectionOptions.separatorBetweenTextLabels||"",r=this.collectionOptions&&this.collectionOptions.includePrefixSuffixToSelectedValues||!1,n=ae(this.collection,(function(i){return i.hasOwnProperty(e.valueName)&&i[e.valueName].toString()===t}));if((this.columnDef&&this.columnDef.field).indexOf(".")>0&&"object"==typeof n)return n;if(n&&n.hasOwnProperty(this.valueName)){var o=n[this.valueName];if(r){var s=n[this.labelPrefixName]||"",a=n[this.labelSuffixName]||"";return[s=this.enableTranslateLabel&&s&&"string"==typeof s?this._translate.instant(s||" "):s,o,a=this.enableTranslateLabel&&a&&"string"==typeof a?this._translate.instant(a||" "):a].filter((function(e){return e})).join(i)}return o}return""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validator",{get:function(){return this.columnEditor.validator||this.columnDef.validator},enumerable:!0,configurable:!0}),t.prototype.init=function(){if(!this.columnDef||!this.columnDef.internalColumnEditor||!this.columnDef.internalColumnEditor.collection&&!this.columnDef.internalColumnEditor.collectionAsync)throw new Error("[Angular-SlickGrid] You need to pass a \"collection\" (or \"collectionAsync\") inside Column Definition Editor for the MultipleSelect/SingleSelect Editor to work correctly.\n      Also each option should include a value/label pair (or value/labelKey when using Locale).\n      For example: { editor: { collection: [{ value: true, label: 'True' },{ value: false, label: 'False'}] } }");if(this._collectionService=new Ie(this._translate),this.enableTranslateLabel=!!this.columnDef.internalColumnEditor.enableTranslateLabel&&this.columnDef.internalColumnEditor.enableTranslateLabel,this.labelName=this.customStructure&&this.customStructure.label||"label",this.labelPrefixName=this.customStructure&&this.customStructure.labelPrefix||"labelPrefix",this.labelSuffixName=this.customStructure&&this.customStructure.labelSuffix||"labelSuffix",this.optionLabel=this.customStructure&&this.customStructure.optionLabel||"value",this.valueName=this.customStructure&&this.customStructure.value||"value",this.enableTranslateLabel&&(!this._translate||"function"!=typeof this._translate.instant))throw new Error('[Angular-Slickgrid] requires "ngx-translate" to be installed and configured when the grid option "enableTranslate" is enabled.');this.renderDomElement(this.collection)},t.prototype.getValue=function(){return this.isMultipleSelect?this.currentValues:this.currentValue},t.prototype.setValue=function(e){this.isMultipleSelect&&Array.isArray(e)?this.loadMultipleValues(e):this.loadSingleValue(e)},t.prototype.hide=function(){this.$editorElm&&"function"==typeof this.$editorElm.multipleSelect&&this.$editorElm.multipleSelect("close")},t.prototype.show=function(){this.$editorElm&&"function"==typeof this.$editorElm.multipleSelect&&this.$editorElm.multipleSelect("open")},t.prototype.applyValue=function(t,i){var r=this.columnDef&&this.columnDef.field,n=this.columnDef&&this.columnDef.type,o=i;n!==e.FieldType.number&&n!==e.FieldType.integer&&n!==e.FieldType.boolean||(o=parseFloat(i)),this.isMultipleSelect&&"string"==typeof i&&i.indexOf(",")>=0&&(o=i.split(","));var s=r.indexOf(".")>0,a=this.validate(o);(o=a&&a.valid?o:"",s)?Se(t,this.columnEditor&&this.columnEditor.complexObjectPath||r,o):t[r]=o},t.prototype.destroy=function(){if(this._destroying=!0,this.$editorElm&&"function"==typeof this.$editorElm.multipleSelect){this.$editorElm.multipleSelect("destroy");var e=this.elementName.toString().replace(".","\\.");$("[name="+e+"].ms-drop").remove()}this.$editorElm&&"function"==typeof this.$editorElm.remove&&this.$editorElm.remove(),this._subscriptions=Ce(this._subscriptions)},t.prototype.loadValue=function(e){var t=this.columnDef&&this.columnDef.field,i=t.indexOf(".")>0;if(e&&this.columnDef&&(e.hasOwnProperty(t)||i)){var r=this.columnEditor&&this.columnEditor.complexObjectPath||t,n=i?ce(e,r):e[t],o=i&&n.hasOwnProperty(this.valueName)?n[this.valueName]:n;this.isMultipleSelect&&Array.isArray(o)?this.loadMultipleValues(o):this.loadSingleValue(o),this.refresh()}},t.prototype.loadMultipleValues=function(e){if(Array.isArray(e)){this.originalValue=e.map((function(e){return e}));var t=e.map((function(e){return e.toString()}));this.$editorElm.find("option").each((function(e,i){i.selected=-1!==t.indexOf(i.value)}))}},t.prototype.loadSingleValue=function(e){this.originalValue="number"==typeof e?""+e:e,this.$editorElm.val(e),this.$editorElm.find("option").each((function(t,i){var r=e&&e.toString&&e.toString();i.selected=r===i.value}))},t.prototype.save=function(){var e=this.validate();e&&e.valid&&this.isValueChanged()&&!this._destroying&&this.hasAutoCommitEdit&&this.grid.getEditorLock().commitCurrentEdit()},t.prototype.serializeValue=function(){return this.isMultipleSelect?this.currentValues:this.currentValue},t.prototype.focus=function(){this.$editorElm&&this.$editorElm.multipleSelect&&this.$editorElm.multipleSelect("focus")},t.prototype.isValueChanged=function(){return this.isMultipleSelect?!oe(this.$editorElm.val(),this.originalValue):this.$editorElm.val()!==this.originalValue},t.prototype.validate=function(e){var t=this.columnEditor.required,i=e!==undefined?e:this.$editorElm&&this.$editorElm.val&&this.$editorElm.val(),r=this.columnEditor.errorMessage;if(this.validator){var n=e!==undefined?e:this.isMultipleSelect?this.currentValues:this.currentValue;return this.validator(n,this.args)}return t&&(""===i||Array.isArray(i)&&0===i.length)?{valid:!1,msg:r||Fe.VALIDATION_REQUIRED_FIELD}:{valid:!0,msg:null}},t.prototype.filterCollection=function(e){var t=e;if(this.columnEditor&&this.columnEditor.collectionFilterBy){var i=this.columnEditor.collectionFilterBy,r=this.columnEditor.collectionOptions&&this.columnEditor.collectionOptions.filterResultAfterEachPass||null;t=this._collectionService.filterCollection(t,i,r)}return t},t.prototype.sortCollection=function(e){var t=e;if(this.columnDef.internalColumnEditor&&this.columnDef.internalColumnEditor.collectionSortBy){var i=this.columnDef.internalColumnEditor.collectionSortBy;t=this._collectionService.sortCollection(this.columnDef,t,i,this.enableTranslateLabel)}return t},t.prototype.renderDomElement=function(e){!Array.isArray(e)&&this.collectionOptions&&(this.collectionOptions.collectionInsideObjectProperty||this.collectionOptions.collectionInObjectProperty)&&(e=ce(e,this.collectionOptions.collectionInsideObjectProperty||this.collectionOptions.collectionInObjectProperty));if(!Array.isArray(e))throw new Error('The "collection" passed to the Select Editor is not a valid array.');this.collectionOptions&&this.collectionOptions.addBlankEntry&&e.unshift(this.createBlankEntry());var t=e||[];t=this.filterCollection(t),t=this.sortCollection(t);var i=this.buildTemplateHtmlString(t);this.createDomElement(i)},t.prototype.buildTemplateHtmlString=function(e){var t=this,i="",r=this.columnDef&&this.columnDef.id,n=this.collectionOptions&&this.collectionOptions.separatorBetweenTextLabels||"",o=this.columnDef.internalColumnEditor.enableRenderHtml||!1,s=this.gridOptions&&this.gridOptions.sanitizeHtmlOptions||{};return e.every((function(e){return"string"==typeof e}))?e.forEach((function(e){i+='<option value="'+e+'" label="'+e+'">'+e+"</option>"})):e.forEach((function(e){if(!e||e[t.labelName]===undefined&&e.labelKey===undefined)throw new Error("[select-editor] A collection with value/label (or value/labelKey when using Locale) is required to populate the Select list, for example: { collection: [ { value: '1', label: 'One' } ])");var r=e.labelKey||e[t.labelName],a=(e.labelKey||t.enableTranslateLabel)&&r?t._translate.instant(r||" "):r,l=e[t.labelPrefixName]||"",d=e[t.labelSuffixName]||"",c=e[t.optionLabel]||"";c=c.toString().replace(/\"/g,"'"),l=t.enableTranslateLabel&&l&&"string"==typeof l?t._translate.instant(l||" "):l,d=t.enableTranslateLabel&&d&&"string"==typeof d?t._translate.instant(d||" "):d,c=t.enableTranslateLabel&&c&&"string"==typeof c?t._translate.instant(c||" "):c;var u=[l,a,d].filter((function(e){return e!==undefined&&""!==e})).join(n);o&&(u=re((ui.sanitize(u,s)||"").toString()));i+='<option value="'+e[t.valueName]+'" label="'+c+'">'+u+"</option>"})),'<select id="'+this.elementName+'" class="ms-filter search-filter editor-'+r+'" '+(this.isMultipleSelect?'multiple="multiple"':"")+">"+i+"</select>"},t.prototype.createBlankEntry=function(){var e,t=((e={})[this.labelName]="",e[this.valueName]="",e);return this.labelPrefixName&&(t[this.labelPrefixName]=""),this.labelSuffixName&&(t[this.labelSuffixName]=""),t},t.prototype.createDomElement=function(e){var t=this;this.$editorElm=$(e),this.$editorElm&&"function"==typeof this.$editorElm.appendTo&&this.$editorElm.appendTo(this.args.container);var i=this.columnEditor&&this.columnEditor.placeholder||"";if(this.defaultOptions.placeholder=i||"","function"==typeof this.$editorElm.multipleSelect){var r=this.columnDef.internalColumnEditor?this.columnDef.internalColumnEditor.elementOptions:{},n=this.columnDef&&this.columnDef.internalColumnEditor?this.columnDef.internalColumnEditor.editorOptions:{};this.editorElmOptions=M({},this.defaultOptions,r,n),this.$editorElm=this.$editorElm.multipleSelect(this.editorElmOptions),setTimeout((function(){return t.show()}))}},t.prototype.refresh=function(){"function"==typeof this.$editorElm.multipleSelect&&this.$editorElm.multipleSelect("refresh")},t}(),pi=function(e){function t(t){var i=e.call(this,t,!0)||this;return i.args=t,i}return _(t,e),t}(hi),mi=function(e){function t(t){var i=e.call(this,t,!1)||this;return i.args=t,i}return _(t,e),t}(hi),fi=function(){function e(e){if(this.args=e,!e)throw new Error("[Angular-SlickGrid] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=e.grid,this.init()}return Object.defineProperty(e.prototype,"columnDef",{get:function(){return this.args&&this.args.column},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnEditor",{get:function(){return this.columnDef&&this.columnDef.internalColumnEditor||{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editorDomElement",{get:function(){return this._$input},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasAutoCommitEdit",{get:function(){return this.grid&&this.grid.getOptions&&this.grid.getOptions().autoCommitEdit},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editorParams",{get:function(){return this.columnEditor.params||{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validator",{get:function(){return this.columnEditor.validator||this.columnDef.validator},enumerable:!0,configurable:!0}),e.prototype.init=function(){var e=this,t=this.args&&this.args.container,i=this.args&&this.args.item&&this.args.item.id;this._elementRangeInputId="rangeInput_"+this.columnDef.field+"_"+i,this._elementRangeOutputId="rangeOutput_"+this.columnDef.field+"_"+i;var r=this.buildTemplateHtmlString();this._$editorElm=$(r),this._$input=this._$editorElm.children("input"),this.$sliderNumber=this._$editorElm.children("div.input-group-addon.input-group-append").children(),this.focus(),this._$editorElm.appendTo(t).on("mouseup",(function(){return e.save()})),this.editorParams.hideSliderNumber||this._$editorElm.on("input change",(function(t){if(t&&t.target&&t.target.value||""){var i=document.getElementsByClassName(e._elementRangeOutputId);i.length&&(i[0].innerHTML=t.target.value)}}))},e.prototype.cancel=function(){this._$input.val(this.originalValue),this.args.cancelChanges()},e.prototype.destroy=function(){this._$editorElm.off("input change mouseup").remove()},e.prototype.focus=function(){this._$editorElm.focus()},e.prototype.getValue=function(){return this._$input.val()||""},e.prototype.setValue=function(e){this._$input.val(e)},e.prototype.applyValue=function(e,t){var i=this.columnDef&&this.columnDef.field,r=i.indexOf(".")>0,n=this.validate(t),o=n&&n.valid?t:"";r?Se(e,i,o):e[i]=o},e.prototype.isValueChanged=function(){var e=this._$input.val();return!(""===e&&this.originalValue===undefined)&&+e!==this.originalValue},e.prototype.loadValue=function(e){var t=this.columnDef&&this.columnDef.field,i=t.indexOf(".")>0;if(e&&this.columnDef&&(e.hasOwnProperty(t)||i)){var r=i?ce(e,t):e[t];""!==r&&null!==r&&r!==undefined||(r=this.defaultValue),this.originalValue=+r,this._$input.val(r),this.$sliderNumber.html(r)}},e.prototype.save=function(){var e=this.validate();e&&e.valid&&this.isValueChanged()&&(this.hasAutoCommitEdit?this.args.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges())},e.prototype.serializeValue=function(){var e=this._$input.val();return""!==e?parseInt(e,10):this.originalValue},e.prototype.validate=function(e){var t=e!==undefined?e:this._$input&&this._$input.val&&this._$input.val(),i=this.columnEditor.required,r=this.columnEditor.minValue,n=this.columnEditor.maxValue,o=this.columnEditor.errorMessage,s={"{{minValue}}":r,"{{maxValue}}":n};return this.validator?this.validator(t,this.args):i&&""===t?{valid:!1,msg:o||Fe.VALIDATION_REQUIRED_FIELD}:r!==undefined&&n!==undefined&&null!==t&&(t<r||t>n)?{valid:!1,msg:o||Fe.VALIDATION_EDITOR_NUMBER_BETWEEN.replace(/{{minValue}}|{{maxValue}}/gi,(function(e){return s[e]}))}:{valid:!0,msg:null}},e.prototype.buildTemplateHtmlString=function(){var e=this.columnDef&&this.columnDef.id,t=this.columnEditor&&this.columnEditor.title||"",i=this.columnEditor.hasOwnProperty("minValue")?this.columnEditor.minValue:0,r=this.columnEditor.hasOwnProperty("maxValue")?this.columnEditor.maxValue:100,n=this.editorParams.hasOwnProperty("sliderStartValue")?this.editorParams.sliderStartValue:i,o=this.columnEditor.hasOwnProperty("valueStep")?this.columnEditor.valueStep:1;return this.defaultValue=n,this.editorParams.hideSliderNumber?'\n      <div class="slider-container slider-editor">\n        <input type="range" name="'+this._elementRangeInputId+'" title="'+t+'"\n          defaultValue="'+n+'" value="'+n+'"\n          min="'+i+'" max="'+r+'" step="'+o+'"\n          class="form-control slider-editor-input editor-'+e+" range "+this._elementRangeInputId+'" />\n      </div>':'\n      <div class="input-group slider-container slider-editor">\n        <input type="range" name="'+this._elementRangeInputId+'" title="'+t+'"\n          defaultValue="'+n+'" value="'+n+'"\n          min="'+i+'" max="'+r+'" step="'+o+'"\n          class="form-control slider-editor-input editor-'+e+" range "+this._elementRangeInputId+'" />\n        <div class="input-group-addon input-group-append slider-value"><span class="input-group-text '+this._elementRangeOutputId+'">'+n+"</span></div>\n      </div>"},e}(),gi=function(){function t(e){if(this.args=e,!e)throw new Error("[Angular-SlickGrid] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=e.grid,this.init()}return Object.defineProperty(t.prototype,"columnDef",{get:function(){return this.args&&this.args.column},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnEditor",{get:function(){return this.columnDef&&this.columnDef.internalColumnEditor||{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editorDomElement",{get:function(){return this._$input},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasAutoCommitEdit",{get:function(){return this.grid.getOptions().autoCommitEdit},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validator",{get:function(){return this.columnEditor.validator||this.columnDef.validator},enumerable:!0,configurable:!0}),t.prototype.init=function(){var t=this,i=this.columnDef&&this.columnDef.id,r=this.columnEditor&&this.columnEditor.placeholder||"",n=this.columnEditor&&this.columnEditor.title||"";this._$input=$('<input type="text" role="presentation"  autocomplete="off" class="editor-text editor-'+i+'" placeholder="'+r+'" title="'+n+'" />').appendTo(this.args.container).on("keydown.nav",(function(i){t._lastInputEvent=i,i.keyCode!==e.KeyCode.LEFT&&i.keyCode!==e.KeyCode.RIGHT||i.stopImmediatePropagation()})),this.hasAutoCommitEdit&&this._$input.on("focusout",(function(){return t.save()})),setTimeout((function(){return t.focus()}),50)},t.prototype.destroy=function(){this._$input.off("keydown.nav focusout").remove()},t.prototype.focus=function(){this._$input.focus()},t.prototype.getValue=function(){return this._$input.val()},t.prototype.setValue=function(e){this._$input.val(e)},t.prototype.applyValue=function(e,t){var i=this.columnDef&&this.columnDef.field,r=i.indexOf(".")>0,n=this.validate(t),o=n&&n.valid?t:"";r?Se(e,i,o):e[i]=o},t.prototype.isValueChanged=function(){var t=this._$input.val(),i=this._lastInputEvent&&this._lastInputEvent.keyCode;return!(!this.columnEditor||!this.columnEditor.alwaysSaveOnEnterKey||i!==e.KeyCode.ENTER)||!(""===t&&null===this.originalValue)&&t!==this.originalValue},t.prototype.loadValue=function(e){var t=this.columnDef&&this.columnDef.field,i=t.indexOf(".")>0;if(e&&this.columnDef&&(e.hasOwnProperty(t)||i)){var r=i?ce(e,t):e[t];this.originalValue=r,this._$input.val(this.originalValue),this._$input.select()}},t.prototype.save=function(){var e=this.validate();e&&e.valid&&this.isValueChanged()&&(this.hasAutoCommitEdit?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges())},t.prototype.serializeValue=function(){return this._$input.val()},t.prototype.validate=function(e){var t=this.columnEditor.required,i=e!==undefined?e:this._$input&&this._$input.val&&this._$input.val(),r=this.columnEditor.errorMessage;return this.validator?this.validator(i,this.args):t&&""===i?{valid:!1,msg:r||Fe.VALIDATION_REQUIRED_FIELD}:{valid:!0,msg:null}},t}(),yi={autoComplete:ni,checkbox:oi,date:ai,float:li,integer:di,longText:ci,multipleSelect:pi,singleSelect:mi,slider:fi,text:gi},vi=o;function bi(e,t,i,r){var n=i&&"function"==typeof i.getOptions?i.getOptions():{},o=t&&t.params;return o&&o.hasOwnProperty(e)?o[e]:n.formatterOptions&&n.formatterOptions.hasOwnProperty(e)?n.formatterOptions[e]:r}function Si(e,t){var i=he(e);return function(e,r,n,o,s,a){var l=a&&"function"==typeof a.getOptions?a.getOptions():{},d=l&&l.formatterOptions&&l.formatterOptions.dateSeparator||t,c=vi(n,i,!1).isValid(),u=n&&c?vi(n).format(i):n;if(u&&d!==t){var h=new RegExp(t,"ig");u=u.replace(h,d)}return u}}var _i=function(e,t,i,r,n){var o=r&&r.params||{},s=o.propertyNames,a=o.dataContextProperty;if(a||(a=r&&r.field&&r.field.split(".")[0]),!s||!Array.isArray(s)||!a)throw new Error('Formatters.arrayObjectToCsv requires you to pass an array of "propertyNames" (declared in "params") that you want to pull the data from.\n      For example, if we have an array of user objects that have the property of firstName & lastName then we need to pass in your column definition:: { params: { propertyNames: [\'firtName\'] }}.\n      Optionally, you can also pass the "dataContextProperty" if you wish to run this on another completely different field of the dataContext object.');if(n[a]&&Array.isArray(n[a])&&Array.isArray(n[a])&&n[a].length>0){var l=[];n[a].forEach((function(e){var t=[];s.forEach((function(i){t.push(e[i])})),l.push(t.join(" "))}));var d=l.join(", ");return'<span title="'+d+'">'+d+"</span>"}return i},Oi=function(e,t,i,r,n){if(i&&Array.isArray(i)&&i.length>0){var o=i.join(", ");return'<span title="'+o+'">'+o+"</span>"}return i},Ti=function(e,t,i,r,n){return i?"<b>"+i+"</b>":""},Ei=function(e,t,i,r,n){return i?"&#x2611;":""},Ci=function(e,t,i,r,n){var o=!1,s=null!==i&&i!==undefined&&""!==i&&!isNaN(+i);return s&&(i=+i),(!0===i||s&&+i>0||"string"==typeof i&&i.length>0&&"false"!==i.toLowerCase()&&"0"!==i)&&(o=!0),o?'<i class="fa fa-check checkmark-icon" aria-hidden="true"></i>':""},wi=function(e,t,i,r,n){if(!(i&&r&&r.params&&r.params.collection&&r.params.collection.length))return i;var o=r.params,s=r.params.collection,a=o.customStructure?o.customStructure.label:"label",l=o.customStructure?o.customStructure.value:"value";return Array.isArray(i)?Oi(0,0,i.map((function(e){return ae(s,(function(t){return t[l]===e}))[a]}))):ae(s,(function(e){return e[l]===i}))[a]||""},xi=function(e,t,i,r,n){if(!(i&&r&&r.internalColumnEditor&&r.internalColumnEditor.collection&&r.internalColumnEditor.collection.length))return i;var o=r.internalColumnEditor,s=r.internalColumnEditor.collection,a=o.customStructure?o.customStructure.label:"label",l=o.customStructure?o.customStructure.value:"value";return Array.isArray(i)?s.every((function(e){return"string"==typeof e}))?Oi(0,0,i.map((function(e){return ae(s,(function(t){return t===e}))}))):Oi(0,0,i.map((function(e){return ae(s,(function(t){return t[l]===e}))[a]}))):ae(s,(function(e){return e[l]===i}))[a]||""},Pi=function(e,t,i,r,n){if(!r)return"";var o=r.params||{},s=o&&o.complexFieldLabel||r.field;if(!s)throw new Error("For the Formatters.complexObject to work properly, you need to tell it which property of the complex object to use.\n      There are 3 ways to provide it:\n      1- via the generic \"params\" with a \"complexFieldLabel\" property on your Column Definition, example: this.columnDefs = [{ id: 'user', field: 'user', params: { complexFieldLabel: 'user.firstName' } }]\n      2- via the generic \"params\" with a \"complexFieldLabel\" and a \"labelKey\" property on your Column Definition, example: this.columnDefs = [{ id: 'user', field: 'user', labelKey: 'firstName' params: { complexFieldLabel: 'user' } }]\n      3- via the field name that includes a dot notation, example: this.columnDefs = [{ id: 'user', field: 'user.firstName'}] ");return r.labelKey&&n.hasOwnProperty(s)?n[s]&&n[s][r.labelKey]:"string"==typeof s&&s.indexOf(".")>0?s.split(".").reduce((function(e,t){return e&&e.hasOwnProperty(t)?e[t]:i}),n):i},Ai=function(e,t,i,r,n,o){var s=null!==i&&i!==undefined&&""!==i&&!isNaN(+i),a=r.params||{},l=bi("minDecimal",r,o,2),d=bi("maxDecimal",r,o,2),c=bi("decimalSeparator",r,o,"."),u=bi("thousandSeparator",r,o,""),h=bi("displayNegativeNumberWithParentheses",r,o,!1);return(null!==a.minDecimalPlaces&&a.minDecimalPlaces||null!==a.decimalPlaces&&a.decimalPlaces)&&(console.warn('[Angular-Slickgrid] please consider using "minDecimal" (instead of "minDecimalPlaces" or "decimalPlaces").'),l=null!==a.minDecimalPlaces&&a.minDecimalPlaces||null!==a.decimalPlaces&&a.decimalPlaces),null!==a.maxDecimalPlaces&&a.maxDecimalPlaces&&(console.warn('[Angular-Slickgrid] please consider using "maxDecimal" (instead of "maxDecimalPlaces").'),d=null!==a.maxDecimalPlaces&&a.maxDecimalPlaces),s?de(i,l,d,h,"","",c,u):i},Di=function(e,t,i,r,n){return'<i class="fa fa-trash pointer delete-icon" aria-hidden="true"></i>'},Ii=function(e,t,i,r,n,o){var s=null!==i&&i!==undefined&&""!==i&&!isNaN(+i),a=bi("minDecimal",r,o,2),l=bi("maxDecimal",r,o,4),d=bi("decimalSeparator",r,o,"."),c=bi("thousandSeparator",r,o,""),u=bi("displayNegativeNumberWithParentheses",r,o,!1);return s?'<span style="color:'+(i>=0?"green":"red")+'; font-weight:bold;">'+de(i,a,l,u,"$","",d,c)+"</span>":i},Fi=function(e,t,i,r,n,o){var s=null!==i&&i!==undefined&&""!==i&&!isNaN(+i),a=bi("minDecimal",r,o,2),l=bi("maxDecimal",r,o,4),d=bi("decimalSeparator",r,o,"."),c=bi("thousandSeparator",r,o,""),u=bi("displayNegativeNumberWithParentheses",r,o,!1);return s?'<span style="color:'+(i>=0?"green":"red")+'">'+de(i,a,l,u,"$","",d,c)+"</span>":i},ki=function(e,t,i,r,n,o){var s=null!==i&&i!==undefined&&""!==i&&!isNaN(+i),a=bi("minDecimal",r,o,2),l=bi("maxDecimal",r,o,4),d=bi("decimalSeparator",r,o,"."),c=bi("thousandSeparator",r,o,""),u=bi("displayNegativeNumberWithParentheses",r,o,!1);return s?de(i,a,l,u,"$","",d,c):i},Mi=function(e,t,i,r,n){return'<i class="fa fa-pencil pointer edit-icon" aria-hidden="true"></i>'},Ni=p,Ri=function(e,t,i,r,n){var o=r&&r.params||{},s=o.hyperlinkText?o.hyperlinkText:i;s=Ni.sanitize(s||"");var a=o.hyperlinkUrl?o.hyperlinkUrl:i,l=(a=Ni.sanitize(a||"")).match(/^(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?/i);return l&&Array.isArray(l)&&l.length>0?'<a href="'+l[0]+'">'+s+"</a>":i},Vi=function(e,t,i,r,n){var o=r&&r.params||{},s=o.icon||o.formatterIcon;if(!s)throw new Error('You must provide the "icon" or "formatterIcon" via the generic "params" options (e.g.: { formatter: Formatters.icon, params: { formatterIcon: \'fa fa-search\' }}');return'<i class="'+s+'" aria-hidden="true"></i>'},Gi=function(e,t,i,r,n){return'<i class="fa fa-info-circle pointer info-icon" aria-hidden="true"></i>'},$i=function(e,t,i,r,n){return i?"<i>"+i+"</i>":""},Li=function(e,t,i,r,n){return i!==undefined&&"string"!=typeof i&&(i+=""),i?i.toLowerCase():""},ji=function(e,t,i,r,n){var o=(r.params||{}).mask;if(!o)throw new Error('You must provide a "mask" via the generic "params" options (e.g.: { formatter: Formatters.mask, params: { mask: \'000-000\' }}');if(i){var s=0,a=i.toString();return o.replace(/[09A]/gi,(function(){return a[s++]||""}))}return i},Hi=function(e,t,i,r,n,o){var s,a,l=r.params||{};if(!l.formatters||!Array.isArray(l.formatters))throw new Error('The multiple formatter requires the "formatters" to be provided as a column params.\n    For example: this.columnDefinitions = [{ id: title, field: title, formatter: Formatters.multiple, params: { formatters: [Formatters.lowercase, Formatters.uppercase] }');var d=l.formatters,c=i;try{for(var u=j(d),h=u.next();!h.done;h=u.next()){c=(0,h.value)(e,t,c,r,n,o)}}catch(p){s={error:p}}finally{try{h&&!h.done&&(a=u["return"])&&a.call(u)}finally{if(s)throw s.error}}return c},Bi=function(e,t,i,r,n,o){var s=null!==i&&i!==undefined&&""!==i&&!isNaN(+i),a=bi("minDecimal",r,o),l=bi("maxDecimal",r,o),d=bi("decimalSeparator",r,o,"."),c=bi("thousandSeparator",r,o,""),u=bi("displayNegativeNumberWithParentheses",r,o,!1);return s?de(100*i,a,l,u,"","%",d,c):i},Ui=function(e,t,i,r,n){if(!(null!==i&&i!==undefined&&""!==i&&!isNaN(+i)))return"";var o=parseFloat(i);return o>100&&(o=100),'<span class="percent-complete-bar" style="background:'+(o<30?"red":o<70?"silver":"green")+"; width:"+o+'%"></span>'},zi=function(e,t,i,r,n,o){var s=null!==i&&i!==undefined&&""!==i&&!isNaN(+i),a=bi("minDecimal",r,o),l=bi("maxDecimal",r,o),d=bi("decimalSeparator",r,o,"."),c=bi("thousandSeparator",r,o,""),u=bi("displayNegativeNumberWithParentheses",r,o,!1);if(s){var h=i<50?"red":"green",p=de(i,a,l,u,"","%",d,c);return"<span style='color:"+h+"'>"+(i>100?"100%":p)+"</span>"}return i},Wi=function(e,t,i,r,n,o){var s=null!==i&&i!==undefined&&""!==i&&!isNaN(+i),a=bi("minDecimal",r,o),l=bi("maxDecimal",r,o),d=bi("decimalSeparator",r,o,"."),c=bi("thousandSeparator",r,o,""),u=bi("displayNegativeNumberWithParentheses",r,o,!1);return s?de(i,a,l,u,"","%",d,c):i},qi=function(e,t,i,r,n){if(!(null!==i&&i!==undefined&&""!==i&&!isNaN(+i)))return"";var o="",s=parseFloat(i);return s>100&&(s=100),('<div class="progress">\n    <div class="progress-bar progress-bar-'+(o=s<30?"danger":s<70?"warning":"success")+" bg-"+o+'" role="progressbar" aria-valuenow="'+s+'" aria-valuemin="0" aria-valuemax="100" style="min-width: 2em; width: '+s+'%;">\n    '+s+"%\n    </div>\n  </div>").replace(/\s{2,}/g," ").trim()},Qi=function(e,t,i,r,n,o){var s=(o&&"function"==typeof o.getOptions?o.getOptions():{}).i18n||r&&r.params&&r.params.i18n;if(!s||"function"!=typeof s.instant)throw new Error('The translate formatter requires the "ngx-translate" Service to be provided as a Grid Options or Column Definition "i18n".\n    For example: this.gridOptions = { enableTranslate: true, i18n: this.translate }');return i!==undefined&&null!==i&&"string"!=typeof i&&(i+=""),i?s.instant(i):""},Xi=function(e,t,i,r,n,o){var s=(o&&"function"==typeof o.getOptions?o.getOptions():{}).i18n||r&&r.params&&r.params.i18n;if(!s||"function"!=typeof s.instant)throw new Error('The translate formatter requires the "ngx-translate" Service to be provided as a Grid Options or Column Definition "i18n".\n    For example: this.gridOptions = { enableTranslate: true, i18n: this.translate }');return i!==undefined&&null!==i&&"string"!=typeof i&&(i+=""),i?s.instant(i.toUpperCase()):""},Ki=function(e,t,i,r,n){return i!==undefined&&"string"!=typeof i&&(i+=""),i?i.toUpperCase():""},Yi=function(e,t,i,r,n){return i?"Yes":"No"},Zi=function(e,t,i,r,n){var o=r&&r.params||{},s=o.label||o.formatterLabel;if(!s)throw new Error('You must provide the "label" or "formatterLabel" via the generic "params" options (e.g.: { formatter: Formatters.bsDropdown, params: { formatterLabel: \'Label\' }}');return'<div id="myDrop-r'+e+"-c"+t+'" class="dropdown pointer">\n    <a class="dropdown-toggle">\n      '+s+'\n      <span class="caret"></span>\n    </a>\n  </div>'},Ji={arrayObjectToCsv:_i,arrayToCsv:Oi,bold:Ti,bsDropdown:Zi,checkbox:Ei,checkmark:Ci,complexObject:Pi,collection:wi,collectionEditor:xi,dateIso:Si(e.FieldType.dateIso,"-"),dateTimeIso:Si(e.FieldType.dateTimeIso,"-"),dateTimeShortIso:Si(e.FieldType.dateTimeShortIso,"-"),dateTimeIsoAmPm:Si(e.FieldType.dateTimeIsoAmPm,"-"),dateEuro:Si(e.FieldType.dateEuro,"/"),dateTimeEuro:Si(e.FieldType.dateTimeEuro,"/"),dateTimeShortEuro:Si(e.FieldType.dateTimeShortEuro,"/"),dateTimeEuroAmPm:Si(e.FieldType.dateTimeEuroAmPm,"/"),dateUs:Si(e.FieldType.dateUs,"/"),dateTimeUs:Si(e.FieldType.dateTimeUs,"/"),dateTimeShortUs:Si(e.FieldType.dateTimeShortUs,"/"),dateTimeUsAmPm:Si(e.FieldType.dateTimeUsAmPm,"/"),deleteIcon:Di,decimal:Ai,dollar:ki,dollarColored:Fi,dollarColoredBold:Ii,editIcon:Mi,hyperlink:Ri,icon:Vi,infoIcon:Gi,italic:$i,lowercase:Li,mask:ji,multiple:Hi,percent:Bi,percentComplete:zi,percentCompleteBar:Ui,percentSymbol:Wi,progressBar:qi,translate:Qi,translateBoolean:Xi,uppercase:Ki,yesNo:Yi},er=function(e,t,i){var r=t.field||"",n=e.avg&&e.avg[r],o=t&&t.params,s=o&&o.groupFormatterPrefix||"",a=o&&o.groupFormatterSuffix||"",l=bi("minDecimal",t,i),d=bi("maxDecimal",t,i),c=bi("decimalSeparator",t,i,"."),u=bi("thousandSeparator",t,i,""),h=bi("displayNegativeNumberWithParentheses",t,i,!1);if(null!=n&&!isNaN(+n)){if(n<0){if(n=Math.abs(n),h)return isNaN(l)&&isNaN(d)?s+"("+_e(Math.round(n),u)+"%)"+a:s+"("+le(n,l,d,c,u)+"%)"+a;s+="-"}return isNaN(l)&&isNaN(d)?""+s+_e(Math.round(n),u)+"%"+a:""+s+le(n,l,d,c,u)+"%"+a}return""},tr=function(e,t,i){var r=t.field||"",n=e.avg&&e.avg[r],o=t&&t.params,s=o&&o.groupFormatterPrefix||"",a=o&&o.groupFormatterSuffix||"",l=bi("minDecimal",t,i,2),d=bi("maxDecimal",t,i,4),c=bi("decimalSeparator",t,i,"."),u=bi("thousandSeparator",t,i,""),h=bi("displayNegativeNumberWithParentheses",t,i,!1);return null==n||isNaN(+n)?"":""+s+de(n,l,d,h,"$","",c,u)+a},ir=function(e,t,i){var r=t.field||"",n=e.avg&&e.avg[r],o=t&&t.params,s=o&&o.groupFormatterPrefix||"",a=o&&o.groupFormatterSuffix||"",l=bi("minDecimal",t,i),d=bi("maxDecimal",t,i),c=bi("decimalSeparator",t,i,"."),u=bi("thousandSeparator",t,i,""),h=bi("displayNegativeNumberWithParentheses",t,i,!1);if(null!=n&&!isNaN(+n)){if(n<0){if(n=Math.abs(n),h)return isNaN(l)&&isNaN(d)?s+"("+_e(Math.round(n),u)+")"+a:s+"("+le(n,l,d,c,u)+")"+a;s+="-"}return isNaN(l)&&isNaN(d)?""+s+_e(Math.round(n),u)+a:""+s+le(n,l,d,c,u)+a}return""},rr=function(e,t,i){var r=t.field||"",n=e.min&&e.min[r],o=t&&t.params,s=o&&o.groupFormatterPrefix||"",a=o&&o.groupFormatterSuffix||"",l=bi("minDecimal",t,i),d=bi("maxDecimal",t,i),c=bi("decimalSeparator",t,i,"."),u=bi("thousandSeparator",t,i,""),h=bi("displayNegativeNumberWithParentheses",t,i,!1);return null==n||isNaN(+n)?"":""+s+de(n,l,d,h,"","",c,u)+a},nr=function(e,t,i){var r=t.field||"",n=e.max&&e.max[r],o=t&&t.params,s=o&&o.groupFormatterPrefix||"",a=o&&o.groupFormatterSuffix||"",l=bi("minDecimal",t,i),d=bi("maxDecimal",t,i),c=bi("decimalSeparator",t,i,"."),u=bi("thousandSeparator",t,i,""),h=bi("displayNegativeNumberWithParentheses",t,i,!1);return null==n||isNaN(+n)?"":""+s+de(n,l,d,h,"","",c,u)+a},or=function(e,t,i){var r=t.field||"",n=e.sum&&e.sum[r],o=t&&t.params,s=o&&o.groupFormatterPrefix||"",a=o&&o.groupFormatterSuffix||"",l=bi("minDecimal",t,i),d=bi("maxDecimal",t,i),c=bi("decimalSeparator",t,i,"."),u=bi("thousandSeparator",t,i,""),h=bi("displayNegativeNumberWithParentheses",t,i,!1);return null==n||isNaN(+n)?"":'<span style="color:'+(n>=0?"green":"red")+'">'+s+de(n,l,d,h,"","",c,u)+a+"</span>"},sr=function(e,t,i){var r=t.field||"",n=e.sum&&e.sum[r],o=t&&t.params,s=o&&o.groupFormatterPrefix||"",a=o&&o.groupFormatterSuffix||"",l=bi("minDecimal",t,i,2),d=bi("maxDecimal",t,i,4),c=bi("decimalSeparator",t,i,"."),u=bi("thousandSeparator",t,i,""),h=bi("displayNegativeNumberWithParentheses",t,i,!1);return null==n||isNaN(+n)?"":'<span style="color:'+(n>=0?"green":"red")+'; font-weight: bold;">'+s+de(n,l,d,h,"$","",c,u)+a+"</span>"},ar=function(e,t,i){var r=t.field||"",n=e.sum&&e.sum[r],o=t&&t.params,s=o&&o.groupFormatterPrefix||"",a=o&&o.groupFormatterSuffix||"",l=bi("minDecimal",t,i,2),d=bi("maxDecimal",t,i,4),c=bi("decimalSeparator",t,i,"."),u=bi("thousandSeparator",t,i,""),h=bi("displayNegativeNumberWithParentheses",t,i,!1);return null==n||isNaN(+n)?"":'<span style="color:'+(n>=0?"green":"red")+'">'+s+de(n,l,d,h,"$","",c,u)+a+"</span>"},lr=function(e,t,i){var r=t.field||"",n=e.sum&&e.sum[r],o=t&&t.params,s=o&&o.groupFormatterPrefix||"",a=o&&o.groupFormatterSuffix||"",l=bi("minDecimal",t,i,2),d=bi("maxDecimal",t,i,4),c=bi("decimalSeparator",t,i,"."),u=bi("thousandSeparator",t,i,""),h=bi("displayNegativeNumberWithParentheses",t,i,!1);return null==n||isNaN(+n)?"":"<b>"+s+de(n,l,d,h,"$","",c,u)+a+"</b>"},dr=function(e,t,i){var r=t.field||"",n=e.sum&&e.sum[r],o=t&&t.params,s=o&&o.groupFormatterPrefix||"",a=o&&o.groupFormatterSuffix||"",l=bi("minDecimal",t,i,2),d=bi("maxDecimal",t,i,4),c=bi("decimalSeparator",t,i,"."),u=bi("thousandSeparator",t,i,""),h=bi("displayNegativeNumberWithParentheses",t,i,!1);return null==n||isNaN(+n)?"":""+s+de(n,l,d,h,"$","",c,u)+a},cr=function(e,t,i){var r=t.field||"",n=e.sum&&e.sum[r],o=t&&t.params,s=o&&o.groupFormatterPrefix||"",a=o&&o.groupFormatterSuffix||"",l=bi("minDecimal",t,i),d=bi("maxDecimal",t,i),c=bi("decimalSeparator",t,i,"."),u=bi("thousandSeparator",t,i,""),h=bi("displayNegativeNumberWithParentheses",t,i,!1);return null==n||isNaN(+n)?"":""+s+de(n,l,d,h,"","",c,u)+a},ur=function(e,t,i){var r=t.field||"",n=e.sum&&e.sum[r],o=t&&t.params,s=o&&o.groupFormatterPrefix||"",a=o&&o.groupFormatterSuffix||"",l=bi("minDecimal",t,i),d=bi("maxDecimal",t,i),c=bi("decimalSeparator",t,i,"."),u=bi("thousandSeparator",t,i,""),h=bi("displayNegativeNumberWithParentheses",t,i,!1);return null==n||isNaN(+n)?"":"<b>"+s+de(n,l,d,h,"","",c,u)+a+"</b>"},hr={avgTotals:ir,avgTotalsDollar:tr,avgTotalsPercentage:er,maxTotals:nr,minTotals:rr,sumTotals:cr,sumTotalsBold:ur,sumTotalsColored:or,sumTotalsDollar:dr,sumTotalsDollarBold:lr,sumTotalsDollarColored:ar,sumTotalsDollarColoredBold:sr},pr=function(){function e(e,t){this.paginationService=e,this.translate=t,this.subscriptions=[],this._enableTranslate=!1,this.textItemsPerPage="items per page",this.textItems="items",this.textOf="of",this.textPage="Page"}return Object.defineProperty(e.prototype,"availablePageSizes",{get:function(){return this.paginationService.availablePageSizes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataFrom",{get:function(){return this.paginationService.dataFrom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataTo",{get:function(){return this.paginationService.dataTo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemsPerPage",{get:function(){return this.paginationService.itemsPerPage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageCount",{get:function(){return this.paginationService.pageCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageNumber",{get:function(){return this.paginationService.pageNumber},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalItems",{get:function(){return this.paginationService.totalItems},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.dispose()},e.prototype.ngOnInit=function(){var e=this,t=this.gridOptions||{};if(this._enableTranslate=t&&t.enableTranslate||!1,this._locales=t&&t.locales||Fe.locales,this._enableTranslate&&!this.translate)throw new Error('[Angular-Slickgrid] requires "ngx-translate" to be installed and configured when the grid option "enableTranslate" is enabled.');this.translateAllUiTexts(this._locales),this._enableTranslate&&this.translate&&this.translate.onLangChange&&this.subscriptions.push(this.translate.onLangChange.subscribe((function(){return e.translateAllUiTexts(e._locales)})))},e.prototype.changeToFirstPage=function(e){this.paginationService.goToFirstPage(e)},e.prototype.changeToLastPage=function(e){this.paginationService.goToLastPage(e)},e.prototype.changeToNextPage=function(e){this.paginationService.goToNextPage(e)},e.prototype.changeToPreviousPage=function(e){this.paginationService.goToPreviousPage(e)},e.prototype.changeToCurrentPage=function(e){var t=1;e&&e.currentTarget&&e.currentTarget.value&&(t=+e.currentTarget.value),this.paginationService.goToPageNumber(t,e)},e.prototype.changeItemPerPage=function(e){var t=1;e&&e.currentTarget&&e.currentTarget.value&&(t=+e.currentTarget.value),this.paginationService.changeItemPerPage(t,e)},e.prototype.dispose=function(){this.paginationService.dispose(),this.subscriptions=Ce(this.subscriptions)},e.prototype.translateAllUiTexts=function(e){this._enableTranslate&&this.translate&&this.translate.instant&&this.translate.currentLang?(this.textItemsPerPage=this.translate.instant("ITEMS_PER_PAGE"),this.textItems=this.translate.instant("ITEMS"),this.textOf=this.translate.instant("OF"),this.textPage=this.translate.instant("PAGE")):e&&(this.textItemsPerPage=e.TEXT_ITEMS_PER_PAGE||"TEXT_ITEMS_PER_PAGE",this.textItems=e.TEXT_ITEMS||"TEXT_ITEMS",this.textOf=e.TEXT_OF||"TEXT_OF",this.textPage=e.TEXT_PAGE||"TEXT_PAGE")},N([t.Input(),V("design:type",Object)],e.prototype,"gridOptions",void 0),e=N([t.Component({selector:"slick-pagination",template:'<div class="slick-pagination">\r\n  <div class="slick-pagination-nav">\r\n    <nav aria-label="Page navigation">\r\n      <ul class="pagination">\r\n        <li class="page-item" [ngClass]="(pageNumber === 1 || totalItems === 0) ? \'disabled\' : \'\'">\r\n          <a class="page-link icon-seek-first fa fa-angle-double-left" aria-label="First"\r\n            (click)="changeToFirstPage($event)">\r\n          </a>\r\n        </li>\r\n        <li class="page-item" [ngClass]="(pageNumber === 1 || totalItems === 0) ? \'disabled\' : \'\'">\r\n          <a class="page-link icon-seek-prev fa fa-angle-left" aria-label="Previous"\r\n            (click)="changeToPreviousPage($event)">\r\n          </a>\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n\r\n    <div class="slick-page-number">\r\n      <span>{{textPage}}</span>\r\n      <input type="text" class="form-control" data-test="page-number-input" [value]="pageNumber" size="1"\r\n        [readOnly]="totalItems === 0" (change)="changeToCurrentPage($event)">\r\n      <span>{{textOf}}</span><span data-test="page-count"> {{pageCount}}</span>\r\n    </div>\r\n\r\n    <nav aria-label="Page navigation">\r\n      <ul class="pagination">\r\n        <li class="page-item" [ngClass]="(pageNumber === pageCount || totalItems === 0) ? \'disabled\' : \'\'">\r\n          <a class="page-link icon-seek-next text-center fa fa-lg fa-angle-right" aria-label="Next"\r\n            (click)="changeToNextPage($event)">\r\n          </a>\r\n        </li>\r\n        <li class="page-item" [ngClass]="(pageNumber === pageCount || totalItems === 0) ? \'disabled\' : \'\'">\r\n          <a class="page-link icon-seek-end fa fa-lg fa-angle-double-right" aria-label="Last"\r\n            (click)="changeToLastPage($event)">\r\n          </a>\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n  </div>\r\n  <span class="slick-pagination-settings">\r\n    <select id="items-per-page-label" [value]="itemsPerPage" (change)="changeItemPerPage($event)">\r\n      <option value="{{pageSize}}" *ngFor="let pageSize of availablePageSizes">{{pageSize}}</option>\r\n    </select>\r\n    <span>{{textItemsPerPage}}</span>,\r\n    <span class="slick-pagination-count">\r\n      <span *ngIf="totalItems">\r\n        <span class="page-info-from-to">\r\n          <span data-test="item-from">{{dataFrom}}</span>-<span data-test="item-to">{{dataTo}}</span>\r\n          {{textOf}}\r\n        </span>\r\n      </span>\r\n      <span class="page-info-total-items">\r\n        <span data-test="total-items">{{totalItems}}</span> {{textItems}}\r\n      </span>\r\n    </span>\r\n  </span>\r\n</div>\r\n'}),R(1,t.Optional()),V("design:paramtypes",[Zt,n.TranslateService])],e)}(),mr=function(){function r(e,i,r,n,o,s,a,l,d,c,u,h,p,m,f,g,y){this.cd=e,this.elm=i,this.excelExportService=r,this.exportService=n,this.extensionService=o,this.extensionUtility=s,this.filterService=a,this.gridEventService=l,this.gridService=d,this.gridStateService=c,this.groupingAndColspanService=u,this.paginationService=h,this.resizer=p,this.sharedService=m,this.sortService=f,this.translate=g,this.forRootConfig=y,this._eventHandler=new Slick.EventHandler,this._hideHeaderRowAfterPageLoad=!1,this._isGridInitialized=!1,this._isDatasetInitialized=!1,this._isPaginationInitialized=!1,this._isLocalGrid=!0,this.groupingDefinition={},this.showCustomFooter=!1,this.showPagination=!1,this.totalItems=0,this.subscriptions=[],this.onAngularGridCreated=new t.EventEmitter,this.onDataviewCreated=new t.EventEmitter,this.onGridCreated=new t.EventEmitter,this.onGridInitialized=new t.EventEmitter,this.onBeforeGridCreate=new t.EventEmitter,this.onBeforeGridDestroy=new t.EventEmitter,this.onAfterGridDestroyed=new t.EventEmitter,this.onGridStateChanged=new t.EventEmitter,this.onGridBeforeExportToFile=this.exportService.onGridBeforeExportToFile,this.onGridAfterExportToFile=this.exportService.onGridAfterExportToFile,this.onGridBeforeExportToExcel=this.excelExportService.onGridBeforeExportToExcel,this.onGridAfterExportToExcel=this.excelExportService.onGridAfterExportToExcel}return Object.defineProperty(r.prototype,"gridHeight",{set:function(e){this._fixedHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"gridWidth",{set:function(e){this._fixedWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"columnDefinitions",{get:function(){return this._columnDefinitions},set:function(e){this._columnDefinitions=e,this._isGridInitialized&&this.updateColumnDefinitionsList(e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dataset",{get:function(){return this.dataView.getItems()},set:function(e){this._dataset=e,this.refreshGridData(e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"elementRef",{get:function(){return this.elm},enumerable:!0,configurable:!0}),r.prototype.ngAfterViewInit=function(){if(this.initialization(),this._isGridInitialized=!0,!this._fixedHeight&&!this.gridOptions.enableAutoResize)throw new Error('[Angular-Slickgrid] requires a "grid-height" or the "enableAutoResize" grid option to be enabled.\n        Without that the grid will seem empty while in fact it just does not have any height define.')},r.prototype.ngOnInit=function(){this.onBeforeGridCreate.emit(!0),this.gridOptions&&!this.gridOptions.enableAutoResize&&(this._fixedHeight||this._fixedWidth)&&(this.gridHeightString=this._fixedHeight+"px",this.gridWidthString=this._fixedWidth+"px")},r.prototype.ngOnDestroy=function(){this.onBeforeGridDestroy.emit(this.grid),this.destroy(),this.onAfterGridDestroyed.emit(!0)},r.prototype.destroy=function(e){void 0===e&&(e=!1),this.dataView=undefined,this.gridOptions={},this.extensionService.dispose(),this.filterService.dispose(),this.gridEventService.dispose(),this.gridStateService.dispose(),this.groupingAndColspanService.dispose(),this.paginationService.dispose(),this.resizer.dispose(),this.sortService.dispose(),this._eventHandler&&this._eventHandler.unsubscribeAll&&this._eventHandler.unsubscribeAll(),this.grid&&this.grid.destroy&&this.grid.destroy(),e&&this.destroyGridContainerElm(),this.subscriptions=Ce(this.subscriptions)},r.prototype.destroyGridContainerElm=function(){var e=this.gridOptions&&this.gridOptions.gridContainerId||"grid1";$(e).empty()},r.prototype.dispatchCustomEvent=function(e,t,i,r){void 0===i&&(i=!0),void 0===r&&(r=!0);var n={bubbles:i,cancelable:r};return t&&(n.detail=t),this.elm.nativeElement.dispatchEvent(new CustomEvent(e,n))},r.prototype.createBackendApiInternalPostProcessCallback=function(e){var t=this,i=e&&e.backendServiceApi;i&&i.service&&(i.service instanceof $t||"function"==typeof i.service.getDatasetName)&&(i.internalPostProcess=function(e){var r=i&&i.service&&"function"==typeof i.service.getDatasetName?i.service.getDatasetName():"";if(t._dataset=[],e&&e.data&&e.data[r]){t._dataset=e.data[r].hasOwnProperty("nodes")?e.data[r].nodes:e.data[r];var n=e.data[r].hasOwnProperty("totalCount")?e.data[r].totalCount:e.data[r].length;t.refreshGridData(t._dataset,n||0)}})},r.prototype.paginationChanged=function(t){this.gridStateService&&this.gridStateService.needToPreserveRowSelection()||!1||!this.gridOptions.enableRowSelection&&!this.gridOptions.enableCheckboxSelector||this.gridService.setSelectedRows([]);var i=t.pageNumber,r=t.pageSize;this.sharedService&&r&&(this.sharedService.currentPagination={pageNumber:i,pageSize:r}),this.gridStateService.onGridStateChanged.next({change:{newValues:{pageNumber:i,pageSize:r},type:e.GridStateType.pagination},gridState:this.gridStateService.getCurrentGridState()})},r.prototype.refreshGridData=function(e,t){if(Array.isArray(e)&&this.grid&&this.dataView&&"function"==typeof this.dataView.setItems){if(this.dataView.setItems(e,this.gridOptions.datasetIdPropertyName),this.gridOptions.backendServiceApi||this.dataView.reSort(),e.length>0&&(!this._isDatasetInitialized&&this.gridOptions.enableCheckboxSelector&&this.loadRowSelectionPresetWhenExists(),this._isDatasetInitialized=!0),e&&(this.grid.invalidate(),this.grid.render()),this.showPagination=!(!this.gridOptions||!(this.gridOptions.enablePagination||this.gridOptions.backendServiceApi&&this.gridOptions.enablePagination===undefined)),this.gridOptions&&this.gridOptions.backendServiceApi&&this.gridOptions.pagination){var i=this.setPaginationOptionsWhenPresetDefined(this.gridOptions,this.paginationOptions),r=t!==undefined?t:this.gridOptions&&this.gridOptions.pagination&&this.gridOptions.pagination.totalItems;r!==this.totalItems&&(this.totalItems=r),this._isPaginationInitialized?this.paginationService.totalItems=this.totalItems:this.initializePaginationService(i)}if(this.grid&&this.gridOptions.enableAutoResize){var n=this.gridOptions.autoResize&&this.gridOptions.autoResize.delay;this.resizer.resizeGrid(n||10)}}},r.prototype.setPaginationOptionsWhenPresetDefined=function(e,t){return e.presets&&e.presets.pagination&&e.pagination&&(t.pageSize=e.presets.pagination.pageSize,t.pageNumber=e.presets.pagination.pageNumber),t},r.prototype.updateColumnDefinitionsList=function(e){e=this.swapInternalEditorToSlickGridFactoryEditor(e),this.gridOptions.enableTranslate?this.extensionService.translateColumnHeaders(!1,e):this.extensionService.renderColumnHeaders(e),this.gridOptions&&this.gridOptions.enableAutoSizeColumns&&this.grid.autosizeColumns()},r.prototype.showHeaderRow=function(e){return void 0===e&&(e=!0),this.grid.setHeaderRowVisibility(e),e},r.prototype.bindDifferentHooks=function(e,t,i){var r=this;if(this.translate&&this.translate.onLangChange&&(t.enableTranslate&&(this.translateColumnHeaderTitleKeys(),this.translateColumnGroupKeys(),this.translateCustomFooterTexts()),this.subscriptions.push(this.translate.onLangChange.subscribe((function(){t.enableTranslate&&(r.extensionService.translateCellMenu(),r.extensionService.translateColumnHeaders(),r.extensionService.translateColumnPicker(),r.extensionService.translateContextMenu(),r.extensionService.translateGridMenu(),r.extensionService.translateHeaderMenu(),r.translateCustomFooterTexts(),r.translateColumnHeaderTitleKeys(),r.translateColumnGroupKeys())})))),t.presets&&Array.isArray(t.presets.columns)&&t.presets.columns.length>0){var n=this.gridStateService.getAssociatedGridColumns(e,t.presets.columns);if(n&&Array.isArray(n)&&n.length>0){if(t.enableCheckboxSelector){var o=Array.isArray(this._columnDefinitions)&&this._columnDefinitions.length>0?this._columnDefinitions[0]:null;o&&"_checkbox_selector"===o.id&&"_checkbox_selector"!==n[0].id&&n.unshift(o)}e.setColumns(n)}}if(t.enableSorting&&!this.customDataView&&(t.backendServiceApi&&!t.backendServiceApi.useLocalSorting?this.sortService.bindBackendOnSort(e,i):this.sortService.bindLocalOnSort(e,i)),t.enableFiltering&&!this.customDataView&&(this.filterService.init(e),t.presets&&Array.isArray(t.presets.filters)&&t.presets.filters.length>0&&this.filterService.populateColumnFilterSearchTermPresets(t.presets.filters),t.backendServiceApi&&!t.backendServiceApi.useLocalFiltering?this.filterService.bindBackendOnFilter(e,this.dataView):this.filterService.bindLocalOnFilter(e,this.dataView)),t.backendServiceApi){var s=t.backendServiceApi;s&&s.service&&s.service.init&&s.service.init(s.options,t.pagination,this.grid)}var a=function(t){e.hasOwnProperty(t)&&t.startsWith("on")&&l._eventHandler.subscribe(e[t],(function(e,i){return r.dispatchCustomEvent("sg"+Oe(t),{eventData:e,args:i})}))},l=this;for(var d in e)a(d);var c=function(e){i.hasOwnProperty(e)&&e.startsWith("on")&&u._eventHandler.subscribe(i[e],(function(t,i){return r.dispatchCustomEvent("sg"+Oe(e),{eventData:t,args:i})}))},u=this;for(var d in i)c(d);this.subscriptions.push(this.gridStateService.onGridStateChanged.subscribe((function(e){r.onGridStateChanged.emit(e)}))),this.gridEventService.bindOnCellChange(e,i),this.gridEventService.bindOnClick(e,i),i&&e&&(this._eventHandler.subscribe(i.onRowCountChanged,(function(t,i){e.invalidate(),r.metrics={startTime:new Date,endTime:new Date,itemCount:i&&i.current||0,totalItemCount:Array.isArray(r.dataset)?r.dataset.length:0}})),t&&t.enableFiltering&&!t.enableRowDetailView&&this._eventHandler.subscribe(i.onRowsChanged,(function(t,i){i&&i.rows&&Array.isArray(i.rows)&&(i.rows.forEach((function(t){return e.updateRow(t)})),e.render())}))),t&&t.colspanCallback&&i&&i.getItem&&i.getItemMetadata&&(i.getItemMetadata=function(e){var r=null;return t.colspanCallback&&t.colspanCallback&&(r=t.colspanCallback(i.getItem(e))),r})},r.prototype.bindBackendCallbackFunctions=function(e){var t=this,r=e.backendServiceApi,n=r&&r.service,o=n&&n.options||{},s=!!o&&(!o||!o.hasOwnProperty("executeProcessCommandOnInit")||o.executeProcessCommandOnInit);if(n){if(e&&e.presets){if(n.updateFilters&&Array.isArray(e.presets.filters)&&e.presets.filters.length>0&&n.updateFilters(e.presets.filters,!0),n.updateSorters&&Array.isArray(e.presets.sorters)&&e.presets.sorters.length>0&&n.updateSorters(undefined,e.presets.sorters),n.updatePagination&&e.presets.pagination){var a=e.presets.pagination,l=a.pageNumber,d=a.pageSize;n.updatePagination(l,d)}}else{var c=this.filterService.getColumnFilters();c&&n.updateFilters&&n.updateFilters(c,!1)}if(r&&n&&(r.onInit||s)){var u="function"==typeof n.buildQuery?n.buildQuery():"",h=s?r.process&&r.process(u)||null:r.onInit&&r.onInit(u)||null;setTimeout((function(){var e=new Date;r.preProcess&&r.preProcess();var n=t.gridOptions&&t.gridOptions.pagination&&t.gridOptions.pagination.totalItems;h instanceof Promise&&h.then?h.then((function(t){return W(e,t,r,n)}))["catch"]((function(e){return q(e,r)})):i.isObservable(h)&&h.subscribe((function(t){return W(e,t,r,n)}),(function(e){return q(e,r)}))}))}}},r.prototype.bindResizeHook=function(e,t){e&&t.autoFitColumnsOnFirstLoad&&t.enableAutoSizeColumns&&(e.autosizeColumns(),this.resizer.compensateHorizontalScroll(this.grid,this.gridOptions)),this._fixedHeight||this._fixedWidth?this.resizer.init(e,{height:this._fixedHeight,width:this._fixedWidth}):this.resizer.init(e),t.enableAutoResize&&(this.resizer.bindAutoResizeDataGrid(),e&&t.autoFitColumnsOnFirstLoad&&t.enableAutoSizeColumns&&e.autosizeColumns())},r.prototype.executeAfterDataviewCreated=function(e,t,i){t.enableSorting&&t.presets&&Array.isArray(t.presets.sorters)&&t.presets.sorters.length>0&&this.sortService.loadGridSorters(t.presets.sorters)},r.prototype.initializePaginationService=function(e){var t=this;this.gridOptions&&(this.paginationData={gridOptions:this.gridOptions},this.paginationService.totalItems=this.totalItems,this.paginationService.init(this.grid,this.dataView,e,this.backendServiceApi),this.subscriptions.push(this.paginationService.onPaginationChanged.subscribe((function(e){return t.paginationChanged(e)})),this.paginationService.onPaginationVisibilityChanged.subscribe((function(e){t.showPagination=e&&e.visible||!1,t.gridOptions&&t.gridOptions.backendServiceApi&&X()}))),this._isPaginationInitialized=!0),this.cd.detectChanges()},r.prototype.initialization=function(){if(this._dataset=this._dataset||[],this.gridOptions=this.mergeGridOptions(this.gridOptions),this.paginationOptions=this.gridOptions.pagination,this.locales=this.gridOptions&&this.gridOptions.locales||Fe.locales,this.backendServiceApi=this.gridOptions&&this.gridOptions.backendServiceApi,this.createBackendApiInternalPostProcessCallback(this.gridOptions),this._isLocalGrid=!this.backendServiceApi,this.customDataView||(this.gridOptions.draggableGrouping||this.gridOptions.enableGrouping?(this.extensionUtility.loadExtensionDynamically(e.ExtensionName.groupItemMetaProvider),this.groupItemMetadataProvider=new Slick.Data.GroupItemMetadataProvider,this.sharedService.groupItemMetadataProvider=this.groupItemMetadataProvider,this.dataView=new Slick.Data.DataView({groupItemMetadataProvider:this.groupItemMetadataProvider})):this.dataView=new Slick.Data.DataView),this._columnDefinitions=this.swapInternalEditorToSlickGridFactoryEditor(this._columnDefinitions),this.sharedService.allColumns=this._columnDefinitions,this.sharedService.visibleColumns=this._columnDefinitions,this.extensionService.createExtensionsBeforeGridCreation(this._columnDefinitions,this.gridOptions),this.grid=new Slick.Grid("#"+this.gridId,this.customDataView||this.dataView,this._columnDefinitions,this.gridOptions),this.sharedService.dataView=this.dataView,this.sharedService.grid=this.grid,this.extensionService.bindDifferentExtensions(),this.bindDifferentHooks(this.grid,this.gridOptions,this.dataView),this.onGridCreated.emit(this.grid),this.grid.init(),!this.customDataView&&this.dataView&&this.dataView.beginUpdate&&this.dataView.setItems&&this.dataView.endUpdate){if(this.onDataviewCreated.emit(this.dataView),this.dataView.beginUpdate(),this.dataView.setItems(this._dataset,this.gridOptions.datasetIdPropertyName),this.dataView.endUpdate(),this.grid&&this.grid.getSelectionModel()&&this.gridOptions&&this.gridOptions.dataView&&this.gridOptions.dataView.hasOwnProperty("syncGridSelection")){var t=!1;this.gridOptions.backendServiceApi&&this.gridOptions.dataView.hasOwnProperty("syncGridSelectionWithBackendService")&&(t=this.gridOptions.dataView.syncGridSelectionWithBackendService);var i=this.gridOptions.dataView.syncGridSelection;if("boolean"==typeof i){var r=i;this._isLocalGrid||(r=i&&t),this.dataView.syncGridSelection(this.grid,r)}else"object"==typeof i&&this.dataView.syncGridSelection(this.grid,i.preserveHidden,i.preserveHiddenOnSelectionChange)}this._dataset.length>0&&(this._isDatasetInitialized||!this.gridOptions.enableCheckboxSelector&&!this.gridOptions.enableRowSelection||this.loadRowSelectionPresetWhenExists(),this._isDatasetInitialized=!0)}this._hideHeaderRowAfterPageLoad&&this.showHeaderRow(!1),this.executeAfterDataviewCreated(this.grid,this.gridOptions,this.dataView),this.bindResizeHook(this.grid,this.gridOptions),this.gridOptions.createPreHeaderPanel&&!this.gridOptions.enableDraggableGrouping&&this.groupingAndColspanService.init(this.grid,this.dataView),this.gridService.init(this.grid,this.dataView),this.gridOptions.enableTranslate&&this.extensionService.translateColumnHeaders(),this.gridOptions.enableExport&&this.exportService.init(this.grid,this.dataView),this.gridOptions.enableExcelExport&&this.sharedService&&this.excelExportService.init(this.grid,this.dataView),this.onGridInitialized.emit(this.grid),this.gridOptions&&this.gridOptions.backendServiceApi&&this.bindBackendCallbackFunctions(this.gridOptions),this.gridStateService.init(this.grid,this.dataView),this.gridOptions&&this.gridOptions.enablePagination&&this._isLocalGrid&&(this.showPagination=!0,this.loadLocalGridPagination()),this.onAngularGridCreated.emit({dataView:this.dataView,slickGrid:this.grid,destroy:this.destroy.bind(this),backendService:this.gridOptions&&this.gridOptions.backendServiceApi&&this.gridOptions.backendServiceApi.service,excelExportService:this.excelExportService,exportService:this.exportService,extensionService:this.extensionService,filterService:this.filterService,gridEventService:this.gridEventService,gridStateService:this.gridStateService,gridService:this.gridService,groupingService:this.groupingAndColspanService,paginationService:this.paginationService,resizerService:this.resizer,sortService:this.sortService,pluginService:this.extensionService}),this.optionallyShowCustomFooterWithMetrics()},r.prototype.loadEditorCollectionAsync=function(e){var t=this,r=e&&e.editor&&e.editor.collectionAsync;r instanceof i.Observable&&this.subscriptions.push(r.subscribe((function(i){return t.updateEditorCollection(e,i)})))},r.prototype.loadLocalGridPagination=function(){if(this.gridOptions){if(this.totalItems=Array.isArray(this.dataset)?this.dataset.length:0,this.paginationOptions&&this.dataView&&this.dataView.getPagingInfo){var e=this.dataView.getPagingInfo()||{};e.hasOwnProperty("totalRows")&&this.paginationOptions.totalItems!==e.totalRows&&(this.totalItems=e.totalRows)}this.paginationOptions.totalItems=this.totalItems;var t=this.setPaginationOptionsWhenPresetDefined(this.gridOptions,this.paginationOptions);this.initializePaginationService(t)}},r.prototype.loadRowSelectionPresetWhenExists=function(){var e=this,t=this.gridOptions&&this.gridOptions.presets,i=this.grid&&this.grid.getSelectionModel();if(this.gridOptions&&(this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowSelection)&&i&&t&&t.rowSelection&&(Array.isArray(t.rowSelection.gridRowIndexes)||Array.isArray(t.rowSelection.dataContextIds))){var r=t.rowSelection.dataContextIds,n=t.rowSelection.gridRowIndexes;Array.isArray(r)&&r.length>0?n=this.dataView.mapIdsToRows(r)||[]:Array.isArray(n)&&n.length>0&&(r=this.dataView.mapRowsToIds(n)||[]),this.gridStateService.selectedRowDataContextIds=r,(this._isLocalGrid&&!this.gridOptions.enablePagination||!this._isLocalGrid)&&setTimeout((function(){return e.grid.setSelectedRows(n)}))}},r.prototype.mergeGridOptions=function(e){e.gridId=this.gridId,e.gridContainerId="slickGridContainer-"+this.gridId,e.enablePagination=!(!e.backendServiceApi||e.enablePagination!==undefined)||e.enablePagination||!1;var t=$.extend(!0,{},Tt,this.forRootConfig,e);return e&&e.backendServiceApi&&e.pagination&&Array.isArray(e.pagination.pageSizes)&&e.pagination.pageSizes.length>0&&(t.pagination.pageSizes=e.pagination.pageSizes),this._hideHeaderRowAfterPageLoad=!1===t.showHeaderRow,t.enableFiltering&&!t.showHeaderRow&&(t.showHeaderRow=t.enableFiltering),!t.enableFiltering&&t.enablePagination&&this._isLocalGrid&&(t.enableFiltering=!0,t.showHeaderRow=!1),t},r.prototype.optionallyShowCustomFooterWithMetrics=function(){if(this.gridOptions){if(this.gridOptions.enableTranslate||this.gridOptions.i18n)this.translateCustomFooterTexts();else if(this.gridOptions.customFooterOptions){var e=this.gridOptions.customFooterOptions;e.metricTexts=e.metricTexts||{},e.metricTexts.lastUpdate=this.locales&&this.locales.TEXT_LAST_UPDATE||"TEXT_LAST_UPDATE",e.metricTexts.items=this.locales&&this.locales.TEXT_ITEMS||"TEXT_ITEMS",e.metricTexts.of=this.locales&&this.locales.TEXT_OF||"TEXT_OF"}this.gridOptions.enablePagination||(this.showCustomFooter=!!this.gridOptions.hasOwnProperty("showCustomFooter")&&this.gridOptions.showCustomFooter,this.customFooterOptions=this.gridOptions.customFooterOptions||{}),this.cd.detectChanges()}},r.prototype.swapInternalEditorToSlickGridFactoryEditor=function(e){var t=this;return e.map((function(e){return e.editor&&e.editor.collectionAsync&&t.loadEditorCollectionAsync(e),M({},e,{editor:e.editor&&e.editor.model,internalColumnEditor:M({},e.editor)})}))},r.prototype.translateCustomFooterTexts=function(){var e,t;if(this.translate&&this.translate.instant&&this.translate.currentLang){var i=this.gridOptions&&this.gridOptions.customFooterOptions||{};i.metricTexts=i.metricTexts||{};try{for(var r=j(Object.keys(i.metricTexts)),n=r.next();!n.done;n=r.next()){var o=n.value;if(o.lastIndexOf("Key")>0){var s=o.substring(0,o.lastIndexOf("Key"));i.metricTexts[s]=this.translate.instant(i.metricTexts[o]||" ")}}}catch(a){e={error:a}}finally{try{n&&!n.done&&(t=r["return"])&&t.call(r)}finally{if(e)throw e.error}}}},r.prototype.translateColumnHeaderTitleKeys=function(){this.extensionUtility.translateItems(this.sharedService.allColumns,"headerKey","name"),this.extensionUtility.translateItems(this.sharedService.allColumns,"nameKey","name")},r.prototype.translateColumnGroupKeys=function(){this.extensionUtility.translateItems(this.sharedService.allColumns,"columnGroupKey","columnGroup")},r.prototype.updateEditorCollection=function(e,t){e.editor.collection=t;var i=this.grid.getColumns();Array.isArray(i)&&(i.find((function(t){return t.id===e.id})).internalColumnEditor=e.editor)},N([t.Output(),V("design:type",Object)],r.prototype,"onAngularGridCreated",void 0),N([t.Output(),V("design:type",Object)],r.prototype,"onDataviewCreated",void 0),N([t.Output(),V("design:type",Object)],r.prototype,"onGridCreated",void 0),N([t.Output(),V("design:type",Object)],r.prototype,"onGridInitialized",void 0),N([t.Output(),V("design:type",Object)],r.prototype,"onBeforeGridCreate",void 0),N([t.Output(),V("design:type",Object)],r.prototype,"onBeforeGridDestroy",void 0),N([t.Output(),V("design:type",Object)],r.prototype,"onAfterGridDestroyed",void 0),N([t.Output(),V("design:type",Object)],r.prototype,"onGridStateChanged",void 0),N([t.Output(),V("design:type",Object)],r.prototype,"onGridBeforeExportToFile",void 0),N([t.Output(),V("design:type",Object)],r.prototype,"onGridAfterExportToFile",void 0),N([t.Output(),V("design:type",Object)],r.prototype,"onGridBeforeExportToExcel",void 0),N([t.Output(),V("design:type",Object)],r.prototype,"onGridAfterExportToExcel",void 0),N([t.Input(),V("design:type",Object)],r.prototype,"customDataView",void 0),N([t.Input(),V("design:type",String)],r.prototype,"gridId",void 0),N([t.Input(),V("design:type",Object)],r.prototype,"gridOptions",void 0),N([t.Input(),V("design:type",Number),V("design:paramtypes",[Number])],r.prototype,"gridHeight",null),N([t.Input(),V("design:type",Number),V("design:paramtypes",[Number])],r.prototype,"gridWidth",null),N([t.Input(),V("design:type",Array),V("design:paramtypes",[Array])],r.prototype,"columnDefinitions",null),N([t.Input(),V("design:type",Array),V("design:paramtypes",[Array])],r.prototype,"dataset",null),r=N([t.Component({selector:"angular-slickgrid",template:'<div id="slickGridContainer-{{gridId}}" class="gridPane" [style.width]="gridWidthString">\r\n  <div attr.id=\'{{gridId}}\' class="slickgrid-container" style="width: 100%" [style.height]="gridHeightString">\r\n  </div>\r\n\r\n  \x3c!-- Pagination section under the grid --\x3e\r\n  <slick-pagination id="slickPagingContainer-{{gridId}}" *ngIf="showPagination" [gridOptions]="gridOptions">\r\n  </slick-pagination>\r\n\r\n  \x3c!-- Custom Footer section under the grid --\x3e\r\n  <div *ngIf="showCustomFooter && customFooterOptions" class="slick-custom-footer row" style="width: 100%;"\r\n    [style.height]="customFooterOptions?.footerHeight || 20">\r\n    <div class="left-footer" [ngClass]="customFooterOptions.leftContainerClass">\r\n      {{customFooterOptions.leftFooterText}}\r\n    </div>\r\n\r\n    <div class="right-footer metrics" [ngClass]="customFooterOptions.rightContainerClass"\r\n      *ngIf="metrics && !customFooterOptions.hideMetrics">\r\n      <span *ngIf="!customFooterOptions.hideLastUpdateTimestamp">\r\n        <span>{{customFooterOptions.metricTexts?.lastUpdate}}</span>\r\n\r\n        {{metrics.endTime | date: customFooterOptions.dateFormat}}\r\n        <span class="separator">{{customFooterOptions.metricSeparator}}</span>\r\n      </span>\r\n\r\n      {{metrics.itemCount}}\r\n      <span *ngIf="!customFooterOptions.hideTotalItemCount">{{customFooterOptions.metricTexts?.of}}\r\n        {{metrics.totalItemCount}}\r\n      </span>\r\n      {{customFooterOptions.metricTexts?.items}}\r\n    </div>\r\n  </div>\r\n</div>\r\n',providers:[U,$e,Le,je,He,Be,Ue,ze,Ne,Vt,Re,Ge,Ct,xt,$t,Ht,At,Qt,Ut,Kt,Dt,It,Ft,Zt,Xt,Mt,Nt,Rt,Ve,Pt,Et]}),R(15,t.Optional()),R(16,t.Inject("config")),V("design:paramtypes",[t.ChangeDetectorRef,t.ElementRef,Ne,Re,Vt,Ge,xt,Ht,Qt,Ut,Kt,Zt,Xt,Ve,Pt,n.TranslateService,Object])],r)}(),fr=function(){function e(){}var i;return i=e,e.forRoot=function(e){return void 0===e&&(e={}),{ngModule:i,providers:[{provide:"config",useValue:e},U,K,Ie,Ct,$t,jt]}},e=i=N([t.NgModule({imports:[b.CommonModule,n.TranslateModule],declarations:[mr,pr],exports:[mr,pr],entryComponents:[mr]})],e)}();e.Aggregators=ri,e.AngularSlickgridComponent=mr,e.AngularSlickgridModule=fr,e.AngularUtilService=U,e.AutoTooltipExtension=$e,e.BsDropDownService=K,e.CellExternalCopyManagerExtension=Le,e.CellMenuExtension=je,e.CheckboxSelectorExtension=He,e.CollectionService=Ie,e.ColumnPickerExtension=Be,e.ContextMenuExtension=Ue,e.DraggableGroupingExtension=ze,e.Editors=yi,e.ExcelExportService=Ne,e.ExportService=Re,e.ExtensionService=Vt,e.ExtensionUtility=Ge,e.FilterConditions=et,e.FilterFactory=Ct,e.FilterService=xt,e.Filters=Ot,e.Formatters=Ji,e.GraphqlService=$t,e.GridEventService=Ht,e.GridMenuExtension=At,e.GridOdataService=jt,e.GridService=Qt,e.GridStateService=Ut,e.GroupItemMetaProviderExtension=Dt,e.GroupTotalFormatters=hr,e.GroupingAndColspanService=Kt,e.HeaderButtonExtension=It,e.HeaderMenuExtension=Ft,e.OdataQueryBuilderService=Lt,e.PaginationService=Zt,e.ResizerService=Xt,e.RowDetailViewExtension=Mt,e.RowMoveManagerExtension=Nt,e.RowSelectionExtension=Rt,e.SharedService=Ve,e.SlickPaginationComponent=pr,e.SlickgridConfig=Et,e.SortService=Pt,e.Sorters=Ae,e.addToArrayWhenNotExists=te,e.addWhiteSpaces=ie,e.castToPromise=se,e.charArraysEqual=oe,e.decimalFormatted=le,e.executeBackendCallback=Q,e.executeBackendProcessesCallback=W,e.findOrDefault=ae,e.formatNumber=de,e.getDescendantProperty=ce,e.getScrollBarWidth=ue,e.htmlDecode=function(e){var t=DOMParser&&new DOMParser;if(t&&t.parseFromString){var i=t.parseFromString("<!doctype html><body>"+e,"text/html");return i&&i.body&&i.body.textContent}return $("<div/>").html(e).text()},e.htmlEncode=re,e.htmlEntityDecode=ne,e.htmlEntityEncode=function(e){for(var t=[],i=e.length-1;i>=0;i--)t.unshift(["&#",e[i].charCodeAt(),";"].join(""));return t.join("")},e.mapFlatpickrDateFormatWithFieldType=pe,e.mapMomentDateFormatWithFieldType=he,e.mapOperatorByFieldType=ge,e.mapOperatorToShorthandDesignation=fe,e.mapOperatorType=me,e.onBackendError=q,e.parseBoolean=ye,e.parseUtcDate=ve,e.refreshBackendDataset=X,e.sanitizeHtmlToText=be,e.setDeepValue=Se,e.thousandSeparatorFormatted=_e,e.titleCase=Oe,e.toCamelCase=Te,e.toKebabCase=function(e){return"string"==typeof e?Te(e).replace(/([A-Z])/g,"-$1").toLowerCase():e},e.toSnakeCase=function(e){return"string"==typeof e?Te(e).replace(/([A-Z])/g,"_$1").toLowerCase():e},e.uniqueArray=Ee,e.uniqueObjectArray=function(e,t){var i,r;if(void 0===t&&(t="id"),Array.isArray(e)&&e.length>0){var n=[],o=new Map;try{for(var s=j(e),a=s.next();!a.done;a=s.next()){var l=a.value;o.has(l[t])||(o.set(l[t],!0),n.push({id:l[t],name:l.name}))}}catch(d){i={error:d}}finally{try{a&&!a.done&&(r=s["return"])&&r.call(s)}finally{if(i)throw i.error}}return n}return e},e.unsubscribeAllObservables=Ce,e.ɵa=Jt,e.ɵb=ei,e.ɵba=st,e.ɵbb=vt,e.ɵbc=at,e.ɵbd=lt,e.ɵbe=dt,e.ɵbf=ct,e.ɵbg=pt,e.ɵbh=ht,e.ɵbi=mt,e.ɵbj=bt,e.ɵbk=St,e.ɵbl=_t,e.ɵbm=_i,e.ɵbn=Oi,e.ɵbo=Ti,e.ɵbp=Zi,e.ɵbq=Ei,e.ɵbr=Ci,e.ɵbs=Pi,e.ɵbt=wi,e.ɵbu=xi,e.ɵbv=Si,e.ɵbw=Di,e.ɵbx=Ai,e.ɵby=ki,e.ɵbz=Fi,e.ɵc=ti,e.ɵca=Ii,e.ɵcb=Mi,e.ɵcc=Ri,e.ɵcd=Vi,e.ɵce=Gi,e.ɵcf=$i,e.ɵcg=Li,e.ɵch=ji,e.ɵci=Hi,e.ɵcj=Bi,e.ɵck=zi,e.ɵcl=Ui,e.ɵcm=Wi,e.ɵcn=qi,e.ɵco=Qi,e.ɵcp=Xi,e.ɵcq=Ki,e.ɵcr=Yi,e.ɵcs=ir,e.ɵct=tr,e.ɵcu=er,e.ɵcv=nr,e.ɵcw=rr,e.ɵcx=cr,e.ɵcy=ur,e.ɵcz=or,e.ɵd=ii,e.ɵda=dr,e.ɵdb=lr,e.ɵdc=ar,e.ɵdd=sr,e.ɵde=Pe,e.ɵdf=Y,e.ɵdg=Z,e.ɵdh=J,e.ɵe=ni,e.ɵf=oi,e.ɵg=ai,e.ɵh=li,e.ɵi=di,e.ɵj=ci,e.ɵk=pi,e.ɵl=hi,e.ɵm=mi,e.ɵn=fi,e.ɵo=gi,e.ɵp=Je,e.ɵq=We,e.ɵr=Xe,e.ɵs=Ke,e.ɵt=Ye,e.ɵu=Qe,e.ɵv=tt,e.ɵw=it,e.ɵx=rt,e.ɵy=nt,e.ɵz=ot,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-slickgrid.umd.min.js.map